<?xml version="1.0" encoding="utf-8"?>
<ExecutionControl name="UPGRADE" srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPhaselist.xml#89 $" version="3">
  <modules>
    <!-- ******************************************************************* -->
    <module name="MOD_SELROADMAP">
      <!-- (jo 710) NOT in check mode  -->
      <description>Select roadmap</description>
      <password>MQLQXXTE</password>
      <!--  pwd: 85528  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMODSelRoadmap.xml#3 $">
  <!-- ************************************************************ -->

    <phase name="TOOLVERSXML_ROADMAP" logfile="auto" password="AWHKBVTQ">
        <!-- pwd: 53084 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>CUR</arg>
            <arg>disp+work</arg><!-- tool names -->
            <arg>SETKERNELPARAMS</arg>
        </args>
        <action>Determines the tool version of disp+work and the kernel release and if the system is UNICODE, 64BIT.</action>
    </phase>

    <phase name="SELECT_ROADMAP" logfile="SELROADMAP.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->
        <args>
            <arg></arg>
        </args>
    </phase>
</phaselist>

    </module>

    <!-- ******************************************************************* -->
    <!-- **********               PREPARE MODULES                *********** -->
    <!-- ******************************************************************* -->
    <module name="PREP_EXTRACT" type="prepare" mandatory="yes">
      <!-- (jo 710) NOT in check mode  -->
      <description>Extraction</description>
      <postevent>MODULE_INIT(PREP_PRE_CHECK)</postevent>
      <revokemodule>REV_PRPEXTRACT</revokemodule>
      <password>MQLQXXTE</password>
      <!--  pwd: 85528  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPExtract.xml#34 $">
  <!-- ************************************************************ -->
  <!-- Extraction (CHECK) -->
  <!-- ************************************************************ -->
  <phase name="BEGIN_PRE" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>INITINSTANCE;INITCHECKS;MKDIRS;STARTTIME;CHECKPHASEOPTS=DBTYPE+OSTYPE;PROTECT_PARS=fastdatacopy,zerodowntime_upg</arg>
    </args>
    <action>Checks upgrade directory</action>
  </phase>
  <!-- remove whole phase  -->
  <if test="0">
  <phase name="SAPCRYPTOLIB_CHKTOOL" logfile="CRYPTLIBCHK.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
        <arg>TOOL</arg>
    </args>
    <action>Checks if the original system runs in encrypted mode using SAPCrypolib or if SAPCryptolib is available for usage by the LM tool.</action>
  </phase>
  </if>
  <phase name="PREP_DMPSPC_DB4_INI" logfile="PREP_DMPSPC_DB4_INI.LOG" password="GBTVWJUR">
    <!-- pwd: 59052 -->
    <options>
      <option name="DBTYPE" value="DB2/400" />
    </options>
    <args>
      <arg>INI</arg>
    </args>
    <action>Prepare data collection for phase DMPSPC_INI</action>
  </phase>
  <phase name="PREP_INFRASTRUCTURE_OS4" logfile="PREP_INFRASTRUCTURE_OS4.LOG" password="GBTVWJUR">
    <!-- pwd: 59052 -->
    <options>
      <option name="OSTYPE" value="OS/400" />
    </options>
    <action>Prepare infrastructure needed for Upgrades running on IBM i platform</action>
  </phase>
  <!--  (jo 720) Former KEY_CHK phase :)  -->
  <phase name="SCAN_DOWNLOADDIR" logfile="ASKDOWNLOAD.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg></arg>
    </args>
    <action>Initial scan of download directory</action>
  </phase>
  <!-- ****************************************************************************************** -->
  <!-- (jo 710) Scanning was already done in KEY_CHK since there we had to recognize SAPup archives -->
  <!-- (jo 720) To make TOOLCHECKXML_PREIMP work, we already look for a new kernel and extract it  -->
  <phase name="SCANDIR_INI" logfile="SCANDIRI.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg>COLLDVD</arg>
    </args>
    <action>Scans the download directory and presets variables</action>
  </phase>

    <!-- (jo 710) To make sure pre-import does not abort: Determine R3trans version of R3trans in current path and check. -->
    <phase name="TOOLCHECKXML_PREIMP" logfile="auto" password="WPCMQDAR">
        <!-- pwd: 89806 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>ToolChkPRE.xml</arg>
            <arg>r3trans</arg>              <!-- Tool Filter -->
            <arg>QUIET;RUNB4PREIMP</arg>    <!-- Options -->
        </args>
        <options>
        </options>
        <action>Determines and checks the R3trans version for pre-import.
                Also determines the kernel release via disp+work
        </action>
        <usage>Upgrade tools if necessary</usage>
    </phase>

  <!-- (jo 710) Moved to here again -->
  <!-- (cv 710/1) preimport -->
  <!-- PREIMP now needs the TOOLCHECKXML_PREIMP running before to get disp+work infos -->
  <phase name="PREIMP" logfile="PREIMP.LOG" elgfile="PREIMP.ELG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>R710VPT.SAP</arg> <!-- for releases <  610 -->
      <arg>R710VPE.SAP</arg> <!-- for releases >= 610 -->
    </args>
    <action>Preimport of tools needed before toolimport</action>
  </phase>
  
  <!-- (hk 721) Need to prepare SSFS for SUM tools -->
  <!--  phase must run before first SQL phase and before INITPUT_PRE on SYB -->   
  <phase name="SSFS_PREP" logfile="SSFSP.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
        <arg>INIT;COPY;CHANGEKEY</arg>
    </args>
    <options>
      <or>
        <option name="DBTYPE" value="ORACLE" />
        <option name="DBTYPE" value="SYBASE" />
      </or>
    </options>
    <action>SSFS preparation for SUM tools</action>
  </phase>
  
  <!-- *********************************************************************************** -->
  <!-- **** Caution: Only from here on, phase option "destcomponent" can be used!!! -->
  <!-- *********************************************************************************** -->
</phaselist>

    </module>
    <module name="PREP_PRE_CHECK" type="prepare" mandatory="yes" checkmode="yes">
      <description>Checks the system status</description>
      <postevent>MODULE_INIT(PREP_INIT)</postevent>
      <revokemodule>REV_PRPPRECHECK</revokemodule>
      <password>QURTIEOQ</password>
      <!--  pwd: 8075  -->
      <precedences>
        <precedence>PREP_EXTRACT</precedence>
        <precedence>PREP_EXT</precedence> <!-- delete 4 -->
        <precedence>PREP_EXTRArtttrCT</precedence>
        <precedence>PREP_EXTRrtzzeACT</precedence>
        <precedence>PREP_EXTtzuwuuRACT</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPPreCheck.xml#18 $">
  <!-- ************************************************************ -->
  <!-- Checks before parameter input (CHECK) -->
  <!-- ************************************************************ -->
  <phase name="INSTANCELIST_INIT" logfile="INSTANCELIST_INIT.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
      <arg>INIT_LIST</arg>
    </args>
    <action>Init instance list</action>
  </phase>
  <!-- (jo 710) Read profiles and preset all dialogues -->
  <phase name="PROFREAD" logfile="PROFREAD.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg></arg>
    </args>
    <action>Waits for buffer refresh and retrieves system parameters via RFC and presets internal storage</action>
  </phase>
  <phase name="INITPUT_PRE" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <action>Read profiles and initialize knowledge about the system</action>
  </phase>
  <!-- *********************************************************************************** -->
  <!-- **** Caution: Only from here on, phase option "destcomponent" can be used!!! -->
  <!-- *********************************************************************************** -->

    <!-- (jo 710) Determine if we have a UNICODE system from calling "disp+work" -V -->
    <phase name="TOOLVERSXML_UNI" logfile="auto" password="AWHKBVTQ">
        <!-- pwd: 53084 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>SYS</arg>
            <arg /><!-- tool names -->
            <arg></arg>
        </args>
        <action>Determines the tool version and if the system is UNICODE</action>
    </phase>

  <phase name="DBCHK_PRE" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg>DET_STARTSAPPARS;INFO</arg>
    </args>
    <action>Determines database version and SAP release</action>
  </phase>
  <!-- (jo 710) Check system status -->
  <!-- (ag 703) Moved here and made available for the general folks -->
  <!-- to be moved to new checks module and to be finalized -->
  <phase name="CHECKSYSSTATUS" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <args>
      <arg></arg>
    </args>
    <options>
      <option name="ST_range" value="700-*" />
    </options>
  </phase>

  <!--  (jo 720) Is needed to find SPAM update  -->
  <phase name="SCANDIR_EPS0" logfile="SCANDIRE.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>EXTRACTEPS</arg>
    </args>
    <action>Extracts files for EPS inbox</action>
  </phase>

  <!-- (hk lmt003) no dependencies to toolimport / must run before RUN_GENPUTTBSHD -->
  <phase name="SPAMCHK_INI" logfile="SPAMCHK.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <args>
      <arg></arg>
    </args>
    <action>Checks SPAM version and performs update on request</action>
  </phase>
</phaselist>
</module>

<module name="PREP_INPUT" type="prepare" mandatory="yes" checkmode="yes">
      <description>Parameter input</description>
      <postevent>MODULE_INIT(PREP_INIT)</postevent>
      <revokemodule>REV_PRPINPUT</revokemodule>
      <password>QURTIEOQ</password>
      <!--  pwd: 8075  -->
      <precedences>
        <precedence>PREP_PRE_CHECK</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPInput.xml#89 $">
  <!-- ************************************************************ -->
  <!-- Parameter input (CHECK) -->
  <!-- ************************************************************ -->
  <!-- ************************************************************************ -->
  <!-- ************************************************************************ -->
  <!-- ************************************************************************ -->
  <!-- (hk 721) Fix database connection for DB2 -->
  <phase name="DBQUERY_INIT" password="WFJPKDCF">
       <!-- pwd: 60928 -->
    <args>
      <arg>INIT</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB2-z/OS" />
      <option name="ST_range" value="*-640" />
    </options>
    <action>Perform database dependent actions</action>
    <usage>Perform database dependent actions</usage>
  </phase>

  <phase name="READCVERS_DUMP" logfile="READCVERSD.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg>DUMP;DETPRODTYPE;INITCOMPINFO_START;INIT_AVERSTABLE</arg>
    </args>
    <action>Dumps table 'CVERS' into 'CVERSDUMP.OUT' and determines product type</action>
  </phase>

  <!-- (jo 710) Want to have this ready for next phase... This needs to come after PROFREAD so we know where the EPS-Inbox is -->
  <phase name="SCANDIR_GEN" logfile="SCANDIRG.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>GENSTACKXML</arg>
    </args>
    <options>
      <option name="feature_switch" value="genstackxml" />
    </options>
    <action>Generates stack-XML from download directory</action>
  </phase>

  <!-- ******************************************************************** -->
  <!-- (jo 720) Moved to here to have this available early -->
  <phase name="SELSTACKXML_ASK" logfile="SELSTACKXMLA.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg></arg>
      <arg>ASK;READBASIC;CHECK_INITIAL</arg>
    </args>
    <options>
        <not><option name="NOSTACKFILE" value="TRUE" /></not>
    </options>
    <action>Decide about stack file</action>
  </phase>

    <phase name="SELSTACKXML_DONTASK" logfile="SELSTACKXMLDA.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg></arg>
      <arg>NOXML</arg>
    </args>
    <options>
        <option name="NOSTACKFILE" value="TRUE" />
    </options>
    <action>Automatically decide about stack file</action>
  </phase>

  <!-- (jo 720) Determine main mode, i. e. 'EXPORT' or 'CLONE' -->
  <phase name="DETMAINMODE" logfile="DETMAINMODE.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <args>
      <arg></arg>
    </args>
    <action>Decide about main program mode (EXPORT or CLONE)</action>
  </phase>

  <!-- *********************************************************************************** -->
  <!-- ************* from now one MODE=XXX is possible -->
  <!-- *********************************************************************************** -->
  <phase name="READDATA_PRODCNTRL" logfile="READDATAP.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <args>
      <arg></arg>
      <arg></arg>
      <arg></arg>
      <arg>UNPACKPRODCNTRL</arg>
    </args>
    <action>Reads data files from the upgrade CDs</action>
    <usage>Mount each requested upgrade DVD</usage>
  </phase>

  <!-- ********************************************************************************************** -->
  <!-- ********************************************************************************************** -->
  <!-- (jo 710) Moved kernel extraction to here. Must come AFTER* TOOLVERSXML_UNI to have UNICODE flag set! -->
  <!-- (stm 620-5) -->
  <phase name="EXTRACTKRN_PRE" logfile="EXTRKRN.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
      <arg>SETSTATUS</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Extracts kernel</action>
  </phase>

  <!-- ********************************************************************************************** -->
  <phase name="KX_CPYORG" logfile="KX_CPYORG.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>ToolVersXML</arg>
      <arg>SETSTATUS</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
    <action>Copies the original kernel to $(PUTPATH)/exe.</action>
    <usage>none</usage>
  </phase>

  <!-- ********************************************************************************************** -->
  <!-- ********************************************************************************************** -->
  <!-- (jo 620) Substitute old 'READDATA' phases with one* -->
  <phase name="READDATA_EXP" logfile="READDATAE.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->
    <args>
      <arg>EXPORTMISC</arg>
      <arg>MISCS.TOC</arg>
      <arg></arg>
      <arg>INITCOMPINFO_EXPORT=CVERSEXPORT.OUT</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Reads data files from the upgrade CDs</action>
    <usage>Mount each requested upgrade DVD</usage>
  </phase>

  <!-- (jo 710) New phase only for enhancement package upgrade
       This relies on previous phase 'READCVERS_DUMP' having dumped "CVERSDUMP.TMP"!
    -->
  <phase name="READCVERS_EHPI" logfile="READCVERS.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>INITCOMPINFO_EXPORT</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
  </phase>

  <!-- (jo 710) Set destination release after export release is known  -->
  <phase name="SELSTACKXML_DEST" logfile="SELSTACKXMLD.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>SPDA_SELSTACKXML.LOG</arg>
      <arg>FIXXMLBASIS;INITCOMPINFO_DEST;SETDESTVERS</arg>
    </args>
  </phase>

  <!-- (hk 720) SUM version specific checks -->
  <phase name="SUMCHK" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>SMODILOG;SRCREL;CPK</arg>
    </args>
    <action>Perform SUM version specific check</action>
  </phase>

  <!-- ********************************************************************************************** -->
  <!-- ********************************************************************************************** -->
  <!-- **** Caution: Only from here on, phase option "destvers"/"destcomponent" can be used!!! -->
  <!-- ********************************************************************************************** -->
  <!-- (jo 710) Now determine the versions of the kernel. Needed for SCANDIR below -->
    <phase name="TOOLVERSXML_EXTRACT" logfile="auto" password="SEFKNLNI">
        <!-- pwd: 32478 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>EXE</arg> <!-- NEW no longer exists -->
            <arg /><!-- tool names -->
            <arg /><!-- misc -->
        </args>
        <options>
        </options>
        <action>Determines the tool version of the new kernel for special requirements</action>
    </phase>

  <!-- (jo 710) Scan again for new archives -->
  <phase name="SCANDIR_COLLECT" logfile="SCANDIRC.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg>SCAN;COLLKRNL;COLLIGS;INFO</arg>
    </args>
    <action>Check for new kernel from download and produce overview</action>
  </phase>
  <!-- (jo 710) -->
  <phase name="SCANDIR_EXTRACT" logfile="SCANDIRX.LOG" password="AMBAVVVE">
       <!-- pwd: 12335 -->
    <args>
      <arg>EXTRKRNL;COPYIGS;EXTRACTEPS;COPYCTC</arg>
    </args>
    <action>Extracts new kernel from download directory</action>
  </phase>

    <!-- (jo 620.22) (jo 700) Has to come AFTER DBCHK such that some basic variables are set like SAPSTRL, DBTYPE -->
    <phase name="TOOLCHECKXML_INI" logfile="auto" password="MVWDHMJL">
        <!-- pwd: 5514 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>ToolChkINI.xml</arg>
            <arg /> <!-- Tool Filter -->
            <arg /> <!-- Options -->
        </args>
        <options>
        </options>
        <action>Determines and checks the tool versions of SYS</action>
        <usage>Upgrade tools if necessary</usage>
    </phase>

  <!-- (jo 700) Tests if "R3trans -d" works for the new kernel -->
  <phase name="DBCONNCHK_INI" password="IEDAJFBM">
       <!-- pwd: 40231 -->
    <args>
      <arg>DBCONNCHK.LOG</arg>
      <arg></arg>
    </args>
    <action>Tests if new tools can connect to the database</action>
  </phase>
  <!-- (jo 620.67) Determine if system is customer or SAP system -->
  <phase name="CHKSYSTYPE" logfile="CHKSYSTYPE.LOG" password="WCPMDDNE">
       <!-- pwd: 11646 -->
    <action>Determines if system is SAP or customer</action>
  </phase>
  <!-- (hk 721) must run after DBCONNCHK_INI to ensure SUM SSFS setup -->
  <phase name="SSFS_INI" logfile="SSFSI.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
        <arg>INIT;COPY;CHANGEKEY</arg>
    </args>
    <options>
      <or>
        <option name="DBTYPE" value="ORACLE" />
        <option name="DBTYPE" value="SYBASE" />
      </or>
    </options>
    <action>SSFS preparation for SUM tools</action>
  </phase>
  <!-- ************************************************************************** -->
  <!--  (jo 720) Ask for migration to second DB *before* toolimport since we add transports there  -->
  <phase name="MIG2NDDB_INI" logfile="MIG2NDDB_INI.LOG" password="WJOGCDWP">
    <!-- pwd: 18134 -->
    <args>
      <arg>CHECK_PREREQ;ASK_MIGMODE;SET_FLAGS</arg>
    </args>
    <options>
      <not><option name="NOSTACKFILE" value="TRUE" /></not>
    </options>
    <action>Sets the toolmode to &quot;Migration&quot; and initializes specific variables</action>
  </phase>
  <!-- (jo 710) Move after* kernel extraction since we need tools for validating the DB password if asked for -->
  <!-- (hk 721) Move after* migration dialog, as we need the dbapassword for DMO/SLT mode -->
  <phase name="DBQUERY_PRE" password="WFJPKDCF">
       <!-- pwd: 60928 -->
    <args>
      <arg>PRE</arg>
    </args>
    <action>Ask database dependent questions</action>
    <usage>Enter database parameters</usage>
  </phase>
    <!-- (vd 620.33) check DB version for PREPARE -->
  <!-- (hk DMO) OSDB checks after DMO decision -->
  <phase name="CONFCHK_IMP" logfile="CONFCHK_IMP.LOG" password="YVGUKZWN">
       <!-- pwd: 68913 -->
    <args>
      <arg>SECTION=PRE;MANDATORY;GETDBHOSTOS;PRELIMINARY</arg>
    </args>
    <action>Tests operating system and database version</action>
    <usage>Upgrade operating system and database to the required version, if necessary</usage>
  </phase>

  <!--  Do this after having decided if to do migration   -->
  <!-- (jo 710) Unpack user environment files -->
  <phase name="READDATA_USRENV" logfile="READUSRENV.LOG" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <args>
      <arg>READUSRENV.LST</arg>
      <arg></arg>
      <arg></arg>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="userenvdvd" />
      <option name="MODE" value="EXPORT" />
      <not><option name="OSTYPE" value="Windows" /></not>
      <not><option name="OSTYPE" value="OS/400" /></not>
    </options>
    <action>Unpacks user environment files</action>
    <usage>Mount each requested upgrade CD</usage>
  </phase>

  <!-- ********************************************************************************************** -->
  <!-- (jo 710) Unpack Oracle client DVD. We do this after* the kernel to avoid extensive DVD changing -->
  <!-- (hk 703) after SCANRIR_EXTRACT because destination release/kernel is necessary -->
  <phase name="READDATA_ORACLNT" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <!-- this must* be emptytoc info file -->
    <args>
      <arg>READORACLNT.LST</arg>
      <arg></arg>
      <arg></arg>
      <arg>TOC_UPGDIR</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="OSTYPE" value="Windows" />
      <option name="DBTYPE" value="ORACLE" />
    </options>
    <action>Unpacks Oracle client DVD</action>
    <usage>Mount each requested DVD</usage>
  </phase>

  <!-- (ag sp04) check ASCS instance -->
  <phase name="ASCS_CHK" logfile="ASCS.LOG" password="CHOKYROF">
    <!-- pwd: 81640 -->
    <options>
      <option name="ST_range" value="620-*" />
    </options>
    <action>Checks the ASCS instance and sets internal ASCS variables</action>
    <usage>info</usage>
  </phase>

  <!-- (ps 700.16) checks if a J2EE is running also -->
  <!-- (jo 720) This must run for ByDesign as well, otherwise we never detect if a JAVA system is present! -->
  <!-- (jo 720) Is now running for ALL start releases since we need to set the internal status. Uses start release,
       so needs to come after DBCHK_PRE
    -->
  <phase name="J2EE_CHK1" logfile="J2EECHK.LOG" password="SUMNHLPW">
       <!-- pwd: 94221 -->
    <action>Checks if J2EE is also running</action>
    <usage>info</usage>
  </phase>
  <!-- (hk 720) phases HIAV_CHK and J2EE_CHK1 have to be run before -->
  <phase name="INSTANCELIST_PRE" logfile="INSTANCELIST_PRE.LOG" password="EWIWUCUS">
       <!-- pwd: 9911 -->
    <args>
      <arg>CHECK_SIDADM;REWRITE_LIST</arg>
    </args>
    <action>Gets the system instance list</action>
  </phase>
  <phase name="CHECKSYSSTATUS_POST" password="QOIFNPTA">
       <!-- pwd: 33718 -->
    <args>
      <arg>ALL</arg>
    </args>
    <usage></usage>
    <options>
      <option name="ST_range" value="700-*" />
    </options>
    <action></action>
  </phase>
  <!-- (ps 700-2.01) checks if this is a High-Availibility scenario -->
  <phase name="HIAV_CHK" logfile="HIAVCHK.LOG" password="CRUUERMR">
       <!-- pwd: 34594 -->
    <action>Checks if this is HA</action>
    <usage>info</usage>
  </phase>
  <!-- (jo 720) -->
  <phase name="CHECK4SOLMAN" password="OCDEFTTC">
       <!-- pwd: 13107 -->
    <args>
      <arg>EXPCHECKS</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="prodtype" value="CRM" />
    </options>
    <action>Checks for correct export in case of Solution Manager System</action>
  </phase>
  <!-- ********************************************************************************************** -->
  <phase name="KX_CPYCHK" logfile="KX_CPYCHK.LOG" password="SANGVLTY">
       <!-- pwd: 63887 -->
    <args>
      <arg></arg>
    </args>
    <action>Check kernel files of the source system</action>
    <usage>none</usage>
  </phase>
</phaselist>

 </module>
 
 <module name="PREP_INIT" type="prepare" mandatory="yes" checkmode="yes">
      <description>Initialization</description>
      <!--  PREP_IMPORT is unique, so might be skipped. To make sure we repeat PREP_PARSETUP, also initialize here  -->
      <postevent>MODULE_INIT(PREP_CONFIGURATION,PREP_PARSETUP)</postevent>
      <revokemodule>REV_PRPINIT</revokemodule>
      <password>KSRQNBLC</password>
      <!--  pwd: 54610  -->
      <precedences>
        <precedence>PREP_INPUT</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPInit.xml#66 $">
  <!-- ************************************************************ -->
  <!-- Initialization (CHECK) -->
  <!-- ************************************************************ -->
  <phase name="DBCHK_INI" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>CHECK_UPGCOND;CHECK_MCOD;SET_DBENV</arg>
    </args>
    <action>Determines database version and SAP release</action>
  </phase>
  <!-- SQLDB phases should run after DBCONNCHK phase -->
  <phase name="SQLDB_LIST_AVERS_EXT" password="IIVEBFVW">
       <!-- pwd: 66178 -->
    <args>
      <arg>LIST_AVERS_EXT</arg>
      <arg>LOGNAME=AVEXT.LOG</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="ST_range" value="710-*" />
    </options>
    <action>saves AVERS_EXT to the log directory</action>
  </phase>
  <!-- (jo 710) We use RFC - but the DDIC password was already validated in PROFREAD phase -->
  <phase name="SWITCHPARAM_UPGDIR" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <action>Checks consistency of profile parameter DIR_PUT with upgrade directory and switches it if necessary</action>
  </phase>
  <!-- (jo 710) Tell the user to start the JAVA upgrade after having switched DIR_PUT -->
  <phase name="REQ_J2EEUPG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <!-- (jo 710) For 7.01 we run in wizard mode, but still want this phase to run, so exclude via "destvers" option -->
    <args>
      <arg>ReqJ2EEUPG</arg>
      <arg></arg>
    </args>
    <options>
      <option name="J2EEUPG_IS_SEPARATE" />
    </options>
    <action>CBU: Requests j2ee prepare and upgrade</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_PREP_STARTED" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg>PREPARE</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="VERSCHK_INI" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <args>
      <arg></arg>
    </args>
    <action>Checks SAP release</action>
    <usage>Upgrade to a valid source release if necessary</usage>
  </phase>
  <phase name="VALCHK_INI" logfile="VALCHK.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>HARD-CHK</arg>
    </args>
    <action>Tests if target system is a preliminary version</action>
    <action>(Cannot upgrade the system)</action>
  </phase>

  <!-- (af 700.11) -->
  <phase name="EHP_CHK" logfile="EHPCHK.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="ST_range" value="700-*" />
    </options>
    <action>Check if EhP upgrade is possible</action>
    <action>(Cannot upgrade the system)</action>
  </phase>
  <!-- (vd 620.uc) (ps 620-5.09)check for consistency with respect to UNICODE -->
  <!-- (jo) MUST come after TOOLVERSXML_INI!! -->
  <phase name="UNICODE_CHK_PRE" logfile="UNICHK.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Checks, if DB is UNICODE</action>
  </phase>

  <!-- (jo 710) Scan again for new archives -->
  <phase name="SCANDIR_UPG1" logfile="SCANDIRU.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>SCAN;COLLKRNL;EXTRKRNL</arg>
    </args>
    <action>Check for new kernel from download</action>
  </phase>

    <phase name="TOOLCHECKXML_UPG" logfile="auto" password="YAWZNZVG">
        <!-- pwd: 79932 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>ToolChkUPG.xml</arg>
            <arg /> <!-- Tool Filter -->
            <arg /> <!-- Options -->
        </args>
        <options>
        </options>
        <action>Determines and checks the tool version of the new kernel for special requirements</action>
        <usage>Upgrade $(PUTPATH)/exe if necessary</usage>
    </phase>

  <!-- (ag sp13) new phase type for synchronization with Java upgrade -->
  <phase name="UPDATE_SHAREDINPUT" password="MBCOOXWZ">
    <!-- pwd: 73324 -->
    <args>
    </args>
    <options>
      <option name="IS_DUAL_UI" />
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Update Java Shared Input</action>
  </phase>

  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_INFO_FINISHED" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>INFO</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="CLNT_CHK_INI" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>CLNTOUT.LOG</arg>
      <arg>LOCKED_CLIENT-&gt;&gt;&gt;</arg>
    </args>
    <action>Checks whether clients are locked for SAP system upgrade</action>
    <usage>Unlock clients for SAP system upgradeif necessary</usage>
  </phase>
  <phase name="PATCH_CHK1" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <args>
      <arg></arg>
    </args>
    <action>Finds unconfirmed Support Packages and displays the result</action>
    <usage>Call transaction SPAM to confirm any unconfirmed Support Packagesif necessary</usage>
  </phase>
  <!-- ******************************************************************** -->
  <!-- (cv 710/1) -->
  <phase name="JOB_RSUPDTEC" logfile="PSUPDTEC.LOG" elgfile="PSUPDTEC.ELG" password="IIVEBFVW">
       <!-- pwd: 66178 -->
    <args>
      <arg>RSUPDTEC</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPDTEC\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Resolve inconsistencies in TABART-TABSPACE mapping</arg>
    </args>
    <options>
      <or>
        <option name="DBTYPE" value="ORACLE" />
        <option name="DBTYPE" value="DB6" />
      </or>
    </options>
    <action>Resolve inconsistencies in TABART-TABSPACE mapping</action>
  </phase>
  <!-- ae EHPI generate TAIA<DB>.SAP files from tamplates  -->
  <phase name="GEN_TAIASAP" logfile="GENTAIASAP.LOG" password="SEFKNLNI">
       <!-- pwd: 32478 -->
    <args>
      <arg>TAIA$(DBAEXT)TPL.SAP</arg>
      <arg>TAIA$(DBAEXT).SAP</arg>
      <arg>$(SAPDERL)</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
      <or>
	<option name="DBTYPE" value="DB6" />
	<option name="DBTYPE" value="ORACLE" />
      </or>
    </options>
    <action>Initializes TAIA&lt;DB&gt;.SAP for start release</action>
  </phase>
  <!-- (vd 610.10) container name translation -->
  <!-- (jo 720) Must come after COMPINFO_INI to have productversion ready -->
  <phase name="INIT_CNTRANS_PRE" logfile="INICNTPRE.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg>CHECK</arg>
      <arg>SELTAIA.$(DBAEXT)</arg>
      <arg>SELTAIA.LOG</arg>
      <arg>SELDBS.$(DBAEXT)</arg>
      <arg>SELDBS.LOG</arg>
      <arg>TAIA$(DBAEXT).SAP</arg>
      <arg>TAIATRPRE.DAT</arg>
    </args>
    <action>Initializes the container name translator and checks mapping</action>
    <usage>Fix inconsistencies in TABART-TABSPACE mapping, if necessary.</usage>
    <usage>Additional informations are given in &lt;b&gt;SAP Note 541542&lt;/b&gt;</usage>
  </phase>
  <!-- to.700.508: update DB4 statistic tables -->
  <phase name="JOB_RSDB4090" logfile="PSDB4090.LOG" elgfile="PSDB4090.ELG" password="AMBAVVVE">
       <!-- pwd: 12335 -->
    <args>
      <arg>RSDB4090</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg></arg>
      <arg>20</arg>
      <arg>UPDATE DB4 STATISTIC TABLES</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="DBTYPE" value="DB2/400" />
    </options>
    <action>Updates DB4 statistic tables</action>
  </phase>
  <!-- (fhw 700) DB6 only -->
  <phase name="CHK_DB6_REG_PRE" password="WJOGCDWP">
       <!-- pwd: 18134 -->
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Checks DB6 registry parameters</action>
  </phase>
  <!-- (fhw 700) DB6 only -->
  <phase name="CHK_DB6_PAR_INI" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <args>
      <arg>DB6PARIN.LST</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Checks DB6 parameters</action>
  </phase>
  <!-- (hk 721) HDB GRANTS check (ah: needs to run before the first SPACECHK phase) -->
  <phase name="HDB_CHK_PRIVILEGES" logfile="HDBCHKPRIVILEGES.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <args>
      <arg>HDBSLLIB_CHK_PRIVILEGES.LOG</arg>
    </args>
    <options>
      <option name="DBTYPE" value="HDB" />
      <option name="realdestvers" value="731-799" />
    </options>
    <action>Checks and adjusts privileges of ABAP schema user</action>
  </phase>
  <phase name="SPACECHK_INI" logfile="DBFPREP.LOG" password="WFJPKDCF">
       <!-- pwd: 60928 -->
    <args>
      <arg>DBFPREP.SPC</arg>
      <arg>DBFPREP.RES</arg>
      <arg>TAIATRPRE.DAT</arg>
      <arg>MODE=CONTAINER;BINDIR</arg>
    </args>
    <action>Checks database free space</action>
    <usage>Extend the database if necessary</usage>
  </phase>
  <!-- (ps 46C.39) -->
  <phase name="DBPREP_CHK" password="MVWDHMJL">
       <!-- pwd: 5514 -->
    <action>Performs DB2-z/OS specific checks</action>
  </phase>
  <phase name="ASU_CHK" logfile="ASUCHK.LOG" password="YVGUKZWN">
       <!-- pwd: 68913 -->
    <args>
      <arg>ASUCHK.XML</arg>
    </args>
    <options>
      <option name="ST_range" value="46C-*" />
      <or>
	<option name="startcomponent" value="SAP_APPL" />
	<option name="startcomponent" value="BI_CONT" />
      </or>
      <not><option name="fullprodtype" value="CRM/SOLMAN" /></not>
    </options>
    <action>Checks if ASU can be included</action>
  </phase>
  <!-- Check installed ADD-ONs and print the note in CHECKS.LOG -->
  <!-- (ps 620-6.11) -->
  <phase name="ADDON_INFO" logfile="ADDONINFO.LOG" password="IEDAJFBM">
       <!-- pwd: 40231 -->
    <action>print add-on information</action>
  </phase>
  <!-- Check installed ADD-ONs -->
  <!-- (ps 620.85) -->
  <phase name="ADDON_SPEC1" logfile="ADDONSPEC1.LOG" password="WCPMDDNE">
       <!-- pwd: 11646 -->
    <action>Requests add-on information</action>
  </phase>
  <!-- (ps 640-2.88) -->
  <phase name="ADDON_TREAS" logfile="ADDONTREAS.LOG" password="CHOKYROF">
       <!-- pwd: 81640 -->
    <options>
      <option name="ST_range" value="40B-*" />
      <option name="destcomponent" value="SAP_APPL" />
    </options>
    <action>Special actions for treasury</action>
  </phase>
  <!-- (ps 700.23) -->
  <phase name="ADDON_WFM" logfile="ADDONWFM.LOG" password="SUMNHLPW">
       <!-- pwd: 94221 -->
    <options>
      <option name="ST_range" value="620-*" />
      <option name="startcomponent" value="BBPCRM" />
    </options>
    <action>Special actions for wfmretail</action>
  </phase>
  <!-- (ps 700-2.77) -->
  <phase name="ADDON_DMC" logfile="ADDONDMC.LOG" password="EWIWUCUS">
       <!-- pwd: 9911 -->
    <options>
      <option name="ST_range" value="40B-620" />
      <option name="destcomponent" value="SAP_APPL" />
    </options>
    <action>Special actions for GSCDMC</action>
  </phase>
  <!-- (ps 710-2.37) -->
  <phase name="ADDON_CMS" logfile="ADDONCMS.LOG" password="QOIFNPTA">
       <!-- pwd: 33718 -->
    <options>
      <option name="ST_range" value="640-709" />
      <option name="proddestvers" value="710-730" />
      <option name="destcomponent" value="SAP_APPL" />
    </options>
    <action>Special actions for CMS</action>
  </phase>
  <!-- (ps 710-1.09) -->
  <phase name="ADDON_FND" logfile="ADDONFND.LOG" password="CRUUERMR">
       <!-- pwd: 34594 -->
    <options>
      <option name="ST_range" value="640-709" />
      <option name="proddestvers" value="710-*" />
      <option name="destcomponent" value="SAP_ABA" />
    </options>
    <action>Special actions for SAP_AP</action>
  </phase>
  <!-- (af 700.08) Combine upgrade and Unicode Conversion? -->
  <phase name="UCMIG_DECISION" logfile="UCMIGDEC.LOG" password="OCDEFTTC">
       <!-- pwd: 13107 -->
    <options>
      <not><option name="UNICODE_only" /></not>
      <!-- (jo) If we allow in the future in DMO to not convert to UNICODE, do not "revise" this here  -->
      <not><option name="MIGRATE_SECONDDB" /></not>
      <!-- (jo) Also allow CUUC in EhPI  -->
      <or>
        <option name="MODE" value="EXPORT" />
        <option name="SECOND_SHD"/>
      </or>
    </options>
    <action>Check for combined Upgrade and Unicode Conversion</action>
  </phase>
  <!-- (ps 700.61) -->
  <phase name="ACE_CHK" logfile="ACECHK.LOG" password="SANGVLTY">
       <!-- pwd: 63887 -->
    <options>
      <option name="ST_range" value="620-620" />
      <option name="startcomponent" value="BBPCRM(400)" />
    </options>
    <action>Special actions for CRM</action>
  </phase>
  <phase name="CRM_BILL" password="QIHMZPPY">
       <!-- pwd: 28996 -->
    <options>
      <option name="ST_range" value="610-620" />
      <option name="startcomponent" value="BBPCRM(300,310)" />
    </options>
    <action>Requests note handling</action>
  </phase>
  <phase name="PR_DBPAR" logfile="PRDBPAR.LOG" password="KVYGUBAD">
       <!-- pwd: 66191 -->
    <options>
      <option name="DBTYPE" value="ORACLE" />
    </options>
    <action>Checks Oracle parameters</action>
  </phase>
  <!-- (jo 710) Check profile parameters -->
  <phase name="CHECKPROF_INI" logfile="CHKPROF.LOG" password="YXPJGZGF">
       <!-- pwd: 55238 -->
    <args>
      <arg>ALPCHKPROF.XML</arg>
      <arg></arg>
    </args>
    <action>Checks system profiles for problems</action>
  </phase>

  <!-- (jo 720) For DB2  -->
  <phase name="DB2_CHECKNOTES_INI" password="SNNTILGL">
       <!-- pwd: 18802 -->
    <args>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB2-z/OS" />
    </options>
    <action>Checks DB2 relevant notes</action>
  </phase>
  <!-- (ps 640-2.55) (ms SP10) Moved -->
  <phase name="LC_CHECK" logfile="LCCHECK.LOG" password="IKETXFFO">
    <!-- pwd: 19932 -->
    <options>
      <option name="destcomponent" value="SCM" />
    </options>
    <action>Checks Livecache</action>
    <usage>Checks Livecache</usage>
  </phase>
</phaselist>
 </module>
 
     <module name="PREP_IMPORT" type="prepare" mandatory="yes" uniqueexec="yes" interruptable="no">
      <description>Import</description>
      <options>
        <option name="HASTOOLIMPORT" />
      </options>
      <postevent>MODULE_INIT(PREP_PARSETUP)</postevent>
      <revokemodule>REV_PRPIMPORT</revokemodule>
      <password>UMSHDHTW</password>
      <!--  pwd: 23335  -->
      <precedences>
        <precedence>PREP_INIT</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPImport.xml#59 $">
  <!-- ************************************************************ -->
  <!-- (stm 610.2.01) table space measurements -->
  <phase name="DMPSPC_INI" logfile="DMPSPC_INI.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg></arg>
      <arg>DMPSPC_INI.FRE</arg>
      <arg>DMPSPC_INI.ALL</arg>
      <arg>table space sizes at INI</arg>
    </args>
    <action>Dumps database size</action>
  </phase>
  <!-- (jo 620) Substitute old 'READDATA' phases with one* -->
  <phase name="READDATA" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <!-- (af 620.20) tocinfofile -->
    <args>
      <arg>EXPORTMISC($(SAPSTRL))</arg>
      <arg>MISCS$(SAPSTRL).TOC</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Reads start release dependent data files from the upgrade CDs</action>
  </phase>

  <!--  (jo 720) New way to patch export data  -->
  <phase name="PATCHCONT_RDATAEXT" logfile="PATCHCONTRDEXT.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>PATCHCONT.XML</arg>
      <arg>TYPE=EXPORTCOMP</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Patches export data</action>
  </phase>

  <!-- ************************************************************************** -->
  <!-- (jo 620.76) see IM 02188452 2004 (jo 700) -->
  <phase name="NEWKERNLIB_CHK1" logfile="NEWKERNLIBCHK.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg></arg>
    </args>
    <action>Checks for missing libraries to execute new kernel in old environment</action>
  </phase>
  <!-- (ps 46A) -->
  <phase name="CNV_CHK_IMP" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>I</arg>
    </args>
    <action>Finds outstanding conversions and restart logs of terminated conversions</action>
    <usage>Make conversions (after discussion with SAP consultant)if necessary</usage>
  </phase>
  <phase name="ICNVCHK_IMP" logfile="ICNVCHK.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>ICNVEX.TQL</arg>
      <arg>ICNVEX.LOG</arg>
      <arg>ICNVLIST.TQL</arg>
      <arg>ICNVLIST.LOG</arg>
      <arg>SELECT</arg>
    </args>
    <options>
      <option name="USE_ICNV" />
      <option name="ST_range" value="40A-*" />
    </options>
    <action>Checks whether incremental conversion from previous upgrade has finished</action>
    <usage>Complete incremental conversion with transaction ICNV if necessary</usage>
  </phase>
  <!-- (vd 46C.41) -->
  <phase name="SCRIPT_CHK_TOOL4" logfile="SCRIPTCHK.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>CNVTST4.XQL</arg>
      <arg>CNVTST.LOG</arg>
      <arg>FIELDNAME</arg>
      <arg>TRUE</arg>
      <arg>CLCNVTAB.XQL</arg>
      <arg>CLCNVTAB.LOG</arg>
    </args>
    <options>
      <option name="ST_range" value="40A-*" />
    </options>
    <action>Avoids critical conversions in tool import</action>
  </phase>
  <phase name="TRBATCHK_IMP" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <action>Checks whether table TRBAT is empty</action>
    <usage>Perform any actions specified by SAPup</usage>
  </phase>
  <phase name="CLNT_CHK_IMP" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>CLNTOUT.LOG</arg>
      <arg>LOCKED_CLIENT-&gt;&gt;&gt;</arg>
    </args>
    <action>Checks whether clients are locked for SAP system upgrade</action>
    <usage>Unlock clients for SAP system upgrade if necessary</usage>
  </phase>
  <phase name="INTCHK_IMP" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>NOW</arg>
    </args>
    <action>Checks whether the inactive nametab is empty</action>
  </phase>
  <phase name="SPACECHK_IMP" logfile="DBFPREP.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>DBFPREP.SPC</arg>
      <arg>DBFPREP.RES</arg>
      <arg>TAIATRPRE.DAT</arg>
      <arg>MODE=CONTAINER;BINDIR</arg>
    </args>
    <action>Checks database free space</action>
    <usage>Extend the databaseif necessary</usage>
  </phase>
  <phase name="PATCH_CHK2" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <args>
      <arg></arg>
    </args>
    <action>Finds unconfirmed Support Packages and displays the result</action>
    <usage>Call transaction SPAM to confirm any unconfirmed Support Packages if necessary</usage>
  </phase>

  <phase name="SQLDB_CLEARTOOLIMP" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>CLEAR_TOOLIMP_TABLES</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Deletes tables that describe the delivery</action>
  </phase>
  <phase name="SQLDB_CLEARPATCHES" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <args>
      <arg>CLEAR_PATCH_TABLES</arg>
      <arg></arg>
    </args>
    <action>Deletes tables that describe the delivery</action>
  </phase>

  <!-- ******************************************************************** -->
  <!-- (jo 720) Dynamic toolimport buffer generation -->
  <phase name="GENBUFFER_TOOLIMP" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>GENTOOLIMPORT.XML</arg>
      <arg>TOOLIMPD.BUF;TOOLDEL_PRE.BUF;TOOLDEL.BUF</arg>
      <arg>TYPE=TOOLIMPORT</arg>
    </args>
    <action>Generates buffer for tool import</action>
  </phase>
  <!--  Import deletion buffer if it exists  -->
  <phase name="TOOLIMP_TOOLDEL_PRE" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>TOOLDEL_PRE.BUF</arg>
      <arg>DEFAULT.TP0</arg>
      <arg></arg>
      <arg>optionalbuffer</arg>
    </args>
	<action>Deletes upgrade tools</action>
  </phase>  
  <phase name="TOOLIMPD" elgfile="TOOLIMPD.ELG" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>TOOLIMPD.BUF</arg>
      <arg>TOOLIMPD.TP0</arg>
      <arg>TOOLIMPI.BUF</arg>
      <arg>buffertest=A</arg>
    </args>
    <action>Prepares ABAP Dictionary</action>
  </phase>
  <phase name="MVNTAB_TOOL" logfile="MVNTTOOL.LOG" elgfile="MVNTTOOL.ELG" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>CHECK_MF</arg>
      <arg>*</arg>
      <arg></arg>
      <arg>MVNTTOOL.TP0</arg>
    </args>
    <action>Activates nametabs for imported tools</action>
  </phase>
  <phase name="TOOLIMPI" buffersync="true" elgfile="TOOLIMPI.ELG" password="KABYXBZW">
       <!-- pwd: 47366 -->   
    <args>
      <arg>TOOLIMPI.BUF</arg>
      <arg>TOOLIMPI.TP0</arg>
      <arg>TOOLIMPM.BUF</arg>
      <arg>buffertest=I</arg>
    </args>
    <action>Imports tools</action>
  </phase>
  <phase name="TOOLIMPM" elgfile="TOOLIMPM.ELG" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <args>
      <arg>TOOLIMPM.BUF</arg>
      <arg>TOOLIMPM.TP0</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <action>Imports tools</action>
  </phase>
  <!-- (af 700.08) Combine Upgrade and Unicode Conversion? -->
  <phase name="TOOLIMP4_UCMIG" elgfile="TOOLUCMIG.ELG" password="MVWDHMJL">
       <!-- pwd: 5514 -->   
    <args>
      <arg>TOOLUCMIG4.BUF</arg>
      <arg>TOOLUCMIG.TP0</arg>
      <arg></arg>
      <arg>buffertest=I</arg>
    </args>
    <options>
      <option name="ST_range" value="46C-46Z" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Imports tools for the combined Upgrade and Unicode Conversion</action>
  </phase>
  <!-- (ps 46C.01) neue Phase fuer die Tabellen -->
  <!-- DDTRENUPG, DDYTT und DDYTF und RELEASEMAP -->
  <!-- zu importieren -->
  <!-- (ps 46C.68) die Phase NPREPCRE behandelt nur noch -->
  <!-- TODIR und RELEASEMAP fuer alle Plattformen -->
  <phase name="NPREPCRE0" elgfile="PREPIMP.ELG" password="YVGUKZWN">
       <!-- pwd: 68913 -->   
    <args>
      <arg>PREPIMP.BUF</arg>
      <arg>PREPIMP.TP0</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Imports tables that describe the delivery from &lt;i&gt;Upgrade CD1&lt;/i&gt;</action>
  </phase>
</phaselist>
</module>

<module name="PREP_PARSETUP" type="prepare" mandatory="yes" interruptable="no">
      <description>Setup parameters for tool</description>
      <postevent>MODULE_INIT(PREP_CONFIGURATION)</postevent>
      <revokemodule>REV_PRPPARSETUP</revokemodule>
      <password>UMSHDHTW</password>
      <!--  pwd: 23335  -->
      <precedences>
        <precedence>PREP_IMPORT</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPParSetup.xml#56 $">
  <!-- ************************************************************ -->
  <!-- (jo 710) Use new coding from Christiane for this -->
  <phase name="UVERS_SAVE" logfile="PSUVSAVE.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <action>Saves old entries of table UVERS</action>
  </phase>
  <!-- (ps 640-2.01) -->
  <phase name="UVERS_PREIMP" logfile="UVERSPREIMP.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg></arg>
    </args>
    <action>Writes entry in table UVERS</action>
  </phase>
  <phase name="UVERS_INIT" logfile="UVERSINI.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg></arg>
    </args>
    <action>Writes entry in table UVERS</action>
  </phase>
  <!-- (vd 46B.04) -->
  <phase name="UVERS_CHK_IMP" logfile="UVERSCHK_IMP.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <args>
      <arg>IT</arg>
    </args>
    <action>Checks consistency of table UVERS</action>
  </phase>
  <phase name="BATCHCHK_IMP" logfile="BATCHCHK_IMP.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <action>Tests whether the background server can access the upgrade directory</action>
  </phase>
  <!-- (jo 720) Must do this first!! -->
  <phase name="SETUPGPAR_PARAMSHD" logfile="SETUPGPAR.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>CLR;SET</arg>
      <arg>ICNV_METHOD=UPG_SHD,UPGRADE_METHOD=SHADOW,UPG_RESTART=YES,UPG_RESET_POSSIBLE=YES</arg>
    </args>
    <action>Makes parameter settings for the upgrade procedure</action>
  </phase>

  <!-- ************************************************************************** -->
  <!-- (jo 720) Test features of tool import Since this also fills UPGPARAM, it must come after* SETUPGPAR_PARAMSHD! -->
  <phase name="TOOLIMP_FEATURES" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <action>Determines features of tool import</action>
  </phase>
  <!-- ************************************************************************** --> 
  <phase name="SETUPGPAR_UPG_UP" logfile="SETUPGPAR.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
    <arg>SET</arg>
    <arg>UPG_STATE=UPG_UPTIME</arg>
    </args>
    <action>Set parameter for uptime</action>
  </phase>
  <phase name="SETUPGPAR_PARAMEHP" logfile="SETUPGPAR.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <args>
      <arg>SET</arg>
      <arg>EHP_INSTALLER=YES</arg>
    </args>
    <options>
      <!--  (cv + jo 720) Must also be set for transport mode  -->
      <not><option name="MODE" value="EXPORT" /></not>
    </options>
    <action>Makes parameter settings for the EHP installer procedure</action>
  </phase>

   <!-- (jo 720) Moved here - suffices to set it once  -->
  <phase name="SETUPGPAR_PDIFFEXP" logfile="SETUPGPAR.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>SET</arg>
      <arg>PARALLEL_DIFFEXP=YES</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Sets parameters for RDDIT006</action>
  </phase>
  <phase name="SETUPGPAR_ZDM" logfile="SETUPGPAR.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>SET</arg>
      <arg>ZERODOWNTIME_UPGRADE=YES</arg>
    </args>
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
    <action>Makes parameter settings for the ZDM procedure</action>
  </phase>
  <phase name="SETUPGPAR_UPGTABART" logfile="SETUPGPAR.LOG" password="QOVSNPTA">
    <!-- pwd: 67126 -->
    <args>
      <arg>SET</arg>
      <arg>UPGTABART=SUPG</arg>
    </args>
    <options>
      <option name="feature_switch" value="use_upgtabspace" />
      <option name="DBTYPE" value="ORACLE" />
    </options>
    <action>Makes parameter settings for the UPG tabart</action>
  </phase>
  <phase name="SETUPGPAR_AIM_REPOSRC" logfile="SETUPGPAR.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>SET</arg>
      <arg>CHECK_AIM_REPOSITORY=NO</arg>
    </args>
    <options>
      <option name="ZERODOWNTIME_UPG" />
      <option name="feature_switch" value="/fa/skip_aim_repository" />
    </options>
    <action>Makes parameter settings for the ZDM procedure</action>
  </phase>
  <!-- (af 700.08) 2006/03/22 -->
  <phase name="SETUPGPAR_UCMIG" logfile="SETUPGPAR.LOG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <args>
      <arg>SET</arg>
      <arg>UCMIG_INTEGRATED=YES</arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
    </options>
    <action>Makes parameter settings for the combined upgrade and unicode conversion procedure</action>
  </phase>

  <phase name="SETUPGPAR_MIGWITHSLT" logfile="SETUPGPAR.LOG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <args>
      <arg>SET</arg>
      <arg>MIGRATE_WITHSLT=YES</arg>
    </args>
    <options>
      <option name="MIGRATE_OPTION" value="SLT" />
    </options>
    <action>Makes parameter settings for the combined upgrade and unicode conversion procedure</action>
  </phase>
  
  <!--  (jo 720) Tell RDDIT006 to generate "abap/mem/DIFFEXPCTRL.LST"  -->
  <phase name="SETUPGPAR_SINGLE_CUSTEXP" logfile="SETUPGPAR.LOG" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>SET</arg>
      <arg>SINGLE_TR_CUSTEXP=YES</arg>
    </args>
    <options>
      <option name="HASTOOLIMPFEATURE" value="DIFFEXPCTRL" />
    </options>
    <action>Set parameters for new DIFFEXP transports</action>
  </phase>

  <!--  Requested by Christiane for RUN_INDC_UPG  -->
  <phase name="SETUPGPAR_MIG2NDDB" logfile="SETUPGPAR.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>SET</arg>
      <arg>MIG2NDDB_TYPE=$(DBAEXT_2ND)</arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </phase>

  <phase name="SETUPGPAR_SHADOWCDS" logfile="SETUPGPAR.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>SET</arg>
      <arg>SHADOW_CDS_VIEWS=YES</arg>
    </args>
    <options>
      <option name="feature_switch" value="shadow_cds_views" />
    </options>
  </phase>  

  <phase name="SETUPGPAR_BWSHDIMP" logfile="SETUPGPAR.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>SET</arg>
      <arg>BW_SHD_IMPORT=YES</arg>
    </args>
    <options>
      <option name="feature_switch" value="bw_shd_import" />
    </options>
  </phase>  

  <!-- ************************************************************************** --> 
  <!-- (af 700.08) Combine upgrade and Unicode Conversion? -->
  <!-- Status: "initialized" -->
  <phase name="UCMIG_STATUS_SET0" logfile="UCMIGSETSTAT0.LOG" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>0</arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
    </options>
    <action>Set status for combined Upgrade and Unicode Conversion</action>
  </phase>

  <submodule password="KRGCCBGT">
    <options>
      <not><option name="MODE" value="EXPORT" /></not>
      <option name="feature_switch" value="/dev/implement_toolnotes" />
    </options>
    <phaselist>
      <phase name="CHECK4NOTES_READTOOL" password="KABYXBZW">
        <!-- pwd: 47366 -->
        <args>
          <arg>READTOOL</arg>
          <arg>EHPINOTES.XML</arg>
        </args>
        <action>Reads EHPINOTES.XML for ZUGP_SAMPLE_CALL</action>
      </phase>

      <!--  (jo 720) Requested by Levke  -->
      <phase name="RUN_ZUPGSAMPLECALL" autorepeat="2" logfile="ZUPGSAMPLECALL.LOG" elgfile="ZUPGSAMPLECALL.ELG" password="WJOGCDWP">
        <!-- pwd: 18134 -->
        <args>
          <arg>ZUPG_SAMPLE_CALL</arg>
          <arg>ZUPG_IMPLEMENT_NOTES=SAP_IMPLEMENT_NOTES(LIST=@(DEF:(NOTE),$(NOTES2IMPLEMENT)))</arg>
          <arg>NO-IGNORE</arg>
          <arg>ZUPG_SAMPLE_CALL\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Implements missing notes</arg>
        </args>
        <action>Implements missing notes</action>
        <options>
          <not><option name="condition" value="'$(NOTES2IMPLEMENT)' == ''" /></not>
        </options>
      </phase>
    </phaselist>
  </submodule>
  
  <phase name="CHECK4NOTES_TOOL" password="KABYXBZW">
       <!-- pwd: 47366 -->   
    <args>
      <arg>TOOL</arg>
      <arg>EHPINOTES.XML</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /></not>
    </options>
    <action>Checks for note corrections required by tool</action>
  </phase>

  <!--  (ag sp12) Requested by ak -->
  <phase name="SPAU_FILL_LEVEL_DEC" logfile="SPAUVALVE.LOG" password="AMBAVVVE">
    <!-- pwd: 12335 -->
    <args>
      <arg>UPGSPAUSTATSUM.$(SAPSID)</arg>
    </args>
    <action>Checks open actions in transaction SPDD and SPAU from former upgrades or support package implementations</action>
  </phase>

  <!--  (ag sp12) Requested by ak -->
  <phase name="RUN_AUTO_ADJ_SPAU" logfile="SPAUADJAUTO.LOG" password="IIVEBFVW">
    <!-- pwd: 66178 -->
    <args>
      <arg>RSUPG_AUTO_ADJ_SPAU</arg>
      <arg>SAP_AUTO_ADJ</arg>
      <arg>IGNORE</arg>
      <arg>UPGSPAUADJUST\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Automatically reset objects if no longer with active modifications</arg>
    </args>
    <options>
      <option name="SPAU_VALVE" />
    </options>
    <action>Automatically reset objects if no longer with active modifications</action>
  </phase>
</phaselist>
 </module>

 
 <module name="PREP_CONFIGURATION" type="prepare" mandatory="yes" checkmode="yes">
      <description>Configuration and language selection</description>
      <postevent>MODULE_INIT(PREP_SETUP)</postevent>
      <revokemodule>REV_PRPCONFIGURATION</revokemodule>
      <password>GVSCIJQP</password>
      <!--  pwd: 98637  -->
      <precedences>
        <precedence>PREP_PARSETUP</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPConfiguration.xml#66 $">
  <!-- ************************************************************ -->
  <!-- Configuration -->
  <!-- ************************************************************ -->
  <!-- moved here to get all the informations in the very beginning -->
  <phase name="INITSUBST" logfile="INITSUBST.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>UpgConfig.xml</arg>
      <arg></arg>
    </args>
    <action>Initializes for System Switch Upgrade</action>
    <usage>Enter parameters</usage>
  </phase>
  <!-- init parameters for tool configuration -->
  <phase name="SETUPGPAR_INITSUBST" logfile="SETUPGPAR.LOG" password="OCDEFTTC">
       <!-- pwd: 13107 -->
    <args>
      <arg>DEL</arg>
      <arg>ITERATIVE_UPGRADE,FASTDATACOPY,FDC_VALIDATE,FDC_SEGMENTSIZE,STRESS_MAKER,STRESS_CONFIG_ID</arg>
    </args>
    <action>Initialize parameters for tool configuration</action>
  </phase>
  <phase name="SETUPGPAR_ITERATIVE" logfile="SETUPGPAR.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg>SET</arg>
      <arg>ITERATIVE_UPGRADE=YES</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
    <action>Makes parameter settings for the nZDM procedure</action>
  </phase>

  <phase name="SETUPGPAR_PARAMTRANSPORT" logfile="SETUPGPAR.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>SET</arg>
      <arg>TRANSPORTMODE=YES</arg>
    </args>
    <options>
      <not><option name="HASSHADOW" /></not>
    </options>
    <action>Makes parameter settings for the transport mode</action>
  </phase>

  <phase name="SETUPGPAR_FASTDATACOPY" logfile="SETUPGPAR.LOG" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <args>
      <arg>SET</arg>
      <arg>FASTDATACOPY=YES</arg>
    </args>
    <options>
      <option name="FASTDATACOPY" />
    </options>
    <action>Makes parameter settings for the fast data copy</action>
  </phase>
  <phase name="SETUPGPAR_FDCABAPTRANS" logfile="SETUPGPAR.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>SET</arg>
      <arg>FORCE_FDC_ABAP_TRANSFER=YES</arg>
    </args>
    <options>
      <option name="FASTDATACOPY" />
      <option name="feature_switch" value="force_fdc_abap_transfer" />
	</options>
    <action>Makes parameter settings for FDC Validation</action>
  </phase>
  <phase name="SETUPGPAR_FDCVALIDATE" logfile="SETUPGPAR.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>SET</arg>
      <arg>FDC_VALIDATE=ON</arg>
    </args>
    <options>
      <option name="FASTDATACOPY" />
       <or>
        <option name="feature_switch" value="/dev/fdc_validate" />
        <option name="feature_switch" value="/fa/fdc_validate" />
      </or>
    </options>
    <action>Makes parameter settings for FDC Validation</action>
  </phase>
  <phase name="SETUPGPAR_FDCSEGMENTSIZE" logfile="SETUPGPAR.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>SET</arg>
      <arg>FDC_SEGMENTSIZE=$(FDCSEGMENTSIZE)</arg>
    </args>
    <options>
      <option name="FASTDATACOPY" />
       <or>
        <option name="feature_switch" value="/dev/fdc_validate" />
        <option name="feature_switch" value="/fa/fdc_validate" />
      </or>
    </options>
    <action>Makes parameter settings for the FDC segment size</action>
  </phase>

    <phase name="TOOLCHECKXML_CONFIG" logfile="auto" password="YLAKEZYB">
        <!-- pwd: 80490 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>ToolChkCFG.xml</arg>
            <arg /> <!-- Tool Filter -->
            <arg /> <!-- Options -->
        </args>
        <options>
        </options>
        <action>Determines and checks the tool version with regards to the chosen configuration</action>
        <usage>Upgrade tools if necessary</usage>
    </phase>


  <phase name="MODFILE_CRRTABLIST" logfile="auto" password="YLAKEZYB">
       <!-- pwd: 80490 -->
    <args>
      <arg>SRC=BIN;DEST=MEM</arg>
      <arg>CRRTABLIST.LST</arg>
    </args>
    <action>Exclude tables from nZDM procedure</action>
    <options>
       <option name="ITERATIVE_UPG" />
    </options>
  </phase>
  <phase name="SETUPGPAR_STRESSMAKER" logfile="SETUPGPAR.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>SET</arg>
      <arg>STRESS_MAKER=YES</arg>
    </args>
    <options>
	  <or>
        <option name="ITERATIVE_UPG" />
        <option name="ZERODOWNTIME_UPG" />
	    <option name="MIGRATE_OPTION" value="SLT" />
	  </or>
      <option name="feature_switch" value="/fa/stress_maker" />
    </options>
    <action>Switch for special ISU handling in RSCPINTS, RSCPINC and RSUPGREV</action>
  </phase>
   <phase name="SETUPGPAR_STRESSMAKERCLASS" logfile="SETUPGPAR.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>SET</arg>
	  <arg>STRESS_CONFIG_ID=$ENVVAL(STRESS_CONFIG_ID)</arg>
    </args>
    <options>
	 <option name="feature_switch" value="/fa/stress_maker" />
    </options>
    <action>Overwrites the StressConfigID Class for new Stressmaker</action>
  </phase>
  <!--  (jo 720) Ask for kernel changes  -->
  <phase name="ASKSWITCHES" logfile="ASKSWITCHES.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg></arg>
    </args>
    <action>Ask for system/kernel adaptions</action>
  </phase>
  <!-- (ag 703) we can introduce nuc/uc if welcome, just ask the user -->
  <phase name="DIR_SWITCH_ASK" logfile="DIRSWITCHA.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg></arg>
      <arg>ASK</arg>
    </args>
    <action>Asks the user per instance if nuc/uc structures shall be introduced</action>
  </phase>

  <!-- (mg 721) Extract CLI after SAPCPE decision for DB2 -->
  <phase name="DBQUERY_CONV" password="WFJPKDCF">
       <!-- pwd: 60928 -->
    <args>
      <arg>CONV</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB2-z/OS" />
      <option name="ST_range" value="700-703" />
      <option name="proddestvers" value="*-703" />
    </options>
    <action>Perform database dependent actions</action>
    <usage>Perform database dependent actions</usage>
  </phase>

  <!-- ********************************************************************************************** -->
  <!--  (ag SP09) Determines the migration mode (BW or ERP)  -->
  <phase name="DETBWMODE" logfile="DETBWMODE.LOG" password="WJOGCDWP">
    <!-- pwd: 18134 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="ST_range" value="700-*" />
    </options>
    <action>Determines BW system</action>
  </phase>

  <phase name="SETUPGPAR_BWTASKS" logfile="SETUPGPAR.LOG" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <args>
      <arg>SET</arg>
      <arg>BWTASKS=YES</arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="MIGRATE_OPTION" value="BWTASKS" />
    </options>
    <action>Makes parameter settings for BWTasks</action>
  </phase>

  <!--  We need the client always to be able to do "R3load -V"  -->
  <submoduleref name="SUBMOD_MIG_INSTCLIENT" password="WPCMQDAR">
    <!-- pwd: 89806 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </submoduleref>

  <submoduleref name="SUBMOD_MIG_GETKRNL" password="WPCMQDAR">
    <!-- pwd: 89806 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </submoduleref>

  <submoduleref name="SUBMOD_MIG_CONFIG" password="WPCMQDAR">
    <!-- pwd: 89806 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
    </options>
  </submoduleref>

  <!--  (jo) This has to come *after* SUBMOD_MIG_INSTCLIENT since we cannot
	call "R3load -V" without the client.

	We also do this in serial mode since we need to call "exe_2nd/R3load -ctf"
	even on the export machine!
    -->
  <submoduleref name="SUBMOD_MIG_CHKKRNL" password="WPCMQDAR">
    <!-- pwd: 89806 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </submoduleref>

  <submoduleref name="SUBMOD_MIG_CHKCONNECT" password="WPCMQDAR">
    <!-- pwd: 89806 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
    </options>
  </submoduleref>

  <!-- ********************************************************************************************** -->
  <!--  (jo 720) Former APPLSERV_CHK phase integrated  -->
  <phase name="EXTRACTKRN_DIAG" logfile="EXTRKRNDIAG.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>DIAGKERNEL</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Extracts kernel for dialog instances</action>
  </phase>
  <phase name="KX_CPYORG_DIAG" logfile="KX_CPYORGDIAG.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <args>
      <arg>ToolVersXML</arg>
      <arg>DIAGKERNEL</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
    <action>Copies kernels for dialog instances</action>
  </phase>
  <phase name="SCANDIR_KRNLDIAG" logfile="SCANDIRXD.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->
    <args>
      <arg>SCAN;COLLKRNL_DIAG;EXTRKRNL_DIAG</arg>
    </args>
    <action>Extracts new dialog kernels from download directory</action>
  </phase>
  <!-- ********************************************************************************************** -->
  <phase name="INSTANCELIST_INFO" logfile="INSTANCELIST_INFO.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
      <arg>INFO</arg>
    </args>
    <action>Dumps the system instance list info to checks.log</action>
  </phase>
  <!-- (mh 620/4-22) phases for toolfix shifted to module IMPORT -->
  <!-- (mh 620/4-16) JOB->RUN phase -->
  <phase name="RUN_RSTODIRM_CLEAN" logfile="RSTODIRM.LOG" elgfile="RSTODIRM.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>RSTODIRM</arg>
      <arg>SAP_CLEAN</arg>
      <arg>IGNORE</arg>
      <arg>RSTODIRM\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>TODIR-CLEAN</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Check delivery catalog for inconsistencies</action>
  </phase>
  <!-- (hk 720) -->
  <phase name="NANOTES_PREP" logfile="NANOTESPREP.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->
    <args>
      <arg>PREP</arg>
      <arg>NANOTES.LST</arg>
      <arg></arg>
    </args>
    <options>
      <option name="proddestvers" value="720-*" />
    </options>
    <action>Implement notes via call of Note Assistant</action>
  </phase>
  <!-- (af 620) moved up language phases -->
  <phase name="LANG_CHK" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>LANGOUT.LOG</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks whether the new release supports the installed languages</action>
    <usage>Delay upgrade until next releaseif necessary</usage>
  </phase>
  <phase name="LANG_SELECT" logfile="LANGSEL.LOG" elgfile="LANGSEL.ELG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>LANGSEL.TP0</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Copies data for the language import into the upgrade directory</action>
  </phase>
  <!-- (mh 620.11.53) -->
  <phase name="RUN_RSUPGSLI" logfile="RSUPGSLI.LOG" elgfile="RSUPGSLI.ELG" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <args>
      <arg>RSUPGSLI</arg>
      <arg>SAP_CFGSLI</arg>
      <arg>IGNORE</arg>
      <arg>RSUPGSLI\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>Configure selective-language-import option</arg>
    </args>
    <action>Configures the selective-language-import option</action>
  </phase>
</phaselist>
</module>

<module name="PREP_SETUP" type="prepare" mandatory="yes">
      <description>Setup control data</description>
      <postevent>MODULE_INIT(PREP_EXTENSION)</postevent>
      <revokemodule>REV_PRPSETUP</revokemodule>
      <password>UMSHDHTW</password>
      <!--  pwd: 23335  -->
      <precedences>
        <precedence>PREP_CONFIGURATION</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPSetup.xml#27 $">
  <!--  Import of Internal Tools (incl. ISU stress maker import) *after* INITSUBST to have the decision ready!  -->
  <submodule password="KRGCCBGT">
    <options>
      <or>
        <and>
          <or>
	<!-- LB Stressmaker should run when iterative OR zerodowntime is active-->		  
            <option name="ITERATIVE_UPG" /> 
            <option name="ZERODOWNTIME_UPG" /> 	  
          </or>
          <option name="feature_switch" value="/fa/stress_maker" />
        </and>
        <option name="feature_switch" value="/fa/upgint" />
      </or>
    </options>
    <phaselist>
      <phase name="GENBUFFER_INTERNALTOOLS" password="EWIWUCUS">
	<!-- pwd: 9911 -->
        <args>
          <arg>GENINTERNALTOOLS.XML</arg>
          <arg>INTERNALTOOLS.BUF</arg>
          <arg></arg>
        </args>
      </phase>
      <phase name="TOOLIMP_INTERNALTOOLS" buffersync="true" elgfile="TOOLIMP.ELG" password="QOIFNPTA">
	<!-- pwd: 33718 -->
        <args>
          <arg>INTERNALTOOLS.BUF</arg>
          <arg>TOOLIMPALL.TP0</arg>
          <arg></arg>
          <arg></arg>
        </args>
      </phase>
    </phaselist>
  </submodule>
  <!-- WH11: Create the Clones of PUTTB_SHD for Startrelease 46C and 2nd Shadow  -->
  <!-- They have to be generated since their name exceeds the old SAP_BASIS limitation -->
  <phase name="JOB_RSCREATE_PUTTBS" logfile="PRSCREATE_PUTTBS.LOG" elgfile="PRSCREATE_PUTTBS.ELG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>RSCREATE_PUTTBS</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSCREATE_PUTTBS\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Generates Clones of PUTTB_SHD</arg>
    </args>
    <options>
      <option name="ST_range" value="*-46Z" />
      <option name="realdestvers" value="731-*" />
    </options>
    <action>Generates Clones of PUTTB_SHD</action>
  </phase>
  <!-- run report RS_GENERATE_PUTTB_SHD to fill PUTTB_SHD with initial data -->
  <phase name="RUN_GENPUTTBSHD" logfile="GENPUTTBSHD.LOG" elgfile="GENPUTTBSHD.ELG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>RS_GENERATE_PUTTB_SHD</arg>
      <arg>SAP_TMPLOG</arg>
      <arg>NO-IGNORE</arg>
      <arg>RS_GENERATE_PUTTB_SHD\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>PUTTB_SHD generation</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Initial fill of PUTTB_SHD table</action>
  </phase>
  <!-- run report RSCPINTS to complete PUTTB_SHD -->
  <phase name="RUN_RSCPINTS_INITPUTTB" logfile="RSCPINITPUTTB.LOG" elgfile="RSCPINITPUTTB.ELG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>RSCPINTS</arg>
      <arg>SAP_INITPUTTB</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSCPINITPUTTB\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>PUTTB_SHD additional generation</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Additional fill of PUTTB_SHD table</action>
  </phase>
  <!-- (vd 46C.02) needed by SHADOW_CAND_SEL -->
  <!-- (gr 46C.04) needs different variant (create original exchange names) -->
  <!-- (cv 731.02) move this phase before PUTTB_SHD-reading -->
  <!-- (cv 740) move this phase before RSPTBFIL, not possible as PUTTB is not filled -->
  <!--          phase needs to run always as RSPTBFIL uses includes RSTABINC -->
  <phase name="RUN_RSINCGEN_IMP" logfile="PSINCGEN.LOG" elgfile="PSINCGEN.ELG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>RSINCGEN</arg>
      <arg>SAP_PRE_RSINCL</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSINCGEN\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PRE INCLUDE GENERATION</arg>
    </args>
    <action>Adapts ABAP include RSTABINC to the system</action>
    <options>
      <option name="HASSHADOW" />
    </options>
   </phase>

  <phase name="RUN_RSPTBFIL_PREP" logfile="auto" elgfile="auto" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_PRP_PUTTB=SAP_RSPTBFIL(ACTION=PRP_PUTTB,LOGFILE=RSPTBPTB.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBPTB\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>PUTTB initial filling</arg>
    </args>
    <action>Creates PUTTB and PUTTB_SHD tables</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  
  <!-- read PUTTB and store in file CONPUTTB.DAT -->
  <phase name="READPUTTB_INI" logfile="RDPUTTB.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  
  <!-- (bm) Create the Unicode NTs DDNTT_CONV_UC and DDNTF_CONV_UC in 4.6C system  -->
  <phase name="RUN_RADCUCNT_DMOPREP" logfile="RADCUCNTDMOPREP.LOG" elgfile="RADCUCNTDMOPREP.ELG" password="ADGEAVCB">
       <!-- pwd: 64513 -->
    <args>
      <arg>RADCUCNTUPG</arg>
      <arg>SAP_DMO_PREP</arg>
      <arg>IGNORE</arg>
      <arg>RADCUCNTDMOPREP\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Creates Unicode NTs</arg>
    </args>
    <options>
      <option name="ST_range" value="46C-46Z" />
      <option name="MODE" value="EXPORT" />
      <option name="UCMIG_INTEGRATED" />
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Creates the Unicode NTs in 4.6C system</action>
  </phase>

  <phase name="JOB_RDDGENRS" logfile="RDDGENRS.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>RDDGENRS</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>GENERATE REPORTS</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Generates tool reports</action>
  </phase>
  <!-- insert the transports of Upgrade (in INSTIMP.BUF) to the store -->
  <phase name="TR_BUF2HEAP_INSTIMP" logfile="TRB2H.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>INSTIMP.BUF</arg>
      <arg>TR_UPGRADE</arg>
      <arg></arg>
      <arg>TPSHBUF.LOG</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Moves upgrade requests from the INSTIMP.BUF buffer to the SAPup buffer</action>
  </phase>

  <!-- (mh 620-3.01) write COMPONENT_UPGRADE=YES into UPGPARAM -->
  <phase name="SETUPGPAR_PARAMCOMP" logfile="SETUPGPAR.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <args>
      <arg>SET</arg>
      <arg>COMPONENT_UPGRADE=YES</arg>
    </args>
    <action>Makes parameter settings for the component upgrade procedure</action>
  </phase>
  <!-- (ms SP7) Communicate number of batch processes -->
  <phase name="SETUPGPAR_BATCHUT_PROCS" logfile="SETUPGPAR.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>SET</arg>
      <arg>BATCHUT_PROCS=$NRPARPROCS(BATCH,UPTIME)</arg>
    </args>
    <action>Exposes number of parallel batch processes for better load balancing</action>
  </phase>
  <phase name="SETUPGPAR_BATCHDT_PROCS" logfile="SETUPGPAR.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>SET</arg>
      <arg>BATCHDT_PROCS=$NRPARPROCS(BATCH,DOWNTIME)</arg>
    </args>
    <action>Exposes number of parallel batch processes for better load balancing</action>
  </phase>

  <!--  Requested by Christiane  -->
  <phase name="SETUPGPAR_DBVERS_2ND" logfile="SETUPGPAR.LOG" password="YAWZNZVG">
    <!-- pwd: 79932 -->
    <args>
      <arg>SET</arg>
      <arg>MIG2ND_DBVERS=$(DBVERS_2ND)</arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Exposes version if target database</action>
  </phase>
  
  <!-- (mh 6.20/4-19) Report RDDPURI2 for correction UUIDs in DDNTT running always -->
  <phase name="JOB_RDDPURI2" logfile="PDDPURI2.LOG" elgfile="PDDPURI2.ELG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>RDDPURI2</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RDDPURI2\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>DDIC-CLEANING</arg>
    </args>
    <action>Does various cleanups</action>
  </phase>
  <!-- (jo 710) Clean up old status table from RSINDCHK + RSINDCRE to make RESET work properly -->
  <phase name="SQLDB_CLEANINDCRE" logfile="CLEANINDCRE.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <args>
      <arg>CLEANINDCRE</arg>
      <arg></arg>
    </args>
    <action>Cleans up control tables for asynchronous index creation</action>
  </phase>
  <phase name="MSSMETA" logfile="MSSMETA.LOG" elgfile="MSSMETA.ELG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <!-- do only run this phase for start rel 700 if SP < 16 -->
    <args>
      <arg>metadata_mss.SAP</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
      <option name="DBTYPE" value="MSSQL" />
      <option name="startcomponent" value="SAP_BASIS(700(1-15))" />
    </options>
    <action>import cl_sql_metadata_mss to correct broken snote correction history</action>
  </phase>
  <!-- (hk 720) Upgrade saphostcontrol -->
  <phase name="UPD_HOSTAGENT" logfile="UPDHOSTAGENT.LOG" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>UPDHOSTAGENT_RUN.LOG</arg>
    </args>
    <action>Upgrade the SAPHOSTAGENT</action>
  </phase>

  <!--  (jo) Need this to make option "HOSTCHANGED" work in coming phases that logs phaselist (INITTOOL_PHL)  -->
  <phase name="HOSTCHANGE_SAVEORIG" logfile="HOSTCHANGESAVE.LOG" password="SUMNHLPW">
    <!-- pwd: 94221 -->
    <args>
      <arg>SAVE_HOSTNAME</arg>
    </args>
  </phase>
</phaselist>
</module>

<module name="PREP_EXTENSION" type="prepare" mandatory="yes" checkmode="yes">
      <description>Extension module</description>
      <postevent>MODULE_INIT(PREP_INTEGRATION)</postevent>
      <revokemodule>REV_PRPEXTENSION</revokemodule>
      <password>WJOGCDWP</password>
      <!--  pwd: 51182  -->
      <precedences>
        <precedence>PREP_SETUP</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPExtension.xml#78 $">
  <!-- ************************************************************ -->
  <!-- Extension submodule -->
  <!-- ************************************************************ -->
  <!-- (cv 700.11) initialize NAVERS and NCVERS -->
  <phase name="JOB_RSUPGINIT" logfile="PSUPGINIT.LOG" elgfile="PSUPGINIT.ELG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>RSUPGINIT</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGINIT\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>INITIALIZE NCVERS/NAVERS</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
    <action>Initializes NAVERS and NCVERS</action>
  </phase>
  <phase name="NCVERS_READ" logfile="NCVERSOUT.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <action>Determines components contained in the delivery</action>
  </phase>

  <phase name="UPLOAD_FIRST" logfile="UPLOADFIRST.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <action>retrieve packages from the dvd</action>
    <usage>early packageupload for ACP for relcompchange info</usage>
  </phase>
  <!-- (af 620.20) get component info regarding export information -->
  <phase name="COMPINFO_EXP" logfile="COMPINFOEXP.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <!-- SPDA callgetRelcompchgreadAvers -->
    <args>
      <arg></arg>
    </args>
    <action>Get the component information concerning export components</action>
  </phase>
  <phase name="UPLOAD_REQUEST" logfile="UPLOADREQ.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <action>Prompts you to retrieve packages</action>
    <usage>Retrieve packages that are required if necessary</usage>
  </phase>
  <phase name="SELSTACKXML_READ" logfile="SELSTACKXMLR.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>SPDA_SELSTACKXML.LOG</arg>
      <arg>READ;CHECK_INITIAL;MERGE_EXPORT;CHECK_CHANGEDCOMPS;SHOW</arg>
    </args>
    <action>Read stack file and prints it to CHECKS.LOG</action>
  </phase>  
  <!-- Determines installed ADD-ONs -->
  <!-- Check Version of IS_MOVES.LST -->
  <!-- (ps 620.02) -->
  <phase name="IS_MV_CHK1" logfile="ISMVCHK1.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>PRE</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks version of IS_MOVES.LST file</action>
  </phase>
  <!-- (af 700.02) -->
  <phase name="NAVERS_READ" logfile="NAVERSOUT.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <action>Initializes NAVERS from delivered and customer addon components</action>
  </phase>
  <submodule password="KRGCCBGT">
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
    <phaselist>
      <!-- SQL commands for PI_BASIS in SAPehpi -->
      <phase name="SQLDB_AVERS_PIBASIS" logfile="AVERSPIB.LOG" password="QWFAXPHU">
     <!-- pwd: 97943 -->   
  <args>
    <arg>AVERS_PIBASIS</arg>
    <arg></arg>
  </args>
  <action>changes (n)avers_ext for PI_BASIS handling for SAPehpi</action>
      </phase>
      <!-- update of (N)AVERS_EXT UPG_TYPE according to product type via TQL -->
      <phase name="UPG_TYPE" logfile="UPG_TYPE.LOG" password="SJVPQLMB">
     <!-- pwd: 97353 -->   
  <args>
    <arg>UPG_TYPE.SAP</arg>
  </args>
  <action>update UPG_TYPE in (N)AVERS_EXT for SAPehpi if neccessary</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (af 700.02) -->
  <phase name="IS_INIT" logfile="IS_INIT.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>ADDONINIT.DMP</arg>
    </args>
    <action>Initialize for IS phases</action>
  </phase>
  <!-- (af 700.02) Fake BI_CONT installation -->
  <phase name="IS_INST_BICONT" logfile="IS_INST_BICONT.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <!-- addon idaddon rlinstallation list -->
    <args>
      <arg>BI_CONT</arg>
      <arg>330</arg>
      <arg></arg>
      <arg>NAVERSINST_BICONT.DMP</arg>
    </args>
    <options>
      <option name="ST_range" value="*-620" />
      <option name="startcomponent" value="SAP_BW" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Fake BI_CONT installation</action>
  </phase>
  <!-- (af 700.02) Fake Addon installation from list -->
  <phase name="IS_INST_LIST" logfile="IS_INST_LIST.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <!-- addon idaddon rlinstallation list -->
    <args>
      <arg></arg>
      <arg></arg>
      <arg>ISINST.LST</arg>
      <arg>NAVERSINST_LIST.DMP</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Fake addon Installations from list (if needed)</action>
  </phase>
  <!-- Determines what ADD-ONs have to be integrated -->
  <phase name="IS_INST" logfile="IS_INST.LOG" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <!-- addon idaddon rlinstallation list -->
    <args>
      <arg></arg>
      <arg></arg>
      <arg></arg>
      <arg>NAVERSINST.DMP</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/inst" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Asks for addon to be installed</action>
  </phase>
  <!-- (af 700.02) get component info -->
  <phase name="COMPINFO_ISINST" logfile="COMPINFOISINST.LOG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <!-- SPDA callgetRelcompchgreadAvers -->
    <args>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/inst" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Get the component information after the addon installation decision</action>
  </phase>
  <phase name="ADDON_TRBK" logfile="ADDONTRBK.LOG" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Special actions for BANK_TRBK</action>
  </phase>
  <!-- (jo 720) Moved before IS_MOVEMENT and after SELSTACKXML -->
  <!-- (ps 710-2.43) -->
  <phase name="ADDON_DYN" logfile="ADDONDYN.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <!-- (jo 720) See 2640365 2009 - Option EHP_WITH_NEWRELEASE not yet known!addon_dyn shall only run in case 700 goes to 701 -->
    <args>
      <arg>AddonDYN.xml</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
      <option name="startcomponent" value="SAP_BASIS(700)" />
    </options>
    <action>Special actions for optional components</action>
  </phase>
  <!-- (jo 720) Separated from ADDON_DYN -->
  <phase name="CHECK4SOLMAN_EHP1" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>EHP1</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="fullprodtype" value="CRM/SOLMAN" />
    </options>
    <action>Checks for EHP 1 for Solman to be done via SAINT</action>
  </phase>
  <!-- (ps + tw + jo) IS_MOVEMEMENT must come before EHP_INCLUSION !!! -->
  <!-- (af 700.02) -->
  <phase name="IS_MOVEMENT" logfile="IS_MOVEMENT.LOG" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>IS_MOVES.LST</arg>
      <arg>ADDONISMOVES.DMP</arg>
      <arg>NAVERSISMOVES.DMP</arg>
    </args>
    <action>Determine/decide Add-on movements</action>
  </phase>
  <!-- (af 700.02) get component info -->
  <phase name="COMPINFO_ISMV" logfile="COMPINFOISMV.LOG" password="KABYXBZW">
       <!-- pwd: 47366 -->   
    <!-- SPDA callgetRelcompchgreadAvers -->
    <args>
      <arg></arg>
    </args>
    <action>Get the component information after the addon movements</action>
  </phase>
  <!-- (af 700.02) -->
  <phase name="SFW_MOVEMENT" logfile="SFW_MOVEMENT.LOG" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <args>
      <arg>SFW_MOVES.LST</arg>
      <arg>ADDONSFWMOVES.DMP</arg>
      <arg>NAVERSSFWMOVES.DMP</arg>
    </args>
    <options>
      <option name="SFW_only" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>SFW Addon Movements</action>
  </phase>
  <!-- (af 700.02) get component info -->
  <phase name="COMPINFO_SFWMV" logfile="COMPINFOSFWMV.LOG" password="MVWDHMJL">
       <!-- pwd: 5514 -->   
    <!-- SPDA callgetRelcompchgreadAvers -->
    <args>
      <arg></arg>
    </args>
    <options>
      <option name="SFW_only" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Get the component information after the sfw movements</action>
  </phase>
  <!-- (af 700) IS-OIL decision -->
  <!-- must run before RSUPGSFW! -->
  <phase name="ADDONSPEC_OIL" logfile="ADDONSPEC_OIL.LOG" password="YVGUKZWN">
       <!-- pwd: 68913 -->   
    <args>
      <arg>ISOIL_DECISION_700</arg>
    </args>
    <options>
      <option name="SFW_only" />
      <option name="ST_range" value="*-640" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Special actions for IS_OIL</action>
  </phase>
  <!-- (af 700) IS-PS-CA decision -->
  <!-- must run before RSUPGSFW! -->
  <phase name="ADDONSPEC_ISPSCA" logfile="ADDONSPEC_ISPSCA.LOG" password="IEDAJFBM">
       <!-- pwd: 40231 -->   
    <args>
      <arg>ISPSCA_DECISION_700</arg>
    </args>
    <options>
      <option name="SFW_only" />
      <option name="ST_range" value="*-640" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Special actions for IS_PS-CA</action>
  </phase>
  <!-- (af 700.06) SFW (must run before the BIND_PATCH phase) -->
  <phase name="RUN_RSUPGSFW" logfile="RSUPGSFW.LOG" elgfile="RSUPGSFW.ELG" password="WCPMDDNE">
       <!-- pwd: 11646 -->   
    <args>
      <arg>RSUPGSFW</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGSFW\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>SFW: Determine active BF(S) according to installed Addons</arg>
    </args>
    <options>
      <option name="SFW_only" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>SFW only: Determines active BF(S) according to installed Addons</action>
  </phase>
  <!-- (jo 710) Moved up to come before* SPSTACK_REQUEST -->
  <!-- (af 700.11) -->
  <phase name="IS_TABDMP_EHP" logfile="IS_TABDMP_EHP.LOG" password="CHOKYROF">
       <!-- pwd: 81640 -->   
    <!-- dump gpv_addon_table to gpv_addon_ehpres_filedump gpv_navers_table to gpv_navers_ehpres_filedump gpv_compinfo_table -->
    <args>
      <arg>ADDONEHPRES.DMP</arg>
      <arg>NAVERSEHPRES.DMP</arg>
      <arg>COMPINFOEHPRES.DMP</arg>
    </args>
    <action>Dump addon tables to file</action>
  </phase>
  <!-- (jo 710) Only used in ByDesign, but might become handy -->
  <phase name="SCANDIR_EPS" logfile="SCANDIRE.LOG" password="SUMNHLPW">
       <!-- pwd: 94221 -->   
    <args>
      <arg>SCAN;DETERMINE_ACTION;EXTRACTEPS</arg>
    </args>
    <action>Checks again for EPS/in relevant packages and generates stack XML if requested</action>
  </phase>
  <!-- (af 700.11) -->
  <phase name="EHP_INCLUSION" logfile="EHP_INCLUSION.LOG" elgfile="EHP_INCLUSION.ELG" password="EWIWUCUS">
       <!-- pwd: 9911 -->   
    <args>
      <arg>ADDONEHP.DMP</arg>
      <arg>NAVERSEHP.DMP</arg>
      <arg>SPDA_EHP_INCLUSION.LOG</arg>
      <arg></arg>
    </args>
    <action>Enhancement Packages Inclusion</action>
    <usage>Include Enhancement Package</usage>
  </phase>
  <!-- determine if mobile is used  -->
  <phase name="JOB_MOBILE1" logfile="MOBILE1.LOG" elgfile="MOBILE1.ELG" password="QOIFNPTA">
       <!-- pwd: 33718 -->   
    <args>
      <arg>SDOE_IS_MOBILE_USED_PHASE1</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>SDOE_IS_MOBILE_USED_PHASE1\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Determine Mobile Usage</arg>
    </args>
    <options>
        <option name="realdestvers" value="731-*" />
        <option name="ST_range" value="710-730" />
    </options>
    <action>Determines if mobile functionality was used</action>
  </phase>
  <!-- (af 700.11) -->
  <phase name="COMPINFO_EHP" logfile="COMPINFOEHP.LOG" password="CRUUERMR">
       <!-- pwd: 34594 -->   
    <!-- SPDA callgetRelcompchgreadAvers -->
    <args>
      <arg>READ_AVERS</arg>
    </args>
    <action>Get the component information after the EhP inclusion</action>
  </phase>
  <!-- (af 700.03) -->
  <phase name="IS_TABDMP_INC" logfile="IS_TABDMP_INC.LOG" password="OCDEFTTC">
       <!-- pwd: 13107 -->   
    <!-- dump gpv_addon_table to gpv_addon_incres_filedump gpv_navers_table to gpv_navers_incres_file(af 700.11) -->
    <args>
      <arg>ADDONINCRES.DMP</arg>
      <arg>NAVERSINCRES.DMP</arg>
      <arg></arg>
    </args>
    <action>Dump addon tables to file</action>
  </phase>
  <!-- Must be after ehp_inclusion updated ncvers -->
    <phase name="ADDONSEPARATION" logfile="ADDONSEP.LOG" password="SANGVLTY">
         <!-- pwd: 63887 -->   
      <!-- for addons that move out of components or get deleted -->
      <options>
        <option name="realdestvers" value="731-*" />
        <option name="ST_range" value="710-730" />
      </options>
      <action>Special actions for separation of Mobile addon</action>
    </phase>
  <phase name="NAVERS2_HANDLE_INIT" password="QIHMZPPY">
       <!-- pwd: 28996 -->   
    <args>
      <arg>ALL</arg>
      <arg>F</arg>
      <arg>CURRENT</arg>
    </args>
    <action>initialise the NAVERS2 data</action>
  </phase>
  <phase name="NCVERS2_HANDLE_INIT" password="KVYGUBAD">
       <!-- pwd: 66191 -->   
    <args>
      <arg>ALL</arg>
      <arg>F</arg>
      <arg>CURRENT</arg>
    </args>
    <action>initialise the NCVERS2 data</action>
  </phase>
  <phase name="NAVERS2_DELSAINT_C_W" password="YXPJGZGF">
       <!-- pwd: 55238 -->   
    <args>
      <arg>CURRENT</arg>
      <arg>W</arg>
      <arg>DELSAINT.LST</arg>
    </args>
    <action>set delsaint in NAVERS2 current</action>
  </phase>
  <phase name="NAVERS2_DELSAINT_E_W" password="SNNTILGL">
       <!-- pwd: 18802 -->   
    <args>
      <arg>EHPINC</arg>
      <arg>W</arg>
      <arg>DELSAINT.LST</arg>
    </args>
    <action>set delsaint in NAVERS2 current</action>
  </phase>
  <!-- (af 700.02) -->
  <phase name="IS_SELECT" logfile="IS_SELECT.LOG" password="EHEMENGZ">
       <!-- pwd: 66195 -->   
    <args>
      <arg>ADDONSELECT.DMP</arg>
      <arg>NAVERSSELECT.DMP</arg>
      <arg>SPDA_IS_SELECT.LOG</arg>
    </args>
    <action>Decide about all Add-ons</action>
    <usage>Decide what to do with the add-ons during the upgrade</usage>
  </phase>
  <phase name="ADDONKEY_CHK" logfile="ADDONKEY.LOG" password="GAVULJPI">
       <!-- pwd: 89289 -->   
    <action>&lt;p&gt;Prompts for keyword for industry solution, if necessary&lt;/p&gt;</action>
    <usage>&lt;p&gt;Enter keyword for industry solutionif necessary&lt;/p&gt;</usage>
  </phase>
  <!-- (af 620.20) get component info after addon selection -->
  <!-- (must run BEFORE phase ADDON_QCALC !!!) -->
  <phase name="COMPINFO_ADDON" logfile="COMPINFOADDON.LOG" password="IIIRBFVW">
       <!-- pwd: 92863 -->   
    <!-- SPDA callgetRelcompchgreadAvers -->
    <args>
      <arg>READ_AVERS</arg>
    </args>
    <action>Get the component information after the addon selection</action>
  </phase>
  <!-- Determine equivalence patch levels (af 620) -->
  <phase name="ADDON_QCALC" logfile="ADDONQCALC.LOG" password="YLAKEZYB">
       <!-- pwd: 80490 -->   
    <args>
      <arg>SPDA_ADDONQCALC.LOG</arg>
    </args>
    <action>Calculates queue for selected add-ons</action>
  </phase>
  <!-- Check Version of IS_MOVES.LST -->
  <!-- (ps 620.02) -->
  <phase name="IS_MV_CHK2" logfile="ISMVCHK2.LOG" password="MDTYRMXF">
       <!-- pwd: 2995 -->   
    <args>
      <arg>POST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks version of IS_MOVES.LST file</action>
  </phase>
  <!-- (af 620.20) Add all support packages that are in the export but not yet installed in the -->
  <!-- customer system to the TR Storage (TrType TR_EXPPKG) for later TODIR merge. -->
  <!-- toc info file -->
  <phase name="TR_EXPPKG2HEAP" logfile="TREXPPKG2HEAP.LOG" password="UZSUQHGJ">
       <!-- pwd: 89147 -->   
    <args>
      <arg>TR_UPGRADE_EXT</arg>
      <arg>TR_EXPPKG</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Moves export packages to the SAPup buffer</action>
  </phase>
  <!-- (af 620.03) get equivalence level BEFORE "old" patch check -->
  <!-- Determine equivalence patch levels (af 620) -->
  <phase name="PATCHK_EQUI" logfile="PATCHKEQUI.LOG" password="WJOGCDWP">
       <!-- pwd: 45107 -->   
    <action>Determines Support Package level for target release that </action>
    <action>corresponds to the level of the source release</action>
  </phase>
  <!-- Determines patch level of start release -->
  <phase name="PATCH_CHK3" password="YDDPUZKH">
       <!-- pwd: 70121 -->   
    <args>
      <arg></arg>
    </args>
    <action>Find unconfirmed Support Packages and checks whether </action>
    <action>the source release contains Support Packages that are more </action>
    <action>recent than the version of the target release</action>
    <usage>Call transaction SPAM to confirm any unconfirmed Support Packages</usage>
    <usage>&lt;p&gt;Call &lt;b&gt;SAP Note 73510&lt;/b&gt; to check whether you can upgrade </usage>
    <usage>the system or which Support Packages are equivalent to those </usage>
    <usage>in the target release.</usage>
  </phase>
  <!-- Determine what patches shall be integrated -->
  <phase name="BIND_PATCH" logfile="PATCHINT.LOG" password="GRNLQJWF">
       <!-- pwd: 25431 -->   
    <args>
      <arg>SPDA_PATCHINT.LOG</arg>
    </args>
    <action>Includes Support Packages for the target release</action>
    <usage>Include Support Packages in the upgrade, if necessary</usage>
  </phase>
  <!-- (af 620.20) get component info after support package selection -->
  <phase name="COMPINFO_SPP" logfile="COMPINFOSPP.LOG" password="WFJPKDCF">
       <!-- pwd: 27637 -->   
    <!-- SPDA callgetRelcompchgreadAvers -->
    <args>
      <arg>KEEP_RELCOMPCHG</arg>
    </args>
    <action>Get the component information after the support package selection</action>
  </phase>
  <!-- (ms SP9) stop if export is not fitting to destination (740) -->
  <phase name="REQ_UPGPATHCHK" password="AWHKBVTQ">
    <!-- pwd: 53084 -->
    <args>
      <arg>ReqUpgPathChk</arg>
      <arg>ECHOCHECKSLOG;SET_MODULE_FAILED</arg>
      <!--  set module/phase to failed  -->
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <or>
        <and>
          <option name="destcomponent" value="SAP_BASIS(740(2-4))" />
          <not>
            <option name="expcomponent" value="SAP_BASIS(740(2-4))" />
          </not>
        </and>
        <and>
          <option name="destcomponent" value="SAP_BASIS(740(5-7))" />
          <not>
            <option name="expcomponent" value="SAP_BASIS(740(5-7))" />
          </not>
        </and>
        <and>
          <option name="destcomponent" value="SAP_BASIS(740(8-*))" />
          <not>
            <option name="expcomponent" value="SAP_BASIS(740(8-*))" />
          </not>
        </and>
      </or>
    </options>
  </phase>
  <!-- (af 700.02) -->
  <!-- Include and check Add-on language packages -->
  <phase name="ADDON_LANGINC" logfile="ADDONLANGINC.LOG" password="CYOWKGMQ">
       <!-- pwd: 2600 -->   
    <args>
      <arg>SPDA_ADDONLANGINC.LOG</arg>
    </args>
    <action>Include Add-on language packages</action>
  </phase>
  <phase name="CHK_SELDELSAINT" logfile="SELDELSAINT.LOG" password="GBTVWJUR">
       <!-- pwd: 59052 -->   
    <action>check del saint decisions</action>
  </phase>
  <!-- Command file import of full and delta tasks -->
  <phase name="TR_CMDIMPORT_FDTASKS" logfile="PCMDIMPFD.LOG" elgfile="PCMDIMPFD.ELG" password="QVHZMPCL">
       <!-- pwd: 56325 -->   
    <!-- (ps 640-1.42) call new R3trans -->
    <args>
      <arg>PREPARE_CMDIMP_FDTASK</arg>
      <arg>TP_IMPORT_WITH_NBUF</arg>
      <arg>PCMDIMP.TP0</arg>
      <arg>PCMDIMPFD.BUF</arg>
      <arg>use_r3i</arg>
    </args>
    <action>Imports command files for full and delta tasks</action>
  </phase>
  <!-- (af 700.02) -->
  <phase name="IS_MERGE" logfile="IS_MERGE.LOG" password="WMVWJDLQ">
       <!-- pwd: 37086 -->   
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Adds Supplement Tasks (without AOS) to the TRStorage</action>
  </phase>
  <!-- (af 620) -->
  <phase name="TR_QUEUE2HEAP" logfile="TRQUEUE2HEAP.LOG" password="CZZKVGRZ">
       <!-- pwd: 6418 -->   
    <action>Moves the upgrade requests of the queue to the SAPup buffer</action>
  </phase>
  <!--  (jo 720) Add customer transport requests if they exist  -->
  <!--  (jo 720) Always force syncmark, even if buffer doesn't have it  -->
  <phase name="TR_BUF2HEAP_CUST" logfile="TRB2H.LOG" password="IAYJRFHC">
       <!-- pwd: 17253 -->   
    <args>
      <arg>CUSTOMER.BUF</arg>
      <arg>TR_CUSTOMER</arg>
      <arg>CLEANUP_FIRST;OPTIONAL_BUFFER;FORCE_SYNCMARKS;FORCE_UMODES;COPY_CUSTTRANS</arg>
      <arg>TPSHBUF.LOG</arg>
    </args>
    <action>Moves customer request SAPup buffer (optional)</action>
  </phase>
  <!-- (sm 720) Set parameter VERSION_IN_SHD=YES in table UPGPARAM, since versioning is done already in shadow system in phase DDIC_CUST -->
  <phase name="SETUPGPAR_VERSSHD" logfile="SETUPGPAR.LOG" password="IBWKCFML">
       <!-- pwd: 58952 -->   
    <args>
      <arg>SET</arg>
      <arg>VERSION_IN_SHD=YES</arg>
    </args>
  <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
    <action>Sets parameter VERSION_IN_SHD=YES in table UPGPARAM</action>
  </phase>   
  <phase name="IS_TREMPTY" logfile="IS_TREMPTY.LOG" password="MQLQXXTE">
       <!-- pwd: 91684 -->   
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
    <action>Check if there any request to be processed</action>
  </phase>
  <!-- command file import for all addon's and support packages -->
  <phase name="TR_CMDIMPORT_PREPARE" logfile="PCMDIMP.LOG" elgfile="PCMDIMP.ELG" password="YOHALZNC">
       <!-- pwd: 57484 -->   
    <!-- (ps 640-1.42) call new R3trans -->
    <args>
      <arg>PREPARE_CMDIMPORT</arg>
      <arg>TP_IMPORT_WITH_NBUF</arg>
      <arg>PCMDIMP.TP0</arg>
      <arg>PCMDIMP.BUF</arg>
      <arg></arg>
    </args>
    <action>Imports object lists for included Support Packages</action>
  </phase>
  
  <submodule password="KRGCCBGT">
    <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
    <phaselist>
      <!-- stm command file import for all customer transports -->
      <phase name="TR_CMDIMPORT_CUST" logfile="PCMDIMPCUST.LOG" elgfile="CUSTOMER.ELG" password="YHIGMZER">
  <!-- pwd: 70598 -->   
  <!-- (ps 640-1.42) call new R3trans -->
  <args>
    <arg>PREPARE_CMDIMP_CUST</arg>
    <arg>TP_IMPORT_WITH_NBUF</arg>
    <arg>CUSTOMER.TP0</arg>
    <arg>PCMDIMP_CUST.BUF</arg>
    <arg>custclient;use_acc_import</arg>
  </args>
  <action>Imports object lists for included Customer Transports</action>
      </phase>

      <!-- (sm 720) First SFW tableset check in Prepare (needed, if the preput is only available in the start release)-->
      <phase name="SFW_FIND_TABSET_CUST" logfile="SFWTABSCUST.LOG" password="WIDSRDRG">
  <!-- pwd: 92795 -->
  <action>Check, which SFW tables need to be rescued</action>
      </phase>  
    </phaselist>
  </submodule>
  <!-- (vd 620.85) calculate ADD-ONs tr-korrs in F and D tasks -->
  <phase name="JOB_RDDIT020" logfile="PDDIT020.LOG" elgfile="PDDIT020.ELG" password="MBCOOXWZ">
       <!-- pwd: 73324 -->   
    <args>
      <arg>RDDIT020</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>ADDBIND\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>ADD ON TASK MERGE</arg>
    </args>
    <action>Merges transports for add-ons in NAVERS</action>
  </phase>
  <!-- (vd 620.85) update the fs to the same F and D tasks as in DB -->
  <phase name="IS_SYNC_20" logfile="ISSYNC20.LOG" password="MEJEVXLA">
       <!-- pwd: 68057 -->   
    <action>Synchronizes NAVERS in file system</action>
  </phase>
  <phase name="UPDATE_DBSTATS_DB2_CONFLICT_CHECK" password="YDDPUZKH">     <!-- pwd: 70121 -->
    <args>
      <arg>FILE</arg>
      <arg>bin</arg>
      <arg>DB2RUNPH.LST</arg>
      <arg>CONFLICT_CHECK=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
        <option name="DBTYPE" value="DB2-z/OS" />
    </options>
  </phase>
  <!-- spam conflict check (af 620) -->
  <phase name="CONFLICT_CHECK" logfile="CONFLCHK.LOG" password="YAWZNZVG">
       <!-- pwd: 96861 -->   
    <args>
      <arg>NAVERSCONFL.DMP</arg>
      <arg>SPDA_CONFLCHK.LOG</arg>
    </args>
    <action>Checks for conflicts according to transaction SPAM</action>
  </phase>
  <!-- (af 700.08) Integration of customer request for Unicode Conversion -->
  <phase name="UCMIG_REQINC" logfile="UCMIGREQINC.LOG" password="WHFRGDMX">
       <!-- pwd: 23394 -->   
    <options>
      <option name="UCMIG_INTEGRATED" />
      <option name="ST_range" value="46A-46Z" />
    </options>
    <action>Ask for customer request for preparation of Unicode Conversion</action>
  </phase>
  
  <!-- ignore small tables for ICNV (hk + lb 721) -->
  <phase name="SQLDB_ICNVIGNTABS" logfile="ICNVIGNTABS.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>ICNV_IGNTABS</arg>
      <arg></arg>
    </args>
    <options>
      <option name="USE_ICNV" />
      <not> <option name="feature_switch" value="/fa/icnvignsmalltabs" /></not>
    </options>
    <action>Ignore small tables for ICNV</action>
  </phase> 
  
  <!-- (ps 610.102) -->
  <phase name="ICNVXRQ" logfile="ICNVXRQ.LOG" elgfile="ICNVXRQ.ELG" password="GYZSPJFQ">
       <!-- pwd: 19004 -->   
    <args>
      <arg>DDICNV.LOG</arg>
    </args>
    <options>
      <option name="USE_ICNV" />
    </options>
    <action>Checks prerequisites for ICNV</action>
  </phase> 

  <phase name="REQ_SLT_CHECK_DMIS" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>ReqDMISforSLT</arg>
      <arg>ECHOCHECKSLOG;SET_MODULE_FAILED;DMISRELEASE=2011_1_731;DMISPATCHLEVEL=6;BASISRELEASE=740;BASISPATCHLEVEL=5</arg>
    </args>
    <options>
      <option name="MIGRATE_OPTION" value="SLT" />
      <or>
        <not><option name="destcomponent" value="DMIS(2011_1_731(6-*))"/></not>
        <not><option name="destcomponent" value="SAP_BASIS(740(5-*))"/></not>
      </or>
    </options>
  </phase>
</phaselist>
</module>

<module name="PREP_INTEGRATION" type="prepare" mandatory="yes" checkmode="yes">
      <description>Integration</description>
      <revokemodule>REV_PRPINTEGRATION</revokemodule>
      <password>AKFYZVLM</password>
      <!--  pwd: 20952  -->
      <precedences>
        <precedence>PREP_EXTENSION</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPIntegration.xml#76 $">
  <!-- ************************************************************ -->
  <!-- Integration -->
  <!-- ************************************************************ -->

   <!-- Initialize old ISU-stress-maker -->
   <phase name="RUN_RCRR_TFW_INI" logfile="RCRRTFW1.LOG" elgfile="auto" password="YDDPUZKH">
       <!-- pwd: 70121 -->
    <args>
      <arg>RCRR_TFW_PHASES</arg>
      <arg>SAP_INIT</arg>
      <arg>NO-IGNORE</arg>
      <arg>TFW_PHASES_INIT\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Initialize old stress maker ISU for startrelease lower 700</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="46C-699" />
    </options>
    <action>Initialize old stress maker ISU for startrelease lower 700</action>
  </phase>
  <!-- Initialize new stressmaker -->
  <phase name="RUN_UPG_STRESSMAKER_INI" logfile="RSUPG_STRESS4UPGRADE.LOG" elgfile="RSUPG_STRESS4UPGRADE.ELG" password="YDDPUZKH">
       <!-- pwd: 70121 -->
    <args>
      <arg>RSUPG_STRESS4UPGRADE</arg>
      <arg>SAP_STRESS_INIT</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_STRESSMAKER_INIT\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Initialize stress maker for startrelease greater or equal 700</arg>
    </args>
    <options>
      <or>
        <option name="ITERATIVE_UPG" />
        <option name="ZERODOWNTIME_UPG" />
		<option name="MIGRATE_OPTION" value="SLT" />
      </or>
	  <option name="feature_switch" value="/fa/stress_maker" />
      <option name="ST_range" value="700-*" />
    </options>
    <action>Initialize stress maker for startrelease greater or equal 700</action>
  </phase>
  <phase name="RUN_UPG_RTO_COLLISION_HANDLING_DIS" logfile="auto" elgfile="auto" password="YDDPUZKH">
       <!-- pwd: 70121 -->
    <args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>SAP_RTO_CH_DIS</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPG_RTO_COLL_HAND_DIS\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Disables RTO for collision handling test in case /fa/collision_handling_test is not set</arg>
    </args>
    <options>
	  <option name="feature_switch" value="/fa/stress_maker" />
      <option name="ST_range" value="700-*" />
      <not><option name="feature_switch" value="/fa/collision_handling_test" /></not>
    </options>
    <action>Disables RTO for collision handling test in case /fa/collision_handling_test is not set</action>
  </phase>
  <phase name="RUN_RTO_CALLER_AIM_SETUP" logfile="RTO_CALLER.LOG" elgfile="RTO_CALLER.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>RSUPG_RTO_CALLER</arg>
      <arg>SAP_RTO_AIMSETUP</arg>
      <arg></arg>
      <arg>RTO_CAL_AIMSETUP\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Calling all AIM RTOs methods to setup the test environment</arg>
    </args>
    <action>Calling all AIM RTOs methods to setup the test environment</action>
    <options>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ZERODOWNTIME_UPG" />
    </options>
  </phase>
  <phase name="RUN_RLFW_SYSTEMSEP_NR" logfile="RLFWSYSTEMSEPNR.LOG" elgfile="RLFWSYSTEMSEPNR.ELG" password="WJOGCDWP">
    <!-- pwd: 18134 -->
    <args>
      <arg>RLFW_TEST_SUBSYSTEM_PREP</arg>
      <arg>RLFW_SYSTEMSEP_NR</arg>
      <arg>NO-IGNORE</arg>
      <arg>RLFW_SYSTEMSEP_NR\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Prepare number ranges</arg>
    </args>
    <action>Prepare number ranges</action>
    <options>
	  <option name="ZERODOWNTIME_UPG" />
	  <option name="feature_switch" value="/fa/upgint" />
      <or>
	    <option name="startcomponent" value="SAP_BASIS(740(5-*))" />
	    <option name="ST_range" value="741-799" />
      </or>
    </options>
  </phase>
    <phase name="RUN_RTO_CREATE_LCVIEWS" logfile="auto" elgfile="auto" password="IIIRBFVW">
    <!-- pwd: 92863 -->
	<args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>CREATES_LC_VIEWS</arg>
      <arg></arg>
      <arg>CREATE_CRE_LCVIEWS\.$(SAPSID)</arg>
      <arg>1</arg>
      <arg>Creates LC views</arg>
    </args>

    <options>
      <option name="ZERODOWNTIME_UPG" />
      <option name="feature_switch" value="/fa/stress_maker" />
    </options>
       <action>Checks recreated LC views of RTO cl_upg_rto_view_on_lc_table</action>
  </phase>

 <phase name="RUN_UPG_RTO_COLLISION_HANDLING_EXP" logfile="RSUPG_RTO_COLL_HAND_EXP.LOG" elgfile="RSUPG_RTO_COLL_HAND_EXP.ELG" password="YDDPUZKH">
       <!-- pwd: 70121 -->
    <args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>SAP_RTO_CH_EXP</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPG_RTO_COLL_HAND_EXP\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Creates initial entries and export for collision handling test</arg>
    </args>
    <options>
	  <or>
        <option name="ZERODOWNTIME_UPG" />
        <option name="ITERATIVE_UPG" />
      </or>
      <option name="feature_switch" value="/fa/stress_maker" />
      <option name="feature_switch" value="/fa/collision_handling_test" />
      <option name="ST_range" value="700-*" />
    </options>
    <action>Creates initial entries and export for collision handling test</action>
  </phase>
  <phase name="CONVBUFFER_CHTEST" logfile="CNVBFCHTEST.LOG" password="FEVSGIGD">
    <!-- pwd: 656 -->
    <args>
      <arg>LIST2BUFFER</arg>
      <!--  (jo) This must not have I0!  -->
      <arg>MODBUFFER=G0,V0;UMODES=126;TPPARAM=CONVBUFFER.TP0</arg>
      <arg>COLL_HAND_TR.LST</arg>
      <arg>COLL_HAND.BUF</arg>
    </args>
	<options>
	  <or>
        <option name="ZERODOWNTIME_UPG" />
        <option name="ITERATIVE_UPG" />
      </or>
      <option name="feature_switch" value="/fa/collision_handling_test" />
      <option name="ST_range" value="700-*" />
    </options>
    <action>Creates buffer for 2nd import of collision handling test</action>
  </phase>
  <phase name="CONVBUFFER_CHTEST_CUST" logfile="CNVBFCHTEST_CUST.LOG" password="FEVSGIGD">
    <!-- pwd: 656 -->
    <args>
      <arg>LIST2BUFFER</arg>
      <!--  (jo) This must not have I0!  -->
      <arg>MODBUFFER=G0,V0;UMODES=126;TPPARAM=CONVBUFFER.TP0</arg>
      <arg>COLL_HAND_TR_CUST.LST</arg>
      <arg>COLL_HAND_CUST.BUF</arg>
    </args>
	<options>
	  <or>
        <option name="ZERODOWNTIME_UPG" />
        <option name="ITERATIVE_UPG" />
      </or>
      <option name="feature_switch" value="/fa/collision_handling_test" />
      <option name="ST_range" value="700-*" />
    </options>
    <action>Creates buffer for 2nd import of collision handling test for customer transport</action>
  </phase>
  
  <phase name="CONVBUFFER_COPY_DATACOFILES_CHTEST_CUST" logfile="CNVBFCHTEST_CUST.LOG" password="IIIRBFVW">
      <!-- pwd: 92863 -->   
   <args>
     <arg>BUFFER2LIST</arg>
     <arg>COPYCOFILE</arg>
     <arg>COLL_HAND_CUST.BUF</arg>
     <arg>COLL_HAND_TR_CUST_COPY.LST</arg>
   </args>
   <options>
     <or>
       <option name="ZERODOWNTIME_UPG" />
       <option name="ITERATIVE_UPG" />
     </or>
     <option name="feature_switch" value="/fa/collision_handling_test" />
     <option name="ST_range" value="700-*" />
   </options>
   <action>Copies data- and cofiles of the customer transports for collision handling test</action>
  </phase>
 
  <phase name="TR_EXT2HEAP_CHTEST" logfile="TREXT2HEAPCH.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg></arg>
      <arg>CH_TEST</arg>
      <arg>COLL_HAND_TR.LST</arg>
    </args>
    <options>
	  <or>
        <option name="ZERODOWNTIME_UPG" />
        <option name="ITERATIVE_UPG" />
      </or>
      <option name="feature_switch" value="/fa/collision_handling_test" />
      <option name="ST_range" value="700-*" />
    </options>
  </phase>
  <phase name="TR_EXT2HEAP_CHTEST_CUST" logfile="TREXT2HEAPCH_CUST.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg></arg>
      <arg>CH_TEST</arg>
      <arg>COLL_HAND_TR_CUST.LST</arg>
    </args>
    <options>
	  <or>
        <option name="ZERODOWNTIME_UPG" />
        <option name="ITERATIVE_UPG" />
      </or>
      <option name="feature_switch" value="/fa/collision_handling_test" />
      <option name="ST_range" value="700-*" />
    </options>
  </phase>

  <!-- (jo 720) Moved these two phases together and *after* the extension module  -->

  <!-- (af 620.20) Unpack archives with non-repository data of addons and support packages in export -->
  <phase name="READDATA_EXT" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <!-- this must* be emptytoc info file -->
    <args>
      <arg>READEXT.LST</arg>
      <arg></arg>
      <arg>TASKSUPGEXT.LST</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Reads additional data files from the upgrade CDs</action>
    <usage>Mount each requested upgrade CD</usage>
  </phase>
  <!-- (af 620.20) Add relevant requests with non-repository data of addons and support packages in export -->
  <!-- to the TR Storage (determined in phase READDATA_EXT by the conditions in the TOC file. -->
  <phase name="TR_EXT2HEAP" logfile="TREXT2HEAP.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <!-- toc info file -->
    <args>
      <arg>TR_UPGRADE_EXT</arg> <!--  (jo 720) New type with target buffer "SHDUPG1.BUF"  -->
      <arg>UPGEXT</arg>
      <arg>TASKSUPGEXT.LST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Moves additional upgrade requests to the SAPup buffer</action>
  </phase>

  <!-- Modification transport integration -->
  <phase name="ADJUSTPRP" logfile="ADJUSTPRP.LOG" elgfile="ADJUSTPRP.ELG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>ADJUSTPRP.BUF</arg>
      <arg>ADJUSTPRP.TP0</arg>
    </args>
    <action>Prepares adjustment calculation: Imports command file flagged </action>
    <action>in other system, if necessary</action>
    <usage>Select command fileif necessary</usage>
  </phase>
  <!-- (hk lmt_003) moved behind all COMPINFO* phases
    need new release information for suitable FRP ARCHIVE on DVD -->
  <phase name="FRP_CHK" logfile="FRPCHECK.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <options>
      <option name="ST_range" value="640-*" />
      <option name="destcomponent" value="SCM" />
    </options>
    <action>Unpacks the FRP to the kernel directory</action>
  </phase>
  <phase name="EHPNOTE_CHK" logfile="EHPNOTE.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <options>
      <option name="EHP_WITH_NEWRELEASE" />
    </options>
    <action>&lt;p&gt;Reports SAP Note for enhancement packages, if necessary&lt;/p&gt;</action>
    <usage>&lt;p&gt;Reports SAP Note for enhancement packages if necessary&lt;/p&gt;</usage>
  </phase>
  <!-- (jo 710) Can collect kernel archives only AFTER* we know if it is UNICODE or not and we know the real destvers -->
  <!-- (jo 710) Rescan directory -->
  <phase name="SCANDIR_KRN" logfile="SCANDIRK.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>SCAN;DETERMINE_ACTION;COLLKRNL;COLLIGS;EXTRACTEPS;EXTRKRNL;COPYIGS;COPYCTC</arg>
    </args>
    <options>
      <not><option name="NOSTACKFILE" value="TRUE" /></not>
    </options>
    <action>Scans the download directory and presets variables</action>
  </phase>
  <!-- (jo 710) Moved to here so on repeating the module the customer can put a new
       kernel in download directory before repeating
    -->
  <phase name="MODFILE_TOOLCHKEXE" logfile="auto" password="YLAKEZYB">
    <!-- pwd: 80490 -->
    <args>
      <arg>SRC=BIN;DEST=BIN;CONVERT=TOOLCHECK;IGNORE</arg>
      <arg>TOOLCHKEXE.LST=ToolChkSPAM.xml</arg>
    </args>
    <action>convert TOOLCHKEXE.LST to XML</action>
  </phase>

    <!-- (jo 620.53) -->
    <phase name="TOOLCHECKXML_EXE" logfile="auto" password="ATAUUVEP">
        <!-- pwd: 34051 -->
        <!-- (jo 710) Make sure we do not request less then specified in ToolChkUPG.xml -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>TOOLCHECKPHASE_EXE.XML</arg>
            <arg /> <!-- Tool Filter -->
            <arg /> <!-- Options -->
        </args>
        <options>
        </options>
        <action>Determines and checks the tool version of the new kernel</action>
        <usage>Put suitable kernel archive in download directory</usage>
    </phase>

  <!-- (ag 710-1) -->
  <phase name="SAPCRYPTOLIB_CHKSYS" logfile="CRYPTLIBCHK.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
        <arg>SYSTEM</arg>
    </args>
    <action>Checks if the original system runs in encrypted mode using SAPCrypolib or if SAPCryptolib is available for usage by the LM tool.</action>
  </phase>
  <!-- (ag 710-1) -->
  <phase name="SCANDIR_CRYPTO" logfile="SCANDIRY.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>EXTRCRYPTO</arg>
    </args>
    <options>
      <not><option name="NOSTACKFILE" value="TRUE" /></not>
    </options>
    <action>Extracts SAPCryptolib.</action>
  </phase>

  <!-- **************************************************************************** -->
  <!-- (jo 720) Generate buffer for preput - needed to evaluate all options in next phase  -->
  <phase name="GENBUFFER_PREPUT" password="YAWZNZVG">
       <!-- pwd: 79932 -->
    <args>
      <arg>GENPREPUTBUFFER.XML</arg>
      <arg>PREPUT.BUF</arg>
      <arg>TYPE=PREPUT;SHADOW;MEMPUTSTEPS</arg>
    </args>
    <action>Generates buffer for preput</action>
  </phase>

  <!-- (jo 720) Is needed for RUN_RSTODIRM_BIND below  -->
  <phase name="TR_CMDIMPORT_UPGTST" logfile="PCMDIMPTEST.LOG" elgfile="UPGTESTS.ELG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <!-- (ps 640-1.42) call new R3trans -->
    <args>
      <arg>UPGTESTS</arg>
      <arg>TP_IMPORT_WITH_NBUF</arg>
      <arg>PCMDIMP.TP0</arg>
      <arg>PCMDIMP_TEST.BUF</arg>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/badi_check" />
    </options>
  </phase>

  <!-- (jo 720) Requested by Christiane: List transports relevant for import queue  -->
  <phase name="TR_CONVHEAP_IMPQUEUE" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>LIST</arg>
      <arg>IMPORT_QUEUE</arg>
      <arg>VARDIR</arg>
      <arg>TRIMPQUEUE.LST</arg>
    </args>
  </phase>

  <!-- **************************************************************************** -->
  <!--  (jo 720) Survivor of SAPupPRPModSupport.xml   -->
  <!--  (jo 720) List transports for RDDIT006  -->
  <phase name="TR_CONVHEAP_IT006" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg>LIST</arg>
      <arg>BOUND_TRANSPORTS</arg>
      <arg></arg>
      <arg>BOUNDTRNS.LST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
  </phase>

  <!-- **************************************************************************** -->

  <!-- cU("ISC_IMP"), is done in TR_CMDIMPORT_PATCH -->
  <!-- (mh 620/4-16) JOB->RUN phase -->
  <phase name="RUN_RSTODIRM_BIND" logfile="RSTODIRM.LOG" elgfile="RSTODIRM.ELG" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <args>
      <arg>RSTODIRM</arg>
      <arg>SAP_BIND</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSTODIRM\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>TODIR-PREPARE</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Preparation of the delivery directory</action>
  </phase>
  <!-- TODIR-merge for PATCHES -->
  <phase name="TR_TODIR_MERGE_PATCH" logfile="PSPATMRG.LOG" password="IIVEBFVW">
       <!-- pwd: 66178 -->
    <args>
      <arg>PREPARE_TODIRMERGE</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Merges included Support Packages with the delivery directory</action>
  </phase>
  <!-- TODIR-merge for ADD-ONs -->
  <phase name="JOB_RDDIT021" logfile="PDDIT021.LOG" elgfile="PDDIT021.ELG" password="SEFKNLNI">
       <!-- pwd: 32478 -->
    <args>
      <arg>RDDIT021</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>ADDBIND\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>ADD ON MERGE</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Merges add-ons in the delivery list</action>
  </phase>
  <phase name="UVERS_UP_T" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg>T</arg>
      <arg>FIX_UVERS_REL</arg>
    </args>
    <action>Changes the status in table UVERS and updates releases</action>
  </phase>

  <!-- (jo 720) Generate a concise phaselist, evaluating all options  -->
  <phase name="INITTOOL_PHL" password="WJOGCDWP">
       <!-- pwd: 18134 -->
    <args>
      <arg>CHECKPHASEOPTS=ALL</arg>
    </args>
    <action>Generate phaselist, evaluating all options</action>
  </phase>
</phaselist>
</module>

<module name="PREP_INSTALL" type="prepare" mandatory="yes">
      <description>Installation</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <revokemodule>REV_PRPINSTALL</revokemodule>
      <password>EXLPYNIN</password>
      <!--  pwd: 52860  -->
      <precedences>
        <precedence>PREP_INTEGRATION</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPInstall.xml#56 $">
  <!-- ************************************************************ -->
  <!-- Installation -->
  <!-- ************************************************************ -->
  <!-- delete service of the shadow system -->
  <phase name="WINSRV_DELSHD0" logfile="WSRVDELSHD0.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>uninstall</arg>
      <arg>shd</arg>
      <arg>start</arg>
    </args>
    <options>
      <option name="OSTYPE" value="Windows" />
    </options>
    <action>Deletes shadow service for the case the shadow instance number will be changed</action>
  </phase>
  <phase name="INITSHD" logfile="INITSHD.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <action>Prompts for shadow parameters</action>
    <usage>Enter shadow parameters</usage>
  </phase>
  <!-- (ps shadow.11) from here -->
  <phase name="SHDINST_CRE" logfile="SHDINST_CRE.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>SHD</arg>
    </args>
    <action>Creates directory structure for the shadow instance</action>
  </phase>
  <phase name="SHDINST_CPY" logfile="SHDINST_CPY.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg>ALPSHDDEF.XML</arg>
      <arg>ALPSHDINST.XML</arg>
      <arg>ALPSHDSTART.XML</arg>
    </args>
    <action>Copies the profiles</action>
  </phase>
  <phase name="SHDINST_ADAPT" logfile="SHDINST_ADAPT.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <action>Adapts the profiles to the shadow instance</action>
  </phase>
  <phase name="SHDINST_MOD_RESS" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>ALPSHDINMAX.XML</arg>
      <arg>PROSHDINMAX.BCK</arg>
      <arg>ALPSHDDFMAX.XML</arg>
      <arg>PROSHDDFMAX.BCK</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
    <action>Adapts the system settings</action>
  </phase>
  <phase name="SHDINST_MOD_DOWN" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <args>
      <arg>ALPSHDIN.XML</arg>
      <arg>PROSHDIN.BCK</arg>
      <arg>ALPSHDDF.XML</arg>
      <arg>PROSHDDF.BCK</arg>
    </args>
    <options>
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Adapts the system settings</action>
  </phase>
  <!-- (jo 720) Must come AFTER modifying profiles depending on strategy! -->
  <!-- (jo 710) Adapt profiles to contain proper hostname etc. -->
  <phase name="CHANGEPROF_SHDADAPT" logfile="CHGPRFSHDADAPT.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->
    <args>
      <arg>ALPSHDADAPT.XML</arg>
      <arg>STARTPROF;DEFAULTPROF;INSTANCEPROF</arg>
      <arg>SHADOW</arg>
    </args>
    <action>Switches off IGS for the shadow system</action>
  </phase>
  <!-- (jo 710) Adapt profiles to run a standalone enqueue -->
  <phase name="CHANGEPROF_SHD_SA_ENQUEUE" logfile="CHGPRFSHDENQ.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
      <arg>ALPSHDSAENQ.XML</arg>
      <arg>STARTPROF;DEFAULTPROF;INSTANCEPROF</arg>
      <arg>SHADOW</arg>
    </args>
    <options>
      <option name="krnexerel" value="720-*" />
    </options>
    <action>Configures standalone enqueue</action>
  </phase>
  <!-- (ag 703) Adapt shadow profile to enable sapstartsrv trace -->
  <phase name="CHANGEPROF_SHD_SRV_TRC" logfile="CHGPRFSHDENQ.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>ALPSHDDEVTRC.XML</arg>
      <arg>STARTPROF;INSTANCEPROF</arg>
      <arg>SHADOW</arg>
    </args>
    <options>
      <option name="feature_switch" value="/shadow/sapstartsrvtrc" />
    </options>
    <action>Enable sapstartsrv tracing</action>
  </phase>
  <phase name="SHDINST_REQ" logfile="SHDINST_REQ.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <action>Checks ports for shadow instance</action>
    <usage>Perform actions from &quot;$(CHECKSLOGNAME)&quot; if necessary</usage>
  </phase>
  <phase name="SAPMMC_PRE" logfile="SAPMMC_PRE.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>INST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="OSTYPE" value="Windows" />
    </options>
    <action>Performs operating system-specific actions</action>
    <usage>Perform actions from &quot;$(CHECKSLOGNAME)&quot; if necessary</usage>
  </phase>
  <phase name="SHDINST_OS" logfile="SHDINST_OS.LOG" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <action>Performs operating system-specific actions</action>
    <usage>Perform actions from &quot;$(CHECKSLOGNAME)&quot; if necessary</usage>
  </phase>
  <phase name="SHDINST_SDB_CHK" password="IIVEBFVW">
       <!-- pwd: 66178 -->
    <action>Checks database-specific settings</action>
    <usage>MaxDB: Adjust the database parameters MAXLOCKS and MAXUSERTASKSif necessary</usage>
  </phase>
  <!-- (ps shadow.11) until here -->
  <!-- BEGIN (jo 710.11) Before creating the shadow user, we clean up an old one -->
  <!-- (jo 710) If the user decided to repeat this module while already in the upgrade
       (for example because the shadow system doesn't start). it would drop the shadow
       user which under Oracle would also drop all synonyms thus blowing away the shadow
       system. So we only run the phase while still in PREPARE.
    -->
  <phase name="SHDUNINST_DB_PREP" password="SEFKNLNI">
       <!-- pwd: 32478 -->
    <args>
      <arg>SHDUNINST.LOG</arg>
      <arg>SHDUSREX.$(DBAEXT)</arg>
      <arg>SHDUSREX.LOG</arg>
    </args>
    <options>
      <option name="upgstatus" value="PREPARE" />
    </options>
    <action>Deletes the shadow schema DB user from a former upgrade</action>
  </phase>

  <!-- END (jo 710.11) -->
  <phase name="SHDINST_DB_PREP" logfile="SHDDBPRP.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg>ReqSHDINSTDB</arg>
      <arg>SHDUSREX.$(DBAEXT)</arg>
      <arg>SHDUSREX.LOG</arg>
      <arg>SHDUSRCRE.$(DBAEXT)</arg>
      <arg>SHDUSRCRE.LOG</arg>
    </args>
    <action>Checks database-specific settings</action>
    <usage>Perform actions from &quot;$(CHECKSLOGNAME)&quot; if necessary</usage>
  </phase>

  <!-- (jo 700) Tests if "R3trans -d" works for the just created shadow user  -->
  <phase name="DBCONNCHK_SHD" password="AMBAVVVE" connect="shadow">
       <!-- pwd: 12335 -->
    <args>
      <arg>DBCONNCHKSHD.LOG</arg>
      <arg>CONNECTONLY</arg>
    </args>
    <action>Tests if shadow connect to the database works</action>
    <options>
      <!--  (jo 721) According to Frank, not needed on DB6  -->
      <not><option name="DBTYPE" value="DB6" /></not>
    </options>
  </phase>

  <!-- (hk 721) Prepare SUM SSFS with shadow user-->
  <phase name="SSFS_SHD" logfile="SSFSSHD.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
        <arg>COPY;CHANGEKEY</arg>
    </args>
    <options>
      <or>
        <option name="DBTYPE" value="ORACLE" />
        <option name="DBTYPE" value="SYBASE" />
      </or>
    </options>
    <action>SSFS preparation for shadow system</action>
  </phase>

  <!-- (ms SP9) adapt profiles for remote shadow (IM 3615426 2013) -->
  <phase name="CHANGEPROF_REMSHD" logfile="CHGPRFREMSHD.LOG" password="WJOGCDWP">
      <!-- pwd: 18134 -->
      <args>
          <arg>ALPREMSHD.XML</arg>
          <arg>DEFAULTPROF;STARTPROF;INSTANCEPROF</arg>
          <arg>SHADOW</arg>
      </args>
      <action>Adjusts the profile of the shadow instance, if necessary</action>
  </phase>
  <!-- (ps 640-2.19) -->
  <phase name="SHDINST_PFPAR" logfile="SHDINST_PFPAR.LOG" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <!-- cU("destcomponent=SAP_APPL"), -->
    <action>Checks with sappfpar the shadow instance profile</action>
    <usage>Perform actions from &quot;$(CHECKSLOGNAME)&quot; if necessary</usage>
  </phase>

  <phase name="RFCDEST_CREATE_O2S" logfile="CRRFCDESTO2S.LOG" password="WFJPKDCF">
       <!-- pwd: 60928 -->
    <args>
      <arg>CREATE_NOPWD</arg>
      <arg>ORIG2SHD</arg>
    </args>
    <action>Creates RFC connection SAP_UPGRADE_SHADOW_SYSTEM</action>
  </phase>

  <!-- (jo 710) -->
  <phase name="SCANDIR_SHOW" logfile="SCANDIRS.LOG" password="MVWDHMJL">
       <!-- pwd: 5514 -->
    <args>
      <arg>INFO</arg>
    </args>
    <options>
      <option name="upgstatus" value="PREPARE" />
      <not><option name="NOSTACKFILE" value="TRUE" /></not>
    </options>
    <action>Shows overview of download directory etc.</action>
  </phase>
  <!-- (ft) Add SLT tables to PUTTB_SHD for DMO with SLT -->
  <phase name="RUN_RSPTBFIL_MIGSLT" logfile="auto" elgfile="auto" password="IEDAJFBM">
  <!-- pwd: 40231 -->
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_MIGSLT=SAP_RSPTBFIL(ACTION=ADD_ADDON_TABLES,LOGFILE=RSPTBMIGSLT.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBMIGSLT\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>PUTTB_SHD add SLT tables</arg>
    </args>
    <options>
      <option name="MIGRATE_OPTION" value="SLT" />
    </options>
    <action>Enters SLT tables in table PUTTB_SHD</action>
  </phase>

  <phase name="RUN_RSPTBFIL_ZDM_PUTTBX_ZDM" logfile="RSPTBFIL_ZDM.LOG" elgfile="RSPTBFIL_ZDM.ELG" password="WJOGCDWP">
       <!-- pwd: 18134 -->
    <args>
      <arg>RSPTBFIL_ZDM</arg>
      <arg>SAP_RSPTBFIL_ZDM_PUTTBX_ZDM</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBFIL_ZDM_PUTTBX_ZDM\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Include load-like and init-switch tables of PUTTBX_ZDM in PUTTB_SHD</arg>
    </args>
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
    <action>Include load-like and init-switch tables of PUTTBX_ZDM in PUTTB_SHD</action>
  </phase>

  <phase name="MODFILE_RSPTBFIL" logfile="auto" password="YLAKEZYB">
    <!-- pwd: 80490 -->
    <args>
      <arg>SRC=BIN;DEST=VAR</arg>
      <arg>RSPTBMISC.LST</arg>
    </args>
    <action>Processes macros in configuration file for phase RSPTBFIL_INIT</action>
    <options>
       <option name="HASSHADOW" />
    </options>
  </phase>
  <!--  (jo 720) The following phase must not run when executing this module during upgrade again!  -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="MODE" value="CLONE" />
      <option name="upgstatus" value="PREPARE" />
    </options>
    <phaselist>
      <!-- (WH10) run RS_UPDATE_PUTTB_SHD_SHD2 to update PUTTB_SHD according to target release -->
      <if test="0">
        <phase name="RUN_UPDPUTTBSHD_SHD2" logfile="UPDPUTTBSHD_SHD2.LOG" elgfile="UPDPUTTBSHD_SHD2.ELG" password="YVGUKZWN">
       <!-- pwd: 68913 -->
          <args>
            <arg>RS_UPDATE_PUTTB_SHD_SHD2</arg>
            <arg>SAP_TMPLOG2</arg>
            <arg>NO-IGNORE</arg>
            <arg>RS_UPDATE_PUTTB_SHD_SHD2\.$(SAPSID)</arg>
            <arg>5</arg>
            <arg>PUTTB_SHD update</arg>
          </args>
          <options>
            <option name="SECOND_SHD" />
          </options>
          <action>Update of PUTTB_SHD table</action>
        </phase>
      </if>
      <!-- (jo + cv 710) Requested by Andrey Engelko -->
      <phase name="RUN_RSPTBFIL_SPACE" logfile="auto" elgfile="auto" password="IEDAJFBM">
	   <!-- pwd: 40231 -->
	<args>
	  <arg>RSPTBFIL</arg>
	  <arg>SAP_SPACE=SAP_RSPTBFIL(ACTION=INIT,LOGFILE=RSPTBSPACE.$(SAPSID))</arg>
	  <arg>NO-IGNORE</arg>
	  <arg>RSPTBSPACE\.$(SAPSID)</arg>
	  <arg>30</arg>
	  <arg>PUTTB_SHD initial filling</arg>
	</args>
	<action>Enters source release information in table PUTTB_SHD</action>
      </phase>
      <!--  (jo + cv) Just to sync PUTTB_SHD with CONPUTTSHD.TAB  -->
      <phase name="READPUTTB_SPACE" logfile="RDPUTTB.LOG" password="WCPMDDNE">
	   <!-- pwd: 11646 -->
	<args>
	  <arg>READ</arg>
	</args>
	<action>Reads table PUTTB and places it in the file system</action>
      </phase>

      <!--  Generates DBCLONEOBJS.DMP  -->
      <phase name="RUN_RSDBSCPY_INIT" logfile="RSDBSCPY.LOG" elgfile="RSDBSCPY.ELG" password="CHOKYROF">
	   <!-- pwd: 81640 -->
	<args>
	  <arg>RSUPG_PARCLONE</arg>
	  <arg></arg>
	  <arg>NO-IGNORE</arg>
	  <arg>DBCLONE*\.$(SAPSID)</arg>
	  <arg>10</arg>
	  <arg>Initialize cloning</arg>
	</args>
	<action>Initializes parameters required for system cloning</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (jo) Separate setting up of temporary system for SLT  -->
  <submoduleref name="SUBMOD_MIG_SLT_CONFIGURE" password="YDDPUZKH">
    <!-- pwd: 70121 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="MIGRATE_OPTION" value="SLT" />
    </options>
  </submoduleref>

</phaselist>
</module>

<module name="PREP_SPACECALC" type="prepare" mandatory="yes">
      <description>Space calculations</description>
      <revokemodule>REV_PRPSPACECALC</revokemodule>
      <password>AKFYZVLM</password>
      <!--  pwd: 20952  -->
      <precedences>
        <precedence>PREP_INSTALL</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPSpaceCalc.xml#32 $">
  <!-- (vd 610.10) container name translation -->
  <!-- (jo 720) Must come after COMPINFO_INI to have productversion ready -->
  <phase name="INIT_CNTRANS_NEW" logfile="INICNTDEST.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>MAP4NEW</arg>
      <arg></arg>
      <arg>SELTAIA.LOG</arg>
      <arg></arg>
      <arg>SELDBS.LOG</arg>
      <arg>TAIA$(DBAEXT).SAP</arg>
      <arg>TAIATRANS.DAT</arg>
    </args>
    <action>Initializes the container name translator for destination release</action>
  </phase>

  <!-- (jo 710) Must come after* CHANGEDESTVERS to have the right release in the exchange tablespaces -->
  <!-- (vd 620.uc Multiplication with UNICODE factor) -->
  <phase name="MULTSPC_UC" logfile="MULTSPUC.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>DBFALL.SPC</arg>
      <arg>DBFALLUC.SPC</arg>
    </args>
    <action>Adapts space requirements</action>
  </phase>

  <!-- get the space requirements for all tranports of Upgrade type TR_UPGRADE -->
  <phase name="TR_GET_SPCREQ_IMP" logfile="TRMAIMP.LOG" elgfile="TRMAIMP.ELG" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <args>
      <arg>Import</arg>
      <arg>TRMAIMP.SPC</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg>ROWSIZES.LST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Calculates the amount of data from the upgrade requests</action>
  </phase>
  <!-- (vd 50A.10) these TABU space consumptions are added -->
  <phase name="TR_GET_SPCREQ_ADD" logfile="TRADIMP.LOG" elgfile="TRADIMP.ELG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>Integration_add</arg>
      <arg>TRADIMP.SPC</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg>ROWSIZES.LST</arg>
    </args>
    <options>
      <not><option name="NOSTACKFILE" value="TRUE" /></not>
    </options>
    <action>Calculates the amount of data in add-on and language requests</action>
  </phase>
  <!-- (vd 50A.10)these TABU space consumptions are NOT added -->
  <phase name="TR_GET_SPCREQ_DISC" logfile="TRDIIMP.LOG" elgfile="TRDIIMP.ELG" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>Integration_disc</arg>
      <arg>TRDIIMP.SPC</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg>ROWSIZES.LST</arg>
    </args>
    <options>
      <not><option name="NOSTACKFILE" value="TRUE" /></not>
    </options>
    <action>Calculates the amount of data in additional Support Package requests</action>
  </phase>
  <!-- TABU space consumptions for customer transports -->
  <phase name="TR_GET_SPCREQ_CUST" logfile="TRCUIMP.LOG" elgfile="TRCUIMP.ELG" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>Integration_cust</arg>
      <arg>TRDIIMP.SPC</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg>ROWSIZES.LST</arg>
    </args>
    <action>Calculates the amount of data in customer requests</action>
    <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
  </phase>
  <!-- (vd 50A.06) -->
  <phase name="TR_COLLTABS_SAP" logfile="TRCOLLTASAP.LOG" elgfile="TRCOLLTASAP.ELG" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>Import;Integration_add;Integration_disc</arg>
      <arg>ALLTABU.ODS</arg>
      <arg>ALLTABU.DAT</arg>
      <arg>ROWSIZES.LST</arg>
    </args>
    <action>Totals data</action>
  </phase>
  <phase name="TR_COLLTABS_CUST" logfile="TRCOLLTACUST.LOG" elgfile="TRCOLLTACUDT.ELG" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>Integration_cust</arg>
      <arg>ALLTABUCUST.ODS</arg>
      <arg>ALLTABUCUST.DAT</arg>
      <arg>ROWSIZES.LST</arg>
    </args>
    <action>Totals data</action>
    <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
  </phase>
  <!-- (vd 50A.10) -->
  <phase name="TABSPC_PREP" logfile="TABSPCP.LOG" elgfile="TABSPCP.ELG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>$CONDEVAL($HASTRTYPE(TR_CUSTOMER),ALLTABU.ODS;ALLTABUCUST.ODS,ALLTABU.ODS)</arg>
      <arg>DBFCPSHD.SPC</arg>
      <arg>GEN_LTABART</arg>
      <arg>TABSPC.TP0</arg>
    </args>
    <action>Calculates which tables are part of import into old tables</action>
    <options>
      <!-- only done for EHP-installer and upgrade!  -->
      <not><option name="MODE" value="TRANSPORT" /></not>
    </options>
  </phase>

  <!-- (jo 720) Report from Tamara: Determine number of loads to be added from TODIR merge -->
  <phase name="RUN_GENOBJNUM" elgfile="GENOBJNUM.ELG" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <args>
      <arg>GENOBJNUM</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>GENOBJNR\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>GEN-OBJNUM</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="realdestvers" value="702,731-*" />
    </options>
    <action>Guess amount of objects to be generated</action>
  </phase>
  <!-- (jo 710) Add dynamic amount for loads -->
  <phase name="LIST_LOAD_SPC" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>SPACE</arg>
      <arg>DBFLOAD.SPC</arg>
      <arg>TAIATRANS.DAT</arg>
    </args>
    <action>Calculates amount of space for ABAP load tables</action>
  </phase>
  <phase name="DYNSPCADD" logfile="DYNSPC.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>CONVTABS.TUL</arg>
      <arg>NEWINDEX.ICL</arg>
      <arg>DBFDYN.SPC</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks the database space requirements dynamically: </action>
    <action>&lt;UL&gt;&lt;LI&gt;Space needed temporarily for conversion &lt;/LI&gt;</action>
    <action>&lt;LI&gt;Space for new secondary indexes&lt;/LI&gt;&lt;/UL&gt;</action>
  </phase>

  <!--  (jo 720) Dynamic calculation of space  -->
  <phase name="EU_IMPSPC" logfile="EUIMPSPC.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>EUIMP.XML</arg>
      <arg>DBFSHDSYS.SPC</arg>
      <arg>ROWSIZES.LST</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Calculates DB space required for EU_IMPORT phases</action>
  </phase>

  <phase name="GET_CLONE_SIZE" logfile="GET_CLONE_SIZE.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <args>
      <arg>DBCLONEOBJS.DMP</arg>
      <arg>DBFSHDSYS.SPC</arg>
      <arg>HUGETABS.LST</arg>
      <arg>TAIATRANS.DAT</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Calculates DB space required for system cloning</action>
  </phase>

  <!-- (hk 720) merge SPACECHK for ABAP/JAVA -->
  <phase name="SPCJ2EEMERGE" logfile="SPCJ2EEMERGE.LOG" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>DBFJ2EE.SPC</arg>
    </args>
  </phase>

  <!-- **************************************************************************** -->
  <!-- (vd 610.58) output plus copy-to-shadow to "+D" -->
  <phase name="ADDSPAREQ_UPG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <args>
      <arg>DBFALLUC.SPC</arg>
      <arg>TRMAIMP.SPC,TRADIMP.SPC,TRDIIMP.SPC,DBFCPSHD.SPC,DBFLOAD.SPC,DBFSHDSYS.SPC,DBFDYN.SPC,DBFJ2EE.SPC</arg>
      <arg>DBFPLUSD.SPC</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Prepares space check on the database</action>
  </phase>
  
  <phase name="ADDSPAREQ_EHPI" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>DBFALLUC.SPC</arg>
      <arg>TRADIMP.SPC,TRDIIMP.SPC,DBFCPSHD.SPC,DBFLOAD.SPC,DBFSHDSYS.SPC,DBFJ2EE.SPC</arg>
      <arg>DBFPLUSD.SPC</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <not><option name="NOSTACKFILE" value="TRUE" /></not>      
    </options>
    <action>Prepares space check on the database</action>
  </phase>  
  
  <phase name="ADDSPAREQ_EHPI_CUSTONLY" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>DBFALLUC.SPC</arg>
      <arg>TRDIIMP.SPC,DBFCPSHD.SPC,DBFLOAD.SPC,DBFSHDSYS.SPC,DBFJ2EE.SPC</arg>
      <arg>DBFPLUSD.SPC</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="NOSTACKFILE" value="TRUE" />
    </options>
    <action>Prepares space check on the database</action>
  </phase>

  <phase name="ADDSPAREQ_TRANS" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>DBFALLUC.SPC</arg>
      <arg>TRADIMP.SPC,TRDIIMP.SPC,DBFLOAD.SPC,DBFJ2EE.SPC</arg>
      <arg>DBFPLUSD.SPC</arg>
    </args>
    <options>
      <option name="MODE" value="TRANSPORT" />
    </options>
    <action>Prepares space check on the database</action>
  </phase>
</phaselist>

    </module>
    <!-- ********************************************************************* -->
    <module name="PREP_GENCHECKS" type="prepare" mandatory="yes" checkmode="yes" errignorable="yes">
      <description>General checks</description>
      <revokemodule>REV_PRPCHECKS</revokemodule>
      <password>SJICQLMB</password>
      <!--  pwd: 39483  -->
      <precedences>
        <precedence>PREP_SPACECALC</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPGenChecks.xml#100 $">
  <!-- ************************************************************ -->
  <!-- General checks (CHECK) -->
  <!-- ************************************************************ -->
  <phase name="CONFCHK" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>SECTION=UPG;MANDATORY</arg>
    </args>
    <options>
      <option name="EHP_WITH_NEWRELEASE" />
    </options>
    <action>Tests operating system and database version</action>
    <usage>Upgrade operating system and database to the required versionif necessary</usage>
  </phase>
  <phase name="JOB_SUSINUPG" logfile="auto" elgfile="auto" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>SUSINUPG</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>SUSINUPG\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>CHECKS MIGRATION STATUS</arg>
    </args>
    <options>
      <option name="startcomponent" value="SRM_SERVER(500)" />
    </options>
    <action>Checks the migration status for LOCINSUS</action>
  </phase>
  <!-- (vd 620.32) DB specific ation for prepare DB6 -->
  <!-- (fhw 700) moved here -->
  <phase name="DB_ACTION_RUN_PRE" logfile="DBACTRUN.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>RUNSTATS</arg>
      <arg></arg>
      <arg></arg>
      <arg></arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Remove volatile flags</action>
  </phase>
  <!-- (fhw) DB6 only -->
  <phase name="CHK_DB6_DEF_TAB" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <args>
      <arg>DB6DEFTB.LST</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
      <option name="ST_range" value="700-*" />
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Checks DB6 deferred tables</action>
  </phase>
  <!-- (fhw 700) DB6 only -->
  <phase name="CHK_DB6_PAR_PRE" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>DB6PARAM.LST</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Checks DB6 parameters</action>
  </phase>
  <!-- (fhw 710) DB6 only -->
  <phase name="CHK_DB6_GLOBAL_FILES" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <options>
      <option name="DBTYPE" value="DB6" />
      <option name="CONVKRN2SAPCPE" />
    </options>
    <action>Checks DB6 thin client</action>
  </phase>
  <!-- (fhw 710) DB6 only -->
  <phase name="CHK_DB6_4K_TBSP_PRE" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>DB6CHK4K.LST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="DBTYPE" value="DB6" />
      <not>
        <option name="UNICODE_only" />
      </not>
    </options>
    <action>Checks for 4k tbsp on NUC DB6 systems</action>
  </phase>
  <!-- (hk 720) DB4 only -->
  <phase name="CHK_DB4_PROF_ISU" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="DBTYPE" value="DB2/400" />
    </options>
    <action>Checks ISU profile settings on DB4 systems</action>
  </phase>
  <!-- (jo 620.76) see IM 02188452 2004 (jo 700) -->
  <phase name="NEWKERNLIB_CHK2" logfile="NEWKERNLIBCHK.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg></arg>
    </args>
    <action>Checks for missing libraries to execute new kernel in old environment</action>
  </phase>
  <!-- (jo 710) Check for notes that have to be implemented -->
  <phase name="CHECK4NOTES_PACKAGES" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <args>
      <arg>PACKAGES</arg>
      <arg>SPDA_CHKNOTES.LOG</arg>
    </args>
    <options>
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
    <action>Checks for note corrections required by bound packages</action>
  </phase>
  <!-- DB specific ation for prepare -->
  <phase name="DB_ACTION_PRE" logfile="DBACTPRE.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>CONTAINER</arg>
      <arg>SELDBSL.$(DBAEXT)</arg>
      <arg>SELDBSL.LOG</arg>
      <arg>oramaext.sql</arg>
      <arg>ALTDBS.LOG</arg>
    </args>
    <options>
      <option name="DBTYPE" value="ORACLE" />
    </options>
    <action>Performs database-specific actions</action>
  </phase>
  <!-- (vd 610.31) DB specific ation for prepare -->
  <phase name="DB_ACTION_EXTMAN" logfile="DBACTEMA.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>EXTENT-MANAGEMENT</arg>
      <arg>EXTMAN.$(DBAEXT)</arg>
      <arg>EXTMAN.LOG</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="ORACLE" />
    </options>
    <action>Determines extent management on database Oracle</action>
  </phase>
  <!-- (ae 710) MSS only -->
  <phase name="MSSQL_SCHEMA_PRE" logfile="auto" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>Check if database schema should be converted</action>
  </phase>
  <phase name="CNV_CHK_GEN" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>I</arg>
    </args>
    <action>Finds outstanding conversions and restart logs of terminated conversions</action>
    <usage>Make conversions (after discussion with SAP consultant)if necessary</usage>
  </phase>
  <phase name="CHK_ICNVFLAGS" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <action>Checks if clusters with ICNV Flag exist</action>
    <usage>remove ICNV flags if necessary</usage>
  </phase>
  <phase name="TRBATCHK_GEN" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <action>Checks whether table TRBAT is empty</action>
    <usage>Perform any actions specified by SAPup</usage>
  </phase>
  <phase name="CLNT_CHK_GEN" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>CLNTOUT.LOG</arg>
      <arg>LOCKED_CLIENT-&gt;&gt;&gt;</arg>
    </args>
    <action>Checks whether clients are locked for SAP system upgrade</action>
    <usage>Unlock clients for SAP system upgradeif necessary</usage>
  </phase>
  <!-- (vd 620.32) BW Phase only -->
  <phase name="SCRIPT_TST_DDART" logfile="auto" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>CUSTTA.XQL</arg>
      <arg>CUSTTA.LOG</arg>
      <arg>CUSTTA =</arg>
      <arg>ONLY_TRUE</arg>
      <arg>ReqCUSTTA</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="startcomponent" value="SAP_BW" />
    </options>
    <action>Checks entries in table TA&lt;DBA&gt; and IA&lt;DBA&gt;</action>
    <usage>If errors occursee &lt;b&gt;SAP Note 500252&lt;/b&gt;</usage>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- (ps 710-1.31) new phase from Kerstin H. for repairing cluster nametabs -->
      <phase name="JOB_RADNTABCOR" logfile="auto" elgfile="auto" password="WJOGCDWP">
           <!-- pwd: 18134 -->   
        <!-- (jo 720) Diskussion with Kerstin: Is present in 731 aka 703, so use 'realdestvers' -->
        <args>
          <arg>RADNTABCOR</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RADNTABCOR\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CORRECT CLUSTER NAMETAB</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="realdestvers" value="710-759" />
        </options>
        <action>Corrects nametabs of cluster table</action>
      </phase>
      <!-- (vd 610.2.07) BW Phase only -->
      <phase name="JOB_RSAUCHK_DUP" logfile="RSAUCHKD.LOG" elgfile="auto" password="KABYXBZW">
           <!-- pwd: 47366 -->   
        <args>
          <arg>RSAU_CHECK_DUPRECS_RSUPDINFO</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPDINFO\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CHECK DUPLICATE F-RULES</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
        </options>
        <action>Checks for double F rules</action>
        <usage>See SAP Note 431886</usage>
      </phase>
      <!-- (ps 610.110) BW Phase only -->
      <phase name="JOB_RSAODSACTIVATE_PRE" logfile="auto" elgfile="auto" password="WFJPKDCF">
           <!-- pwd: 60928 -->   
        <args>
          <arg>RSAODSACTIVATE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSATADIR\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>TADIR-CLEANING</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="startcomponent" value="SAP_BW" />
        </options>
        <action>Performs TADIR cleaning</action>
      </phase>
      <!-- (ps 640-2.44) new check from HJL -->
      <phase name="JOB_RSTLIBG" logfile="auto" elgfile="auto" password="MVWDHMJL">
           <!-- pwd: 5514 -->
        <args>
          <arg>RSTLIBG</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSTLIBG\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>GENERATE REPORTS</arg>
        </args>
        <action>Checks TADIR objects</action>
      </phase>
      <!-- (af 640.02) according to Ralph Schubert this phase is still needes -->
      <!-- (ps 620-5.110) APO Phase only -->
      <phase name="JOB_STRU_TADIR_GEN_1" logfile="PSTRUGEN.LOG" elgfile="auto" password="YVGUKZWN">
           <!-- pwd: 68913 -->   
        <args>
          <arg>/SAPAPO/EXTR_STRU_TADIR_GEN</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>EXTR_STRU_TADIR_GEN\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>TADIR-INSERT</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="destcomponent" value="SCM" />
        </options>
        <action>Performs TADIR insert</action>
      </phase>
      <!-- (ps 700-1.100) APO Phase only -->
      <phase name="JOB_SDLINIT_TABLES_70" logfile="PSDLINIT.LOG" elgfile="auto" password="IEDAJFBM">
           <!-- pwd: 40231 -->   
        <args>
          <arg>RSSM_PREPARE_SDLINIT_TABLES_70</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>PREPARE_SDLINIT_TABLES_70\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>SDLINIT_PREP</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_APO" />
        </options>
        <action>Performs SDLINIT preparations</action>
      </phase>
      <!-- (vd 610.2.18) BW Phase only -->
      <phase name="JOB_RSUPGRCHECK_PRE" logfile="auto" elgfile="auto" password="WCPMDDNE">
           <!-- pwd: 11646 -->   
        <args>
          <arg>RSUPGRCHECK</arg>
          <arg>SAP&amp;VAR1</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPGRCHECK\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>ACTIVATION CHECK</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
        </options>
        <action>Checks consistency of generated repository</action>
      </phase>
      <!-- (vd 610.2.19) BW Phase only -->
      <phase name="JOB_RSMD_UPGR_PRE" logfile="PSMDCHK.LOG" elgfile="auto" password="CHOKYROF">
           <!-- pwd: 81640 -->   
        <args>
          <arg>RSMD_UPGR_CHECK</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>CNVEXIT\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>ALPHA CONVERSION CHECK</arg>
        </args>
        <options>
          <!-- only run on BW <3.0, see SAP note 1617985 -->
          <option name="startcomponent" value="SAP_BW(*-21C)" />
    	  <not><option name="realdestvers" value="740-799" /></not>
        </options>
        <action>Performs component-specific checks</action>
      </phase>
      <!-- (ps 710-7) BW Phase only from Juergen Quentel -->
      <phase name="JOB_RSB_CREATE_TADIR" logfile="PSRSBCRTA.LOG" elgfile="auto" password="SUMNHLPW">
           <!-- pwd: 94221 -->   
        <args>
          <arg>RSB_CREATE_TADIR_INFOSPOKE_STR</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSB_INFOSPOKE\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>TADIR CHK</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
          <option name="ST_range" value="610-640" />
        </options>
        <action>Performs component-specific checks</action>
      </phase>
      <!-- (ps 700.56) BW Phase only -->
      <phase name="JOB_RSODSO_GUID_CHK" logfile="auto" elgfile="auto" password="EWIWUCUS">
           <!-- pwd: 9911 -->   
        <args>
          <arg>RSODSO_XPRA_GUID_TO_SID_CHK</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSODSOCHK\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>GUID CHK</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
          <option name="ST_range" value="610-640" />
        </options>
        <action>Performs component-specific checks</action>
      </phase>
      <!-- (af 700) contact: Sophie Kraut, Jenni Wellenreich -->
      <phase name="JOB_CRM_UPGRADE50" logfile="CRM_UPGRADE50.LOG" elgfile="auto" password="QOIFNPTA">
           <!-- pwd: 33718 -->   
        <!-- (jo 710) See IM 3150783 2008 for condition -->
        <args>
          <arg>CRM_UPGRADE50_COMC_ATTRIBUTE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>COMC_ATTRIBUTE\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Remove duplicate records from COMC_ATTRIBUTE</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="startcomponent" value="BBPCRM" />
          <option name="destcomponent" value="BBPCRM" />
        </options>
        <action>Removes duplicate table entries</action>
      </phase>
      <!-- (ps 700-1.65) BW Phase only from M.Lux -->
      <phase name="JOB_SDLINIT_TABLES_PRE" logfile="RSSM_SDLINIT.LOG" elgfile="auto" password="CRUUERMR">
           <!-- pwd: 34594 -->   
        <args>
          <arg>RSSM_PREPARE_SDLINIT_TABLES_40</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>PREPARE_SDLINIT_TABLES_40\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>BW checks</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
          <option name="ST_range" value="620-640" />
        </options>
        <action>Performs BW specific checks</action>
      </phase>
      <!-- (ps 700-1.65) BW Phase only from M.Lux -->
      <phase name="JOB_CHECK_RSMONICDP_PRE" logfile="RSSM_RSMONICDP.LOG" elgfile="auto" password="OCDEFTTC">
           <!-- pwd: 13107 -->   
        <args>
          <arg>RSSM_CHECK_RSMONICDP_3X_40</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>CHECK_RSMONICDP_3X_40\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>BW checks</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
          <option name="ST_range" value="610-640" />
        </options>
        <action>Performs BW specific checks</action>
      </phase>
      <!-- (vd 46C.57) BW Phase only (ps 620-3.76) moved directly infront of NTACT_CHK -->
      <phase name="JOB_DROP_TMPOBJ_PRE" logfile="RSDR_NAMT_CL.LOG" elgfile="auto" password="SANGVLTY">
           <!-- pwd: 63887 -->   
        <args>
          <arg>RSDR_UPG_DROP_TMPOBJECTS</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSDRTMP\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CLEAR NAMETAB</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
        </options>
        <action>Deletes invalid nametab entries</action>
      </phase>
      <if test="0">
        <!-- (ps 620-5.22) APO Phase only -->
        <phase name="JOB_WFM_BEFORE" logfile="auto" elgfile="auto" password="QIHMZPPY">
             <!-- pwd: 28996 -->   
          <args>
            <arg>/SAPAPO/WFM_BEFOR_UPGRADE3031</arg>
            <arg></arg>
            <arg>NO-IGNORE</arg>
            <arg>WFM_BEFOR_UPGRADE3031\.$(SAPSID)</arg>
            <arg>10</arg>
            <arg>Consistence check</arg>
          </args>
          <options>
            <option name="ST_range" value="*-610" />
            <option name="destcomponent" value="SCM" />
          </options>
          <action>Performs consistence check</action>
        </phase>
      </if>
      <!-- (ps 640-1.55) APO Phase only -->
      <!-- contact: Thomas Roesch, Jochen Bergmann -->
      <phase name="JOB_TS_UPG41" logfile="TS_UPG41.LOG" elgfile="auto" password="KVYGUBAD">
           <!-- pwd: 66191 -->   
        <args>
          <arg>/SAPAPO/TS_UPG41_INDEX_PREPARE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>TS_UPG41_INDEX_PREPARE\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Index check</arg>
        </args>
        <options>
          <option name="ST_range" value="*-620" />
          <option name="destcomponent" value="SCM" />
        </options>
        <action>Performs index check</action>
      </phase>
    </phaselist>
  </submodule>
  <!-- (ps 46B.04) new phase CHKANT -->
  <phase name="NTACT_CHK" logfile="auto" elgfile="auto" password="YXPJGZGF">
       <!-- pwd: 55238 -->   
    <args>
      <arg>CHKANT</arg>
      <arg>NOBUFRESET</arg>
      <arg></arg>
    </args>
    <action>Checks the consistency of the nametab entries</action>
    <usage>Perform any actions specified by SAPup</usage>
  </phase>
  <phase name="INTCHK_GEN" password="SNNTILGL">
       <!-- pwd: 18802 -->   
    <args>
      <arg>INTCHK_SW</arg>
    </args>
    <action>Checks whether the inactive nametab is empty</action>
  </phase>
  <phase name="SINXCHK" logfile="auto" password="EHEMENGZ">
       <!-- pwd: 66195 -->   
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks the consistency of the indexes in the substitution tables</action>
    <usage>Delete indexes if necessary</usage>
  </phase>
  <phase name="VIEWCHK_PRP" logfile="auto" password="GAVULJPI">
       <!-- pwd: 89289 -->   
    <args>
      <arg>VIEWCHK</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks for conflicts between customer tables </action>
    <action>in the SAP name range and delivered views</action>
    <usage>Delete tablesif necessary</usage>
  </phase>
  <phase name="ENVFILES_CHECK" logfile="ENVFILES_CHK.LOG" password="IIIRBFVW">
       <!-- pwd: 92863 -->   
    <args>
      <arg>CHECK</arg>
    </args>
    <action>Checks whether profiles of user &lt;sapsid&gt;adm can be modified</action>
    <usage>Assign write authorization to the user profilesif necessary</usage>
  </phase>

  <phase name="REQ_FRONTREQ_PRE" password="YLAKEZYB">
    <!-- pwd: 80490 -->   
    <args>
      <arg>ReqUpdateFrontEnd</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <action>Displays information about the upgrade of the front end software</action>
    <usage>Upgrade the front end softwareif necessary</usage>
  </phase>

  <!-- (vd 46B.04) -->
  <phase name="UVERS_CHK_GEN" logfile="auto" password="MDTYRMXF">
       <!-- pwd: 2995 -->   
    <args>
      <arg>IT</arg>
    </args>
    <action>Checks consistency of table UVERS</action>
  </phase>
  <phase name="BATCHCHK_GEN" logfile="auto" password="UZSUQHGJ">
       <!-- pwd: 89147 -->   
    <action>Tests whether background server can access the upgrade directory</action>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <phase name="JOB_RSVBCHCK_PRE" logfile="auto" elgfile="auto" password="WJOGCDWP">
           <!-- pwd: 45107 -->   
        <args>
          <arg>RSVBCHCK</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSVBCHCK\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CHECK OF UPDATE TASK</arg>
        </args>
        <action>Checks whether outstanding updates tasks and queued RFCs exist</action>
        <usage>Check outstanding update tasks with transaction SM13 and queued RFCs with transaction SMQ1</usage>
      </phase>
      <!-- (jo 620.25) -->
      <phase name="RUN_RSDB02CK_INI" logfile="RSDB02CK.LOG" elgfile="auto" password="YDDPUZKH">
           <!-- pwd: 70121 -->   
        <args>
          <arg>RSDB02CK</arg>
          <arg>SAP_GET_INI</arg>
          <arg>IGNORE</arg>
          <arg>RSDB02IN\.$(SAPSID)</arg>
          <arg>30</arg>
          <arg>DB02 consistency check</arg>
        </args>
        <options>
	  <or>
            <option name="feature_switch" value="/fa/db02chk" />
	    <option name="MIGRATE_SECONDDB" />
	  </or>
        </options>
        <action>Runs DB02 like consistency check</action>
      </phase>     
      <!-- (jo 640.04) Call RSCHECKEXC (see note) -->
      <phase name="RUN_RSCHECKEXC" logfile="auto" elgfile="auto" password="WFJPKDCF">
           <!-- pwd: 27637 -->   
        <args>
          <arg>RSCHECKEXC</arg>
          <arg>SAP_UPG</arg>
          <arg>IGNORE</arg>
          <arg>RSCHKEXC\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Check tables in exchange containers</arg>
        </args>
        <options>
          <option name="ST_range" value="600-6ZZ" />
          <option name="startcomponent" value="SAP_APPL" />
        </options>
        <action>Find tables in exchange table space that are not exchanged (&lt;b&gt; SAP Note 674070&lt;/b&gt;)</action>
      </phase>
      <!-- cv -->
      <phase name="JOB_RSUPG_DBDIFF_PRE" logfile="PUPGDBDIFFPRE.LOG" elgfile="PUPGDBDIFFPRE.ELG" password="SNNTILGL">
        <!-- pwd: 18802 -->   
        <args>
          <arg>RSUPG_DBDIFF</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSUPG_DBDIFF\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>DATABASE CLEANUP</arg>
        </args>
        <options>
          <option name="DBTYPE" value="HDB" />
        </options>
        <action>Cleans up table DBDIFF in the database</action>
      </phase>
    </phaselist>
  </submodule>
  <!-- (stm 620) -->
  <phase name="SCRIPT_TST_TCPDB" logfile="auto" password="CYOWKGMQ">
       <!-- pwd: 2600 -->   
    <args>
      <arg>TCPDB.XQL</arg>
      <arg>TCPDB.LOG</arg>
      <arg>CODEPAGE =</arg>
      <arg>ONLY_FALSE</arg>
      <arg></arg>
      <arg>ReqTCPDA</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <not>
        <option name="UNICODE_only" />
      </not>
    </options>
    <action>Checks code page settings</action>
    <usage>See &lt;b&gt;SAP Note 15023&lt;/b&gt;if necessary</usage>
  </phase>
  <!-- (jo 720) See note 1450178 for details -->
  <phase name="SCRIPT_TST_TCP0C" logfile="auto" password="GBTVWJUR">
       <!-- pwd: 59052 -->   
    <args>
      <arg>TCP0C.XQL</arg>
      <arg>TCP0C.LOG</arg>
      <arg>BADCHAR =</arg>
      <arg>ONLY_TRUE</arg>
      <arg>ReqTCP0C</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks invalid mapping for umlaut characters</action>
    <usage>See &lt;b&gt;SAP Note 1450178&lt;/b&gt;if necessary</usage>
  </phase>
  <!-- (ps 620.uc) -->
  <phase name="SCRIPT_TST_TCPDB_UC" logfile="auto" password="QVHZMPCL">
       <!-- pwd: 56325 -->   
    <args>
      <arg>TCPDB.XQL</arg>
      <arg>TCPDB.LOG</arg>
      <arg>CODEPAGE =</arg>
      <arg>ONLY_TRUE</arg>
      <arg>ReqTCPDBUC</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="UNICODE_only" />
    </options>
    <action>Checks code page settings</action>
    <usage>See &lt;b&gt;SAP Note 15023&lt;/b&gt;if necessary</usage>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- (ps 640-2.39) Check for SRM upgrade only -->
      <phase name="JOB_SRM_PRE_CHECKS_1" logfile="PSRMPRE.LOG" elgfile="auto" password="WMVWJDLQ">
           <!-- pwd: 37086 -->   
        <args>
          <arg>BBP_UPGR_PREPHASE_CHECK</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>BBP_UPGR_PREPHASE_CHECK\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>SRM specific checks</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="destcomponent" value="SRM_SERVER" />
          <option name="startcomponent" value="BBPCRM" />
        </options>
        <action>SRM specific checks</action>
      </phase>
      <!-- (af 700) check BALHDR consistency (as of nw2004 sr1) -->
      <!-- Contact: Erhard Viek -->
      <phase name="JOB_NRIV_BALHDR_COMPARE" logfile="auto" elgfile="auto" password="CZZKVGRZ">
           <!-- pwd: 6418 -->   
        <args>
          <arg>SBAL_NRIV_BALHDR_COMPARE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>SBAL_NRIV_BALHDR_COMPARE\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>compare BALHDR against NRIV</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="ST_range" value="46C-*" />
        </options>
        <action>compare BALHDR against NRIV</action>
      </phase>
      <!-- (af 710) Banking Platform specific -->
      <!-- Contact: Matthias Nahrgang -->
      <!-- via mail: Das Programm soll nur im Upgrade (kein EHPI) laufen,  -->
      <!--           wenn FSAPPL im Zielrelease vorhanden ist              -->
      <phase name="JOB_RBCA_FSP_UPG_CHECK" logfile="auto" elgfile="auto" password="IAYJRFHC">
           <!-- pwd: 17253 -->   
        <args>
          <arg>RBCA_FSP_UPG_CHECK</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RBCA_FSP_UPG_CHECK\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Banking Platform specific checks</arg>
        </args>
        <options>
          <option name="ST_range" value="620-*" />
          <option name="proddestvers" value="710-*" />
          <option name="MODE" value="EXPORT" />
          <option name="destcomponent" value="FSAPPL" />
        </options>
        <action>Banking Platform specific checks</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (jo 710) Check if start profile can be merged later on -->
  <phase name="MERGEPROF_CHECK" logfile="auto" password="MQLQXXTE">
       <!-- pwd: 91684 -->   
    <args>
      <arg>CHECK</arg>
    </args>
    <options>
      <option name="MERGESTARTPROF" />
    </options>
  </phase>
  <!-- (jo 710) Check codepages for new languages (Tamara Weckwerth) -->
  <phase name="CHECKLANGCP_PREP" password="YOHALZNC">
       <!-- pwd: 57484 -->   
    <args>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="feature_switch" value="/lang/codepagecheck" />
    </options>
  </phase>
  <phase name="UPDATE_DBSTATS_DB2_ACTREF_CHK" password="YDDPUZKH">     <!-- pwd: 70121 -->
    <args>
      <arg>FILE</arg>
      <arg>bin</arg>
      <arg>DB2RUNPH.LST</arg>
      <arg>ACTREF_CHK=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
        <option name="DBTYPE" value="DB2-z/OS" />
    </options>
  </phase>
  <phase name="ACTREF_CHK" logfile="RSTODIRX.LOG" password="YHIGMZER">
       <!-- pwd: 70598 --> 
     <options>
       <option name="MODE" value="EXPORT" />
     </options>
     <action>Checks whether activation errors might occur during the installation</action>
    <usage>Remove references to SAP objects which will be deleted</usage>
  </phase>

  <!--  Tino Rosenkranz: Prepare objects for rescue check  -->
  <phase name="JOB_UPG_RESC_CHECK_CR" logfile="auto" elgfile="auto" password="MBCOOXWZ">
       <!-- pwd: 73324 -->   
    <args>
      <arg>UPG_RESC_CHECK_CREATE</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_RESC_CHECK_CREATE.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>object rescue check</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/object_rescue" />
     <!-- <option name="ST_range" value="600-*" /> -->
    </options>
  </phase>
  <!--  Tino Rosenkranz: Check imported classic BADI objects before update -->
  <phase name="RUN_CLASSIC_BADI_CHECK" logfile="auto" elgfile="auto" password="MEJEVXLA">
       <!-- pwd: 68057 -->   
    <args>
      <arg>UPG_CLASS_BADI_CHECK</arg>
      <arg>CHECK_CLASS_BADI_SREL</arg>
      <arg>IGNORE</arg>
      <arg>UPG_CLASS_BADI_CHECK_PREP.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>classic BADI check</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/badi_check" />
      <option name="SECOND_SHD" />
      <!-- <option name="MODE" value="CLONE" />  -->
    </options>
  </phase>
  <!--  Tino Rosenkranz: Check imported Kernel BADI objects before update -->
  <phase name="RUN_KERNEL_BADI_CHECK" logfile="auto" elgfile="auto" password="YAWZNZVG">
       <!-- pwd: 96861 -->   
    <args>
      <arg>Z_BADI_CHECK</arg>
      <arg>CHECK_KERNEL_BADI_SREL</arg>
      <arg>IGNORE</arg>
      <arg>Z_BADI_CHECK_PREP.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Kernel BADI check</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/badi_check" />
      <option name="ST_range" value="700-*" />
      <option name="startcomponent" value="SAP_BASIS(700(15-*))" />
    </options>
  </phase>

  <!-- ak 11/2013 -->
  <phase name="JOB_ZUPGMODEHPI_VERIFY" logfile="auto" elgfile="auto" password="EASFFNXO" continue_on_oq_errors="true">
       <!-- pwd: 78049 -->   
    <args>
      <arg>ZUPGMODEHPI_VERIFY</arg>
      <arg>SAP&amp;_CHECK_IMP</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZUPGMODEHPI_VERIFY_C\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Check state of test CMOD</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="feature_switch" value="/fa/cmod_check" />
      <option name="feature_switch" value="cmod_disabling" />
      <not>
        <option name="NOSTACKFILE" value="TRUE" />
      </not>
    </options>
    <action>Check initial state of test candidate for CMOD disableing/re-enabling verification</action>
  </phase>

  <!-- ********************************************************************************************** -->
  <submoduleref name="SUBMOD_MIG_PRPCHECKS" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <options>
      <option name="MIGRATE_SECONDDB" />
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
    </options>
  </submoduleref>
  
  <phase name="RFCTRUST_AUTHORITY_CHECK" logfile="RFCTRUSTA.LOG" password="SJICQLMB">
    <!-- pwd: 57708 -->   
    <args>
      <arg>AUTHORITY_CHECK</arg>
    </args>
    <options>
      <option name="feature_switch" value="rfc_trusted_system" />
    </options>
    <action>Authority Check for trusted RFC</action>
  </phase>
  
</phaselist>
</module>
 
 
 <module name="PREP_SPACECHECKS" type="prepare" mandatory="yes" checkmode="yes" errignorable="yes">
      <description>Space checks</description>
      <revokemodule>REV_PRPCHECKS</revokemodule>
      <password>EHRZENGZ</password>
      <!--  pwd: 88506  -->
      <precedences>
        <precedence>PREP_SPACECALC</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPSpaceChecks.xml#11 $">
  <!-- (jo 720) -->
  <!-- ************************************************************ -->
  <!-- Space checks -->
  <!-- ************************************************************ -->
  <phase name="FREECHK" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>FSFX.SPC</arg>
      <arg>ToolVers.xml</arg>
      <arg>NEW</arg>
    </args>
    <action>&lt;p&gt;Checks disk space for logs and SAP kernel&lt;/p&gt;</action>
    <action>Checks whether the SAP kernel can be overwritten</action>
    <usage>&lt;p&gt;Increase disk space, if necessary&lt;/p&gt;</usage>
    <usage>Check SAP kernel write authorization, if necessary</usage>
  </phase>
  <!-- **************************************************************************** -->
  <phase name="SPACECHK_OPT" logfile="DBFPLUSD.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg>DBFPLUSD.SPC</arg>
      <arg>DBFPLUSD.RES</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg>MODE=ALL</arg>
    </args>
    <action>Checks database free space</action>
    <usage>Extend the databaseif necessary</usage>
  </phase>
</phaselist>

    </module>
    <module name="PREP_ACTCONVCHECKS" type="prepare" mandatory="yes" checkmode="yes" errignorable="yes">
      <description>Activation and conversion checks</description>
      <options>
        <option name="MODE" value="EXPORT" />
      </options>
      <revokemodule>REV_PRPOPTCHECKS</revokemodule>
      <password>MCNCZXBI</password>
      <!--  pwd: 68574  -->
      <precedences>
        <precedence>PREP_INTEGRATION</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPConvChecks.xml#15 $">
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- ************************************************************ -->
      <!-- Activation and conversion checks (CHECK) -->
      <!-- ************************************************************ -->
      <!-- (mh 620/4.14) check of DDIC Enhancement category -->
      <phase name="RUN_RSUPGDEC_PRE" logfile="RSUPGDEC.LOG" elgfile="RSUPGDEC.ELG" password="QCGTLPLW">
           <!-- pwd: 13817 -->   
        <args>
          <arg>RSUPGDEC</arg>
          <arg>SAP_EXT</arg>
          <arg>IGNORE</arg>
          <arg>RSUPGDEC\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Check of DDIC Enhancement Category</arg>
        </args>
        <action>Checks if current structure extensions collide with the DDIC enhancement category of the target release</action>
        <usage>Adjust include or consider help from SAP &lt;b&gt;SAP Note 493387&lt;/b&gt;</usage>
      </phase>
      <!-- (ps 620-4.22) APO Phase only -->
      <phase name="JOB_MC01_CACL_CDP_PRE" logfile="CDPCON.LOG" elgfile="CDPCON.ELG" password="EASFFNXO">
           <!-- pwd: 78049 -->   
        <!-- (af 2003/03/14) variant needed due to job handling bug -->
        <args>
          <arg>/SAPAPO/MC01_CACL_CDP_CONSIST</arg>
          <arg>SAP&amp;MC01_CONS</arg>
          <arg>NO-IGNORE</arg>
          <arg>MC01_CACL_CDP_CONSIST\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Consistence check</arg>
        </args>
        <options>
          <option name="ST_range" value="*-610" />
          <option name="destcomponent" value="SCM" />
        </options>
        <action>Performs consistence check</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- ************************************************************ -->
  <!-- Necessary checks for conversions (CHECK) -->
  <!-- ************************************************************ -->
  <phase name="REQ_APOUPG0" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>ReqAPOCheck</arg>
      <arg></arg>
    </args>
    <options>
      <option name="WITH_LIVECACHE" />
    </options>
    <action>Prompts for checks for the LiveCache</action>
    <usage>Save the live cache: follow the instructions given in the manual</usage>
  </phase>

  <!-- ************************************************************ -->
  <!-- Optional checks for conversions (CHECK+OPT) -->
  <!-- ************************************************************ -->
  <phase name="CNV_LIST" logfile="CNVLIST.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <args>
      <arg>CONVTABS.TUL</arg>
      <arg>TABCONV.LST</arg>
      <arg>0</arg>
      <arg>DEFAULT.TPP</arg>
    </args>
    <action>Finds tables that are converted during the upgrade (if known to SAP) and lists them in a file</action>
  </phase>

</phaselist>

    </module>
    <module name="PREP_PREPROC" type="prepare" errignorable="yes">
      <description>Preliminary upgrade processing</description>
      <revokemodule>REV_PRPOPTCHECKS</revokemodule>
      <password>WKMHNDBY</password>
      <!--  pwd: 83890  -->
      <precedences>
        <precedence>PREP_INTEGRATION</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupPRPPreProc.xml#34 $">
  <!-- ************************************************************ -->
  <!-- Pre-processing (CHECK+OPT) -->
  <!-- ************************************************************ -->
  <!-- (ps 640-2.49) -->
  <phase name="SAVE_VAR_CHK" logfile="SAVEVARCHK.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="ST_range" value="40B-*" />
      <option name="HASSHADOW" />
    </options>
    <action>Requests SAVE_VAR information</action>
    <usage>Answer SAVE_VAR prompt</usage>
  </phase>

  <!--   cv   -->
  <submodule password="KRGCCBGT" execparallel="true">
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <phaselist>
      <phase name="RUN_RSWBO230_PRE" logfile="PSWBO230.LOG" elgfile="PSWBO230.ELG" password="EASFFNXO">
           <!-- pwd: 78049 -->   
        <args>
          <arg>RSWBO230</arg>
          <arg>SAP_KDELSTRT</arg>
          <arg>IGNORE</arg>
          <arg>RSWBO230\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>SAPK... COMMANDFILE DELETION</arg>
        </args>
        <action>Deletes SAP requests from previous upgrades</action>
      </phase>
      <!-- (ps 640-2.49) -->
      <phase name="JOB_RASUVAR1" logfile="PASUVAR1.LOG" elgfile="PASUVAR1.ELG" password="AWHKBVTQ">
           <!-- pwd: 53084 -->   
        <args>
          <arg>RASUVAR1</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RASUVAR1\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>save variants</arg>
        </args>
        <options>
          <option name="SAVE_VARIANTS" />
        </options>
        <action>save variants, see note 712297</action>
      </phase>
    </phaselist>
  </submodule>
    
  <!-- ****************************************************************************** -->
  <submoduleref name="SUBMOD_MIG_BI_TASKS_PREP" password="YDDPUZKH">
    <!-- pwd: 70121 -->
    <options>
      <option name="MIGRATE_OPTION" value="BWTASKS" />
    </options>
  </submoduleref>

  <!-- ****************************************************************************** -->
  <submoduleref name="SUBMOD_MIG_BI_TASKS_SHD" password="YDDPUZKH">
    <!-- pwd: 70121 -->
    <options>
      <option name="MIGRATE_OPTION" value="BWTASKS" />
    </options>
  </submoduleref>

  <submodule password="KRGCCBGT">
    <options>
      <option name="ASU_ONLY" />
    </options>
    <phaselist>
      <phase name="MODFILE_ASUGEN" logfile="auto" password="YLAKEZYB">
       <!-- pwd: 80490 -->   
       <args>
	 <arg>COMMANDFILE</arg>
	 <arg>ASUGEN.LST</arg>
       </args>
       <action>Generate ASU.XML</action>
      </phase>

      <phase name="REQ_ASU_RUN" password="OCDEFTTC">
	<!-- pwd: 74999 -->
	<args>
	  <arg>ReqASUPre</arg>
	  <arg></arg>
	</args>
	<action>ASU: Requests the start of the ASU toolbox</action>
      </phase>
    </phaselist>
  </submodule>
</phaselist>

    </module>
    <!-- ******************************************************************* -->
    <!-- **********               UPGRADE MODULES                *********** -->
    <!-- ******************************************************************* -->
    <module name="MAIN_INIT" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Configuration and Initialization</description>
      <postevent>MODULE_INIT(MAIN_DTTRANSEUI)</postevent>
      <revokemodule>REV_PREPROC</revokemodule>
      <password>GISPVJDC</password>
      <!--  pwd: 26345  -->
      <precedences>
        <precedence>PREP_INTEGRATION</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINInit.xml#136 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Initialization -->
  <!-- ************************************************************ -->
  <!-- ************************************************************ -->
  <!--     phases for Initialization   -->
  <!-- ************************************************************ -->
  <phase name="BEGIN" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>LOGUPGENV;CHECKPHASEOPTS=ALL</arg>
    </args>
    <action>Checks upgrade directory</action>
  </phase>

  <!--  This is to discover bugs in the analysis of the full UPGANA in the continous generation code  -->
  <phase name="CREATE_UPGEVAL_EARLY" password="CMRCBRNY">
       <!-- pwd: 65164 -->
    <args>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/early_create_upgeval" />
    </options>
  </phase>

  <phase name="DBCHK" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>CHECK_UPGCOND</arg>
    </args>
    <action>Determines database version and SAP release</action>
  </phase>

  <phase name="ORA_ADJUSTDB" logfile="auto" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>BRCONN_UPGRFIX.LOG</arg>
    </args>
    <options>
      <option name="DBTYPE"        value="ORACLE" />
      <option name="destcomponent" value="SAP_BASIS(740(8-*))"/>
    </options>
    <action>Fixes some roles and grants for Oracle on 7.40 SP8 and higher</action>
  </phase>

  <!-- (jo 720) Maybe meanwhile new tabarts were created, so repeat this phase  -->
  <phase name="INIT_CNTRANS_NEW2" logfile="INICNTDEST2.LOG" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <args>
      <arg>MAP4NEW</arg>
      <arg>SELTAIA.$(DBAEXT)</arg>
      <arg>SELTAIA.LOG</arg>
      <arg>SELDBS.$(DBAEXT)</arg>
      <arg>SELDBS.LOG</arg>
      <arg>TAIA$(DBAEXT).SAP</arg>
      <arg>TAIATRANS.DAT</arg>
    </args>
  </phase>
  
  <!-- (ps 700.16) checks if a J2EE is running also -->
  <!-- (jo 720) This must run for ByDesign as well, otherwise we never detect if a JAVA system is present! -->
  <phase name="J2EE_CHK2" logfile="auto" elgfile="auto" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <action>Checks if J2EE is also running</action>
    <usage>info</usage>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_UPGR_STARTED" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>UPGRADE</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_PREUP_STARTED" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <args>
      <arg>PREUPTIME</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="VERSCHK" password="SJICQLMB">
       <!-- pwd: 57708 -->
    <args>
      <arg></arg>
    </args>
    <action>Checks SAP release</action>
    <usage>Upgrade to a valid source release first if necessary</usage>
  </phase>
  <!-- ** Access Test -->
  <!-- (vd 46B.04) -->
  <phase name="UVERS_CHK" logfile="auto" elgfile="auto" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
      <arg>T</arg>
    </args>
    <action>Checks consistency of table UVERS</action>
  </phase>
  <phase name="BATCHCHK" logfile="auto" elgfile="auto" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <action>Tests whether background server can access the upgrade directory</action>
  </phase>
  <!-- ** Environment Scan -->
  <phase name="PATCH_CHK" password="YAWZNZVG">
       <!-- pwd: 79932 -->
    <args>
      <arg></arg>
    </args>
    <action>Finds unconfirmed Support Packages and displays the result</action>
    <usage>Call transaction SPAM to confirm any unconfirmed Support Packagesif necessary</usage>
  </phase>
  <phase name="CLNT_CHK" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>CLNTOUT.LOG</arg>
      <arg>LOCKED_CLIENT-&gt;&gt;&gt;</arg>
    </args>
    <action>Checks whether clients are locked for SAP system upgrade</action>
    <usage>Unlock clients for SAP system upgradeif necessary</usage>
  </phase>
  <phase name="INTCHK" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>INTCHK_SW</arg>
    </args>
    <action>Checks whether the inactive nametab is empty</action>
  </phase>

    <phase name="TOOLVERSXML_UPG" logfile="auto" password="IKETXFFO">
        <!-- pwd: 19932 -->
        <args>
            <arg>ToolVers.xml</arg>
            <arg>SYS,EXE</arg>
            <arg /><!-- tool names -->
            <arg /><!-- misc -->
        </args>
        <options>
        </options>
        <action>Determines (all) tool version</action>
        <usage>Upgrade tools if necessary</usage>
    </phase>

  <!-- Check installed ADD-ONs -->
  <!-- (ps 620.85) -->
  <phase name="ADDON_SPEC2" logfile="auto" elgfile="auto" password="IIVEBFVW">
       <!-- pwd: 66178 -->
    <!-- cU("destcomponent=SAP_APPL"), -->
    <action>Requests add-on information</action>
  </phase>
  <!-- (ps shadow.41) -->
  <phase name="SHDINST_CHK1" logfile="auto" elgfile="auto" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <action>Checks the shadow instance</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  <phase name="SAPMMC_UPG" logfile="auto" elgfile="auto" password="AMBAVVVE">
       <!-- pwd: 12335 -->
    <args>
      <arg>INST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="OSTYPE" value="Windows" />
    </options>
    <action>Performs operating system-specific actions</action>
    <usage>Perform actions from CHECKS.LOG resp. CHECKS.TXT if necessary</usage>
  </phase>
  <phase name="CONFCHK_X" password="WJOGCDWP">
       <!-- pwd: 18134 -->
    <args>
      <arg>SECTION=UPG;MANDATORY</arg>
    </args>
    <options>
      <option name="EHP_WITH_NEWRELEASE" />
    </options>
    <action>Tests operating system and database version</action>
    <usage>Upgrade operating system and database to the required version, </usage>
    <usage>if necessary</usage>
  </phase>
  <phase name="VIEWCHK_D" logfile="VIEWCHK1.LOG" elgfile="auto" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <args>
      <arg>VIEWCHK</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Finds conflicts between delivered views and customer tables </action>
    <action>in the SAP name range</action>
    <usage>Delete tables if necessary</usage>
  </phase>
  <phase name="VIEWCHK_R" logfile="VIEWCHK1.LOG" elgfile="auto" password="WFJPKDCF">
       <!-- pwd: 60928 -->
    <args>
      <arg>NOW</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="strategy" value="Resource-minimized" />
    </options>
    <action>Finds conflicts between delivered views and customer tables </action>
    <action>in the SAP name range</action>
    <usage>Delete tables if necessary</usage>
  </phase>
  <phase name="REPACHK1" logfile="auto" elgfile="auto" password="MVWDHMJL">
       <!-- pwd: 5514 -->
    <args>
      <arg>IGNORE</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Finds SAP objects locked in repairs or requests</action>
  </phase>
  <!-- (af 700.08) Combine upgrade and Unicode Conversion? -->
  <phase name="UCMIG_STATUS_CHK" logfile="auto" elgfile="auto" password="YVGUKZWN">
       <!-- pwd: 68913 -->
    <!-- ERROR, if status is not set (cannot be ignored)Status: "Preparations on Startrelease finished (SPUMG)" -->
    <args>
      <arg>SILENT</arg>
      <arg>1</arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
    </options>
    <action>Check status of Unicode Conversion Preparations on the start release</action>
  </phase>
  <!-- (bm SP10) Consistency Check for Unicode Conversion on the start release in DMO -->
  <phase name="RUN_UMG_CCHECK_ORIG" logfile="UMG_CCHECK_ORIG.LOG" elgfile="UMG_CCHECK_ORIG.ELG" password="YVGUKZWN">
      <!-- pwd: 68913 -->
    <args>
      <arg>UMG_CCHECK_FOR_DMO</arg>
      <arg>SAP_CP_ORIG</arg>
      <arg>IGNORE</arg>
      <arg>UMG_CCHECK_ORIG\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Consistency Check for UC on the start release</arg>
    </args>
    <options>
	  <not><option name="ST_range" value="46C-46Z" /></not>
      <option name="UCMIG_INTEGRATED" />
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Execute the Consistency Check for Unicode Conversion on the start release</action>
  </phase>
  <!-- (bm SP13) Consistency Check for Unicode Conversion on the start release 4.6C in DMO -->
  <phase name="RUN_UM4_CCHECK_ORIG" logfile="UM4_CCHECK_ORIG.LOG" elgfile="UM4_CCHECK_ORIG.ELG" password="YVGUKZWN">
      <!-- pwd: 68913 -->
    <args>
      <arg>UM4_CCHECK_FOR_DMO</arg>
      <arg>SAP_CP4_ORIG</arg>
      <arg>IGNORE</arg>
      <arg>UM4_CCHECK_ORIG\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Consistency Check for UC on 4.6C start release</arg>
    </args>
    <options>
	  <option name="ST_range" value="46C-46Z" />
      <option name="UCMIG_INTEGRATED" />
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Execute the Consistency Check for Unicode Conversion on 4.6C start release</action>
  </phase>
  <!-- bm SP10) Drop vericluster tables CLU4 and VER_CLUSTR again after UC Preparation (SPUMG) finished -->
  <!-- int CSN 0000879574 2014 -->
  <phase name="SQLDB_DROP_VERICLUSTER_UCM" logfile="DROP_VERICLUSTER_UCM.LOG" password="YVGUKZWN">
       <!-- pwd: 68913 -->
    <args>
      <arg>DROP_VERICLUSTER_UCM</arg>
      <arg></arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
    </options>
    <action>Drop vericluster tables again after late unicode conversion preparation</action>
  </phase>
  <!-- (ps 620.13) fake to force ICNV from here -->
  <phase name="SQLDB_ICNVSETMINROWS" password="WCPMDDNE">
       <!-- pwd: 11646 -->
    <args>
      <arg>ICNV_SETMINROWS</arg>
      <arg></arg>
    </args>
    <options>
      <option name="HASSHADOW" />
      <option name="feature_switch" value="/fa/icnvtest" />
    </options>
    <action>Phase for test upgrades only</action>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- (ps 620.13) fake to force ICNV to here -->
      <phase name="JOB_RSVBCHCK2" logfile="auto" elgfile="auto" password="CHOKYROF">
           <!-- pwd: 81640 -->
        <args>
          <arg>RSVBCHCK</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSVBCHCK\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CHECK OF UPDATE TASK</arg>
        </args>
        <action>Checks whether outstanding updates tasks and queued RFCs exist</action>
        <usage>Check outstanding update tasks with transaction SM13 and queued RFCs with transaction SMQ1</usage>
      </phase>
      <phase name="RUN_RSWBO230" logfile="auto" elgfile="auto" password="SUMNHLPW">
           <!-- pwd: 94221 -->
        <!-- cU("ST_range=30D-31Z"), (vd 50A.11) -->
        <args>
          <arg>RSWBO230</arg>
          <arg>SAP_KDELSTRT</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSWBO230\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>SAPK... COMMANDFILE DELETION</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
        </options>
        <action>Deletes SAP requests from previous upgrades</action>
      </phase>
      <!-- ** Modification Analysis -->
      <phase name="JOB_RXPRECHK" logfile="auto" elgfile="auto" password="EWIWUCUS">
           <!-- pwd: 9911 -->
        <args>
          <arg>RXPRECHK</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RXPRECHK\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>XPRA CHECKS</arg>
        </args>
        <options>
          <option name="ST_range" value="30D-31Z" />
        </options>
        <action>Makes preliminary checks for the XPRA RLXPRA40</action>
      </phase>
       <!-- (vd 46D.BW) -->
      <phase name="JOB_RS_OLTPSOURCE" logfile="auto" elgfile="auto" password="CRUUERMR">
           <!-- pwd: 34594 -->
        <args>
          <arg>RS_OLTPSOURCE_PREUPGRADE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSOLTPSC\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>OLTPSOURCE-CLEANING</arg>
        </args>
        <options>
          <option name="startcomponent" value="SAP_BW" />
        </options>
        <action>Performs OLTP source cleaning</action>
      </phase>
      <!-- (vd 46D.BW) -->
      <phase name="JOB_RSAODSACTIVATE" logfile="auto" elgfile="auto" password="OCDEFTTC">
           <!-- pwd: 13107 -->
        <args>
          <arg>RSAODSACTIVATE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSATADIR\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>TADIR-CLEANING</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="startcomponent" value="SAP_BW" />
        </options>
        <action>Performs TADIR cleaning</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (fhw 700) DB6 only -->
  <phase name="CHK_DB6_REG_UPG" password="QIHMZPPY">
       <!-- pwd: 28996 -->
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Checks DB6 registry parameters</action>
  </phase>
  <!-- (vd 620.32) DB specific ation for DB6 -->
  <!-- (fhw 700) moved here -->
  <phase name="DB_ACTION_RUNSTATS" logfile="DBACTRUN.LOG" password="KVYGUBAD">
       <!-- pwd: 66191 -->
    <args>
      <arg>RUNSTATS</arg>
      <arg></arg>
      <arg></arg>
      <arg></arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Remove volatile flags</action>
  </phase>
  <!-- (fhw 700) DB6 only -->
  <phase name="CHK_DB6_PAR_UPG" password="YXPJGZGF">
       <!-- pwd: 55238 -->
    <args>
      <arg>DB6PARAM.LST</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Checks DB6 parameters</action>
  </phase>
  <!-- (fhw 710) DB6 only -->
  <phase name="CHK_DB6_4K_TBSP_UPG" password="SNNTILGL">
       <!-- pwd: 18802 -->
    <args>
      <arg>DB6CHK4K</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="DBTYPE" value="DB6" />
      <not>
        <option name="UNICODE_only" />
      </not>
    </options>
    <action>Checks for 4k tbsp on NUC DB6 systems</action>
  </phase>
  <phase name="SPACECHK_ALL" logfile="DBFPLUSD.LOG" elgfile="auto" password="EHEMENGZ">
       <!-- pwd: 66195 -->
    <args>
      <arg>DBFPLUSD.SPC</arg>
      <arg>DBFPLUSD.RES</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg>MODE=ALL</arg>
    </args>
    <action>Checks free space on the database</action>
    <usage>Extend the database if necessary</usage>
  </phase>
  <phase name="FREECHK_X" password="GAVULJPI">
       <!-- pwd: 89289 -->
    <args>
      <arg>FSFX.SPC</arg>
      <arg>ToolVers.xml</arg>
      <arg>NEW</arg>
    </args>
    <action>Checks free space in the file system</action>
    <usage>Confirm Enlarge the file system if necessary</usage>
  </phase>
  <!-- (stm 610.2.01) table space measurements -->
  <phase name="DMPSPC_X" logfile="auto" elgfile="auto" password="IIIRBFVW">
       <!-- pwd: 92863 -->
    <args>
      <arg></arg>
      <arg>DMPSPC_X.FRE</arg>
      <arg>DMPSPC_X.ALL</arg>
      <arg>table space sizes at X</arg>
    </args>
    <action>Provides information on freespace in the database</action>
  </phase>
  <!-- ************************************************************ -->
  <!--    phases for Bulk Transfer  -->
  <!-- ************************************************************ -->
  <!--  (jo + cv) This must not run in parallel!  -->
  <!-- (ps 610.37) new strategies -->
  <phase name="JOB_BTCTRNS0" logfile="BTCTRNS1.LOG" elgfile="auto" password="UZSUQHGJ">
       <!-- pwd: 89147 -->
    <args>
      <arg>BTCTRNS1</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>DE-SCHEDULE JOBS</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
      <option name="archiving" value="EUI" />
    </options>
    <action>Deschedules background jobs</action>
  </phase>
  <phase name="RUN_STRESS2ALLTABU" logfile="STRESS2ALLTABU.LOG" elgfile="STRESS2ALLTABU.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>RSUPG_STRESS2ALLTABU</arg>
      <arg>STRESS2ALLTABU</arg>
      <arg></arg>
      <arg>STRESS2ALLTABU\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Add stress tables to ALLTABU</arg>
    </args>
    <action>Add stress tables to ALLTABU</action>
    <options>
      <or>
        <option name="ITERATIVE_UPG" />
        <option name="ZERODOWNTIME_UPG" />
      </or>
	  <option name="feature_switch" value="/fa/stress_maker" />
    </options>
  </phase>
  <phase name="RUN_RSPTBFIL_INIT" logfile="auto" elgfile="auto" password="WJOGCDWP">
       <!-- pwd: 45107 -->
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_INIT=SAP_RSPTBFIL(ACTION=INIT,LOGFILE=RSPTBINI.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBINI\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>PUTTB_SHD initial filling</arg>
    </args>
    <action>Enters source release information in table PUTTB_SHD</action>
    <options>
       <option name="HASSHADOW" />
    </options>
  </phase>
  <!-- ft: In non-export case, RDDIT006  does not run, therefore this can be executed here -->
  <!-- ft: this RSPTBFIL phase creates the file TRSHD.LST which is required by phase TR_TRK2HEAP_INIT -->
    <phase name="RUN_RSPTBFIL_CREINI_EHP" logfile="auto" elgfile="auto" password="GBTVWJUR">
       <!-- pwd: 59052 -->
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_CREINISHD=SAP_RSPTBFIL(ACTION=CREINISHD,LOGFILE=RSPTBCREINISHD.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBCREINISHD\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PUTTB_SHD destination filling</arg>
    </args>
    <action>Creates transport for initializing shadow system</action>
    <options>
      <not><option name="MODE" value="EXPORT" /></not>
      <option name="HASSHADOW" />
    </options>
  </phase>
  <phase name="RUN_RSPTBFIL_INIT2" logfile="auto" elgfile="auto" password="GRNLQJWF">
       <!-- pwd: 25431 -->
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_INIT2=SAP_RSPTBFIL(ACTION=INIT,LOGFILE=RSPTBINI2.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBINI2\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>PUTTB_SHD initial filling</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
	  <or>
        <option name="feature_switch" value="/fa/stress_maker" />
		<option name="feature_switch" value="/fa/stress_maker_2013" />
      </or>
    </options>
    <action>Enters source release information in table PUTTB_SHD</action>
  </phase>

  <phase name="READPUTTB_UPG" logfile="RDPUTTB.LOG" elgfile="auto" password="WFJPKDCF">
       <!-- pwd: 27637 -->
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>

  <phase name="SQLDB_SWITCH_DOCU" logfile="PUTTBDOKTL.LOG" password="CYOWKGMQ">
       <!-- pwd: 2600 -->
    <args>
      <arg>PUTTB_DOKTL_1</arg>
      <arg></arg>
    </args>
    <action>enabling of shadow import for docu objects</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  <phase name="LOCKEU_PRE" logfile="auto" elgfile="auto" password="GBTVWJUR">
       <!-- pwd: 59052 -->
    <args>
      <arg>REPACHK2</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Strategy &lt;I&gt;downtime-minimized&lt;/I&gt;: </action>
    <action>Prompts for time from when ABAP Workbench is locked</action>
    <usage>Strategy &lt;I&gt;downtime-minimized&lt;/I&gt;: Respond to prompt for lock time</usage>
  </phase>

  <!-- **************************************************************************************** -->
  <phase name="REPACHK_CLONE" logfile="REPACHK2.LOG" elgfile="auto" password="WMVWJDLQ">
       <!-- pwd: 37086 -->
    <args>
      <arg>NO-IGNORE</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Finds SAP objects locked in repairs or requests and locks the development environment.</action>
    <usage>Confirm locks for ABAP Workbench</usage>
  </phase>
  <phase name="REPACHK_TRANS" logfile="REPACHKT.LOG" elgfile="auto" password="WMVWJDLQ">
       <!-- pwd: 37086 -->
    <args>
      <arg>NO-IGNORE</arg>
    </args>
    <options>
      <option name="MODE" value="TRANSPORT" />
    </options>
    <action>Finds SAP objects locked in repairs or requests and locks the development environment.</action>
    <usage>Confirm locks for ABAP Workbench</usage>
  </phase>

  <!-- (hk + AK 721) SMODILOG check after eu_lock -->
  <phase name="SUMCHK_EULOCKED" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>SMODILOG</arg>
    </args>
    <action>Perform SMODILOG check</action>
  </phase>
  <!-- **************************************************************************************** -->
  <phase name="UVERS_UP_U_CLONE" password="CZZKVGRZ">
       <!-- pwd: 6418 -->
    <args>
      <arg>U</arg>
      <arg></arg>
    </args>
    <options>
      <or>
	<option name="MODE" value="CLONE" />
	<option name="MODE" value="TRANSPORT" />
      </or>
    </options>
    <action>Changes the status in table UVERS</action>
  </phase>
  <!-- **************************************************************************************** -->
  <!-- cv 09/13 -->
  <phase name="JOB_RUTPRERN2VIEW" logfile="auto" elgfile="auto" password="IBWKCFML">
        <!-- pwd: 58952 -->
    <args>
      <arg>RUTPRERN2VIEW</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTPRERN2VIEW\.$(SAPSID)</arg>
      <arg>0</arg>
      <arg>Prepare some tables for installation of SAP_FIN</arg>
    </args>
    <options>
      <not> <option name="startcomponent" value="SAP_FIN(700-*)" /> </not>
      <option name="destcomponent" value="SAP_FIN(700-*)" />
      <not><option name="MODE" value="EXPORT" /> </not>
    </options>
    <action>Prepare some tables for installation of SAP_FIN</action>
  </phase>

  <!-- **************************************************************************************** -->
  <!--  (jo 720) See IM 175443 2012  -->
  <phase name="ADJUSTCHK_TRANS" logfile="ADJUSTCK.LOG" elgfile="auto" password="IAYJRFHC">
       <!-- pwd: 17253 -->
    <args>
      <arg>SAP_MOD_EHP</arg>
      <arg>ADJUSTMT.INF</arg>
    </args>
    <options>
      <option name="MODE" value="TRANSPORT" />
    </options>
    <action>Determines ABAP Dictionary objects that need to be adjusted</action>
    <usage>Confirm message, if necessary</usage>
  </phase>

  <!-- (bm SP10) unicode migration preparation of pool tables (EhPI) -->
   <phase name="JOB_UMG_POOL_TABLE_EHP" logfile="UMG_POOL_TABLE_EHP_NUC.LOG" elgfile="auto" password="WFJPKDCF">
     <!-- pwd: 60928 -->
     <args>
       <arg>UMG_POOL_TABLE_UPG</arg>
       <arg></arg>
       <arg>NO-IGNORE</arg>
       <arg>UMG_POOL_TABLE_EHP_NUC\.$(SAPSID)</arg>
       <arg>3</arg>
       <arg>Prepare pool table extension for unicode migration in EhPI</arg>
     </args>
     <options>
       <option name="MODE" value="CLONE" />
       <option name="UCMIG_INTEGRATED" />
     </options>
     <action>Prepare pool table extension for unicode migration in EhPI</action>
   </phase>

  <!-- (cv 06/12) -->
  <phase name="JOB_UPGMODEXT" logfile="auto" elgfile="auto" password="IBWKCFML">
       <!-- pwd: 58952 -->
    <args>
      <arg>UPGMODEXT</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>UPGMODEXT\.$(SAPSID)</arg>
      <arg>0</arg>
      <arg>Store information about customer exits</arg>
    </args>
    <action>Store information about customer exits</action>
  </phase>
  <!-- (ms 721) IM 526929 2013: old DBDIFF in 731 and 740 for HDB is wrong and must be updated. Requested by Thorsten Pfeiffer -->
  <phase name="SQLDB_UPDATE_DBDIFF" logfile="auto" password="IRQAWFOZ">
        <!-- pwd: 64616 -->
    <args>
      <arg>UPDATE_DBDIFF</arg>
      <arg></arg>
    </args>
    <action>update DBDIFF</action>
    <options>
      <option name="ST_range" value="730-740" />
      <option name="DBTYPE" value="HDB" />
      <not><option name="MODE" value="EXPORT" /></not>
    </options>
  </phase>
  <!-- ak 07/2014: update sfwparam for client cascading BCsets if not explicitly set (Thomas Decker)-->
  <phase name="SQLSELEXE_INS_SFWPARAM_BCSETS" logfile="auto" password="IBWKCFML">
        <!-- pwd: 58952 -->
    <args>
      <arg>SFW_SEL_SFWPARAM_BCSETS</arg>
      <arg>SFW_INS_SFWPARAM_BCSETS</arg>
      <arg></arg>
    </args>
    <action>insert SBCSETS_MANUAL_CONTROL as indicator</action>
    <options>
      <option name="condition" value="$SAPRELCMP($(SAPSTRL),$COMPSTPLV(SAP_BASIS),700,12) ge 0" />
    </options>
  </phase>
  <!-- ak 07/2014: end of update sfwparam -->

  <!-- **************************************************************************************** -->
  <phase name="LIST_LOAD" logfile="auto" password="MQLQXXTE">
       <!-- pwd: 91684 -->
    <args>
      <arg>LIST</arg>
      <arg>REGEN.LST</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Generates list of programs that need to be generated</action>
  </phase>
  <!-- (jo 620.13) Check if all CD's needed for EU_IMPORT are there -->
  <phase name="CHECKCDMOUNTS" password="YOHALZNC">
       <!-- pwd: 57484 -->
    <args>
      <arg>EUIMP.XML</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Checks whether all required CDs for the EU_IMPORT phases are available</action>
    <usage>If a CD is missing, change the mount directories or, </usage>
    <usage>if you do not use mount directoriesignore the prompt</usage>
  </phase>
  <!-- (jo 710) PREUPTIME=FINISHED moved to end of downtime, see CSN 6178599 2007 -->
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_PREUP_FINI_EUIMP" password="YHIGMZER">
       <!-- pwd: 70598 -->
    <args>
      <arg>PREUPTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <option name="archiving" value="EUI" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="GETSYNC_PREUP_FINI_EUIMP" password="MBCOOXWZ">
       <!-- pwd: 73324 -->
    <args>
      <arg>PREUPTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <option name="archiving" value="EUI" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (jo 710) Move this phase prior to the EARLIEST possible downtime start -->
  <!-- (gr 40A) DB Migration due to AKK now latest at begin of downtime, not at kernel switch -->
  <!-- (mh 620-4.6) target release conditions must apply here -->
  <phase name="CONFCHK_BAS" password="MEJEVXLA">
       <!-- pwd: 68057 -->
    <args>
      <arg>SECTION=NEW;MANDATORY</arg>
    </args>
    <options>
      <option name="EHP_WITH_NEWRELEASE" />
    </options>
    <action>Tests operating system and database version</action>
  </phase>
  <!-- DB specific ation for new release -->
  <phase name="DB_ACTION_UPG" logfile="DBACTUPG.LOG" password="YAWZNZVG">
       <!-- pwd: 96861 -->
    <!-- (vd 640.13) changed the name -->
    <args>
      <arg>CONTAINER</arg>
      <arg>SELDBSU.$(DBAEXT)</arg>
      <arg>SELDBSU.LOG</arg>
      <arg>oramaext.sql</arg>
      <arg>ALTDBS.LOG</arg>
    </args>
    <action>Performs database-specific actions</action>
  </phase>
  <!-- (vd 610.10) container name translation -->
  <phase name="CNTRANS_TPL" logfile="CNTTPL.LOG" password="WHFRGDMX">
       <!-- pwd: 23394 -->
    <args>
      <arg>TEMPLATE</arg>
      <arg>TAIATRANS.DAT</arg>
      <arg>SCRIPTS.LST</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>MCOD only: Adapts container names in R3load</action>
  </phase>
  <!-- ************************************************************************************** -->
  <!-- (ps 620-4.22) APO Phase only -->
  <phase name="JOB_MC01_CACL_CDP_POST1" logfile="auto" elgfile="auto" password="GYZSPJFQ">
       <!-- pwd: 19004 -->
    <args>
      <arg>/SAPAPO/MC01_CACL_CDP_CONSIST</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>MC01_CACL_CDP_CONSIST\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Consistence check</arg>
    </args>
    <options>
      <option name="ST_range" value="*-610" />
      <option name="strategy" value="Resource-minimized" />
      <option name="archiving" value="EUI" />
      <option name="destcomponent" value="SCM" />
    </options>
    <action>Performs consistence check</action>
  </phase>
  <!-- (ps 620-5.67) CRM Phase only -->
  <phase name="JOB_GN_BEF_UPG_CRM40_1" logfile="auto" elgfile="auto" password="OKVHWIYK">
       <!-- pwd: 9968 -->
    <args>
      <arg>GN_BEFORE_UPGRADE_CRM40</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>MWCRM400\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Consistence check</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
      <option name="archiving" value="EUI" />
      <option name="ST_range" value="610-*" />
      <option name="startcomponent" value="BBPCRM" />
    </options>
    <action>Performs consistence check</action>
  </phase>
  <!-- (jo 720) Memorize the hardware key of the message server to be able to install a
       temporary license in INSTTEMPLIC_TRANS in case it is different to the local hardware key.
       We must do this *before* stopping the system next (in case of "Resource-minimized")!
    -->
  <phase name="INSTTEMPLIC_MSGKEY" logfile="INSTTEMPLIC.LOG" password="SQHWPLVM">
       <!-- pwd: 87281 -->
    <args>
      <arg>SAVEMSGHWKEY;NOINSTALL</arg>
    </args>
    <action>Saves the hardware key of the message server</action>
  </phase>
</phaselist>
</module>


 <module name="MAIN_DTTRANSEUI" type="upgrade" mandatory="yes" reselect="no">
      <description>Transition to Downtime for Resource-minimized and archiving off at EU_IMPORT</description>
      <options>
        <option name="strategy" value="Resource-minimized" />
        <option name="archiving" value="EUI" />
        <not> <option name="ZERODOWNTIME_UPG"/> </not>
      </options>
      <postevent>MODULE_INIT(MAIN_SHDCRE)</postevent>
      <revokemodule>REV_DTTRANSEUI</revokemodule>
      <password>OYYNNTZS</password>
      <!--  pwd: 23339  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
      </precedences>
      <phaselist>
        <submoduleref name="@SUBMOD_DTTRANS" password="QCGTLPLW" />    <!-- pwd: 13817 -->
      </phaselist>
    </module>
    <module name="MAIN_SHDCRE" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Import and Modification Transfer</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_SHDINST)</postevent>
      <revokemodule>REV_PREPROC</revokemodule>
      <password>UMFUDHTW</password>
      <!--  pwd: 51640  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINShdCre.xml#61 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Shadow system creation -->
  <!-- ************************************************************ -->
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_DOWN_START_EUIMP" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>DOWNTIME</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <option name="archiving" value="EUI" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_EULCK_START_EUIMP" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>EU_LOCKED</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <option name="archiving" value="EUI" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="RUN_RSPTBFIL_ZDM_COPY_PAT03" logfile="RSPTBFIL_ZDM.LOG" elgfile="RSPTBFIL_ZDM.ELG" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>RSPTBFIL_ZDM</arg>
      <arg>SAP_RSPTBFIL_ZDM_COPY_PAT03</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBFIL_ZDM_COPY_PAT03\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Copy PAT03 to PAT03_AIMREP to enable AIM classification</arg>
    </args>
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
    <action>Copy PAT03 to PAT03_AIMREP to enable AIM classification</action>
  </phase>  
  <submoduleref name="SUBMOD_SHDDBCLONE" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <options>
      <option name="MODE" value="CLONE" />
    </options>
  </submoduleref>
  <phase name="EU_IMPORT1" logfile="EU_IMPORT1.LOG" elgfile="EU_IMP1.ELG" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <args>
      <arg>EUIMP.XML</arg>
      <arg>1</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Copies substitution set from Upgrade CD to the shadow tables</action>
    <usage>Mount requested Upgrade DVD if necessary</usage>
  </phase>
  <!-- (mh 620-4.15) create unique index on DDNTT~ -->
  <phase name="SQLDB_DDNTT_UUID" logfile="DDNTT_UUID.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <!-- (jo 710) For all DB's now and also for customers! -->
    <args>
      <arg>DDNTT_UUID</arg>
      <arg></arg>
    </args>
    <action>Creates unique index on shadow nametab (field UUID)</action>
  </phase>

  <phase name="UPDATE_DBSTATS_DB2_NTACT_NODBPOS" password="YDDPUZKH">     <!-- pwd: 70121 -->
    <args>
      <arg>FILE</arg>
      <arg>bin</arg>
      <arg>DB2RUNPH.LST</arg>
      <arg>NTACT_NODBPOS=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
        <option name="DBTYPE" value="DB2-z/OS" />
    </options>
  </phase>
 
  <!-- (vd 610.13) remove DBPOS-Flag -->
  <phase name="NTACT_NODBPOS" logfile="NTSHDNDB.LOG" elgfile="NTSHDNDB.ELG" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>RWRANT_NODBPOS</arg>
      <arg>NOBUFRESET;TTONLY=TT;SRCSHDNAMETAB;DESTSHDNAMETAB</arg>
      <arg>NTSHDOP.TP0</arg>
    </args>
    <action>Cleans up nametab</action>
  </phase>

  <!--  (jo 720) After discussion with Christiane: Substitute NTACT_CONV_UC with speedy SQL
	The whole stuff is only necessary for unicode conversion of R3load of cluster data
	during EU_IMPORT2 below for a non-UNICODE export
    -->
  <!-- (ps 700-1.70) -->
  <phase name="SQLDB_UPDATE_DD_UC" logfile="UPDATE_DDNTT.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>UPDATE_DDNTT</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="UNICODE_only" />
    </options>
    <action>Generates nametabs of shadow tables in shadow nametab conv_uc</action>
  </phase>

  <!-- (stm 50A.04) copy nametabs to exchange names already here -->
  <!-- because codepage conversion in the following -->
  <!-- EU_IMPORT phases may need nametabs -->
  <phase name="SHADOW_NTACT_CP" logfile="NTSHDCP.LOG" elgfile="NTSHDCP.ELG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>CPSHANT</arg>
      <arg>LOGICAL_ALSO</arg>
      <arg>NTSHDOP.TP0</arg>
    </args>
    <action>Generates nametabs of shadow tables in the shadow nametab</action>
  </phase>
  <!-- (jo 710) We only have now TWO EU_IMPORT phases: The first one imports the name tab and the second one all the rest. -->
  <phase name="EU_IMPORT2" logfile="EU_IMPORT2.LOG" elgfile="EU_IMP2.ELG" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <args>
      <arg>EUIMP.XML</arg>
      <arg>2</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Copies substitution set from Upgrade CD to the shadow tables</action>
    <usage>Mount requested Upgrade DVD if necessary</usage>
  </phase>
  <!-- (LB 26.7.13) create unique index on E071~ and E071K~ -->
  <phase name="SQLDB_E071_ISU" logfile="E071_ISU.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <!-- Index to increase performance for ISU transfer -->
    <args>
      <arg>E071_ISU</arg>
      <arg></arg>
    </args>
	<options>
      <option name="ITERATIVE_UPG" />
	  <not><option name="DBTYPE" value="HDB" /></not>
    </options>
    <action>Creates unique index on shadow nametab (fields TRKORR,OBJECT,OBJ_NAME and TRKORR,PGMID,OBJNAME)</action>
  </phase>  
  <phase name="INDQUE_CHK" logfile="INDQUECHK.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="DBTYPE" value="SAPDB" />
    </options>
    <action>Checks for indexes</action>
  </phase>

  <phase name="TR_STORE2BUFFER_UPG1" password="EASFFNXO"> <!-- pwd: 78049 -->
    <args>
      <arg>APPSHDBUF.TP0</arg>
      <arg>SHDUPG1.BUF</arg>
      <arg></arg>
    </args>
  </phase>

  <!-- (af 620.20) component upgrade -->
  <!-- => Import upgrade data and main language (suiting to export) -->
  <phase name="SHADOW_IMPORT_UPG1" autorepeat="DB2:2" elgfile="SHDUPGIMP1.ELG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>SHDUPG1.BUF</arg>
      <arg>SHDUPGIMP1.TP0</arg>
      <arg></arg>
      <arg>parallelgroups</arg>
    </args>
    <action>Imports upgrade and language data into the shadow tables (no new tables)</action>
  </phase>

  <phase name="STARTSAP_IMP" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>CENTRAL;START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
    <action>Starts SAP system if it was stopped previously</action>
  </phase>
  <!-- (vd 610.63) restart check -->
  <!-- (jo 710 + cv) Internalize SQL commands -->
  <phase name="SETUPGPAR_PARAMEU1" logfile="SETUPGPAR.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <args>
      <arg>SET</arg>
      <arg>UPG_RESTART=NO</arg>
    </args>
    <action>Performs actions for restart handling</action>
  </phase>
  <!-- cv740, SECONDSHD-option already needed during PREPUT-recovery -->
  <phase name="SETUPGPAR_SECONDSHD" logfile="SETUPGPAR.LOG" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>SET</arg>
      <arg>2ND_SHADOW=YES</arg>
    </args>
    <options>
      <option name="SECOND_SHD" />  
    </options>
    <action>Makes parameter settings for the upgrade procedure</action>
  </phase>
  <!-- ** Development Lock -->
  <phase name="REPACHK2" logfile="REPACHK2.LOG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <args>
      <arg>NO-IGNORE</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Finds SAP objects locked in repairs or requests</action>
    <usage>Confirm locks for ABAP Workbench if not yet done in phase LOCKEU_PRE</usage>
  </phase>
  <!-- (bm SP10) unicode migration preparation of pool tables (upgrade) -->
  <phase name="JOB_UMG_POOL_TABLE_UPG" logfile="UMG_POOL_TABLE_UPG_NUC.LOG" elgfile="auto" password="WFJPKDCF">
    <!-- pwd: 60928 -->
    <args>
      <arg>UMG_POOL_TABLE_UPG</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>UMG_POOL_TABLE_UPG_NUC\.$(SAPSID)</arg>
      <arg>3</arg>
      <arg>Prepare pool table extension for unicode migration in upgrade</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="UCMIG_INTEGRATED" />
    </options>
    <action>Prepare pool table extension for unicode migration in upgrade</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_EULCK_START_D1" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>EU_LOCKED</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_EULCK_START_SHDSYS" password="KABYXBZW">
       <!-- pwd: 47366 -->   
    <args>
      <arg>EU_LOCKED</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="UVERS_UP_U_EXPORT" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <args>
      <arg>U</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Changes the status in table UVERS</action>
  </phase>
  <phase name="CNV_CHK_XT" password="MVWDHMJL">
       <!-- pwd: 5514 -->   
    <args>
      <arg>I</arg>
    </args>
    <action>Finds outstanding conversions and restart logs for </action>
    <action>conversions that have not been completed</action>
    <usage>Make conversions (after discussion with SAP consultant)if necessary</usage>
  </phase>
  <phase name="TRBATCHK_XT" password="YVGUKZWN">
       <!-- pwd: 68913 -->   
    <action>Checks whether table TRBAT is empty</action>
    <usage>Perform any actions specified by SAPupif necessary</usage>
  </phase>
  <!-- ** System Analysis -->
  <phase name="LIST_LOAD" logfile="LISTLOAD.LOG" password="IEDAJFBM">
       <!-- pwd: 40231 -->   
    <args>
      <arg>LIST</arg>
      <arg>REGEN.LST</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Generates list of programs that need to be generated</action>
  </phase>
  <phase name="JOB_RDDTAXIT" logfile="SYSPREP.LOG" elgfile="SYSPREP.ELG" password="WCPMDDNE">
       <!-- pwd: 11646 -->   
    <args>
      <arg>RDDTAXIT</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>MODTADIR\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>CHECK of GENERATED OBJECTS</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Selects generated objects</action>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <!--   cv   -->
    <phaselist>
      <!-- (af 640.02) according to Ralph Schubert this phase is still needes -->
      <!-- (ps 620-5.110) APO Phase only -->
      <phase name="JOB_STRU_TADIR_GEN_2" logfile="PSTRUGEN.LOG" elgfile="PSTRUGEN.ELG" password="CHOKYROF">
           <!-- pwd: 81640 -->   
        <args>
          <arg>/SAPAPO/EXTR_STRU_TADIR_GEN</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>EXTR_STRU_TADIR_GEN\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>TADIR-INSERT</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="destcomponent" value="SCM" />
        </options>
        <action>Performs TADIR insert</action>
      </phase>
      <!-- (vd 620.39) DDYTT filling from DDXTT~ -->
      <phase name="JOB_RSGENYTT" logfile="PSGENYTT.LOG" elgfile="PSGENYTT.ELG" password="SUMNHLPW">
           <!-- pwd: 94221 -->   
        <args>
          <arg>RSGENYTT</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSGENYTT\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>COPY NAMETABS TO DDYTT/F</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
        </options>
        <action>Copies nametabs to table DDYTT/F</action>
      </phase>
    </phaselist>
  </submodule>
  <phase name="SUBSTNT_INS" logfile="STBNTINS.LOG" password="EWIWUCUS">
       <!-- pwd: 9911 -->   
    <args>
      <arg>INSERT</arg>
    </args>
    <action>Creates nametab entries for the new substitution tables</action>
  </phase>
  <phase name="RUN_RSINCGEN" logfile="PSINCGEN.LOG" elgfile="PSINCGEN.ELG" password="QOIFNPTA">
       <!-- pwd: 33718 -->   
    <args>
      <arg>RSINCGEN</arg>
      <arg>SAP_GEN_RSINCL</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSINCGEN\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>RS INCLUDE GENERATION</arg>
    </args>
    <action>Generates include program for accessing substitution tables</action>
  </phase>

  <!-- ak 11/2013 -->
  <phase name="JOB_UPGMODEHPI" logfile="auto" elgfile="auto" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>UPGMODEHPI</arg>
      <arg>SAP&amp;_DISABLE</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPGMODEHPI_D\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>DISABLE CMOD FUNCS</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="feature_switch" value="cmod_disabling" />
      <not>
        <option name="NOSTACKFILE" value="TRUE" />
      </not>
    </options>
    <action>Disable all active CMOD function modules in BASIS</action>
  </phase>

  <!-- ********************************************************************************************* -->
  <!--  (jo 720) Here used to be SUBMOD_DIFFEXP and RUN_RDDCP4TB copied TADIR to TADIR~. We have to
	at least fix the HEAD entry to have the right srcsystem to make the shadow system work.
    -->
  <phase name="SQLDB_EXPFIXTADIR" password="CRUUERMR">
       <!-- pwd: 34594 -->   
    <args>
      <arg>TADIR_SETHEADSYST</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Performs switch for DIFFEXP phases</action>
  </phase>

  <!-- ********************************************************************************************* -->
  <phase name="JOB_RDDINDPR" logfile="INXPREP.LOG" elgfile="INXPREP.ELG" password="OCDEFTTC">
       <!-- pwd: 13107 -->   
    <args>
      <arg>RDDINDPR</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>INDPRP\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>INDEXING PREPARATION</arg>
    </args>
    <action>Finds all secondary indexes</action>
  </phase>
  <phase name="JOB_RSEXP_E071STR_TAB" logfile="E071STR.LOG" elgfile="E071STR.ELG" password="SANGVLTY">
       <!-- pwd: 63887 -->   
    <args>
      <arg>RSEXP_E071STR_TAB</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSEXP_E071STR_TAB\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>DUMP E071STR-ENTRIES</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="ST_range" value="710-799" /> 
    </options>
    <action>Dump entries of E071STR-table to file</action>
  </phase>
</phaselist>
</module>

<module name="MAIN_SHDINST" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Shadow System Installation</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_DTTRANSSHD)</postevent>
      <revokemodule>REV_PREPROC</revokemodule>
      <password>GWQDTJVY</password>
      <!--  pwd: 51318  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
        <precedence>MAIN_SHDCRE</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINShdInst.xml#48 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Shadow System Installation -->
  <!-- ************************************************************ -->
  <!-- (vd 610.2.01) maxextents unlimited for all tables -->
  <phase name="ORA_ALTEXT_MAXALL_UT" logfile="auto" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>ALTMAXALL.LST</arg>
      <arg>SELALTAB.$(DBAEXT)</arg>
      <arg>SELALTAB.LOG</arg>
    </args>
    <options>
      <option name="DBTYPE" value="ORACLE" />
    </options>
    <action>Sets tablespace extents as unlimited</action>
  </phase>
  <!-- (mh 620-4.6) use SQLDB phase instead of script -> R3up SQLDB COPY_DDIC_USER -->
  <!-- (jo 710) Handles all releases via conditions on COPY_DDIC_USER statement -->
  <!-- (jo 720) Copies client 000 and 001 -->
  <phase name="SQLDB_CPUSR" logfile="SQLEXUS.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>COPY_DDIC_USER</arg>
      <arg></arg>
    </args>
    <action>Initializes authorizations</action>
  </phase>

  <!--  (jo 720) Needed for PREPUT in export case to let SUBMOD_SHDALIASCRE create compensation views  -->
  <phase name="SQLDB_UNISETTAB2VIEW" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <args>
      <arg>TABUNI_SETTAB2VIEW</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="HASANYPUTSTEP(PREPUT.BUF)" value="A" />
    </options>
  </phase>

  <submoduleref name="SUBMOD_SHDALIASCRE" password="ATAUUVEP">
    <!-- pwd: 34051 -->
    <defs>
      <def>HANDLELICENSE=YES</def>
    </defs>
  </submoduleref>

  <!--  (jo 720) Must come *after* having installed rest of it  -->
  <!--  (jo 720) Creating the sequence must only be done ONCE - see IM 3932771 2010  -->
  <phase name="SQLDB_CRSHDSEQ" logfile="SQLCRSHDSEQ.LOG" connect="shadow" password="SJICQLMB">
    <!-- pwd: 57708 -->
    <args>
      <arg>CRSHDSEQ</arg>
      <arg></arg>
    </args>
    <action>Creates sequence</action>
    <options>
      <or>
	<option name="DBTYPE" value="SAPDB" />
	<option name="DBTYPE" value="HDB" />
	<option name="DBTYPE" value="ORACLE" />
      </or>
    </options>
  </phase>

  <phase name="CREATEDBCON_SHD" logfile="CREATEDBCONSHD.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>ORIG2SHD</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Creates DBCON entry for shadow system</action>
  </phase>

  <!--  (jo 720) Moved TR_TRK2HEAP_INIT + TP_ACTION_CP2SINI + SHADOW_NTACT_DEL after DIFFEXP module  -->

  <!--  (jo + cv) But we needs this at least to fix the REFNAME field back to 'DOKCLU' without tilde  -->
  <phase name="SQLDB_DOKTL_REFNAME_RESTORE" password="YAWZNZVG">
     <!-- pwd: 79932 -->
    <args>
      <arg>DDNTT_DOKTL_REFNAME_RESTORE</arg>
      <arg></arg>
    </args>
    <action>rename DOKCLU</action>
  </phase>

  <!-- moved before DIFFEXP cU("NTACT_NODBPOS"), -->
  <!-- (vd 46A.11) turn session manager off -->
  <phase name="SQLDB_SMOFF_SHD" connect="shadow" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>SESSION_MANAGER_OFF</arg>
      <arg></arg>
    </args>
    <action>Switches off the Session Manager for the upgrade</action>
  </phase>

  <!-- ********************************************************************** -->
  <!-- start shadow instance -->
  <!-- (ps shadow.67) -->
  <!-- (ps 610.37) new strategies -->
  <!-- Warning, productive instance will be shut down!!!! -->
  <!-- (ps 620-5.67) CRM Phase only -->
  <phase name="JOB_GN_BEF_UPG_CRM40_2" logfile="MWCRM2.LOG" elgfile="MWCRM2.ELG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>GN_BEFORE_UPGRADE_CRM40</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>MWCRM400\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Consistence check</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
      <option name="ST_range" value="610-*" />
      <option name="startcomponent" value="BBPCRM" />
    </options>
    <action>Performs consistence check</action>
  </phase>
  <!-- (ps 620-4.22) APO Phase only -->
  <phase name="JOB_MC01_CACL_CDP_POST2" logfile="CDPCON2.LOG" elgfile="CDPCON2.ELG" password="IKETXFFO">
       <!-- pwd: 19932 -->
    <args>
      <arg>/SAPAPO/MC01_CACL_CDP_CONSIST</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>MC01_CACL_CDP_CONSIST\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Consistence check</arg>
    </args>
    <options>
      <option name="ST_range" value="*-610" />
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
      <option name="destcomponent" value="SCM" />
    </options>
    <action>Performs consistence check</action>
  </phase>
  <phase name="INSTANCELIST_SHD" logfile="INSTANCELIST_SHD.LOG" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <args>
      <arg>CI_SHD</arg>
    </args>
    <action>Gets the system instance list for shadow system</action>
  </phase>
  <!-- (jo 710) PREUPTIME=FINISHED moved to end of downtime, see CSN 6178599 2007 -->
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_PREUP_FINI_SHDSYS" password="IIVEBFVW">
       <!-- pwd: 66178 -->
    <args>
      <arg>PREUPTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="GETSYNC_PREUP_FINI_SHDSYS" password="SEFKNLNI">
       <!-- pwd: 32478 -->
    <args>
      <arg>PREUPTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
    </options>
    <action>Signal event to SAPJup</action>
  </phase>

  <!-- ak 05/2014 create trigger to test for accidental updates to smodilog and enhobj -->
  <phase name="SQLDB_SMODITRIGGER"  password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>SMODITRIGGER_DROPCREATE</arg>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/smoditrigger" />
      <option name="HASSHADOW" />
      <not><option name="MODE" value="EXPORT"/></not>
      <or>
	<option name="DBTYPE" value="SAPDB" />
	<option name="DBTYPE" value="ORACLE" />
      </or>
    </options>
    <action>create triggers for testing</action>
  </phase>

</phaselist>
</module>


<module name="MAIN_DTTRANSSHD" type="upgrade" mandatory="yes" reselect="no">
      <description>Transition to Downtime for Resource-minimized and archiving off at start shadow system</description>
      <options>
        <option name="strategy" value="Resource-minimized" />
        <not> <option name="archiving" value="EUI" /> </not>
        <not> <option name="ZERODOWNTIME_UPG"/> </not>
      </options>
      <postevent>MODULE_INIT(MAIN_SHADOW)</postevent>
      <revokemodule>REV_DTTRANSSHD</revokemodule>
      <password>KGCRLBDY</password>
      <!--  pwd: 15152  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
        <precedence>MAIN_SHDCRE</precedence>
        <precedence>MAIN_SHDINST</precedence>
      </precedences>
      <phaselist>
        <submoduleref name="@SUBMOD_DTTRANS" password="EASFFNXO" />    <!-- pwd: 78049 -->
      </phaselist>
    </module>
    <module name="MAIN_SHADOW" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Shadow System Operations: Start shadow system</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_SHDPREPUT)</postevent>
      <revokemodule>REV_PREPROC</revokemodule>
      <password>OWPYRTPA</password>
      <!--  pwd: 36690  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
        <precedence>MAIN_SHDCRE</precedence>
        <precedence>MAIN_SHDINST</precedence>
        <precedence>MAIN_DTTRANSSHD</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINShadow.xml#47 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Shadow System Operation -->
  <!-- ************************************************************ -->
  <phase name="STARTSAP_SHDSYS" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>CENTRAL;START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
    </options>
    <action>Starts SAP system</action>
  </phase>

  <!--  (jo + cv) This must not run in parallel!  -->
  <!-- (ps 610.37) new strategies -->
  <phase name="JOB_BTCTRNS2" logfile="BTCTRNS1.LOG" elgfile="BTCTRNS1.ELG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>BTCTRNS1</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>DE-SCHEDULE JOBS</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
    </options>
    <action>Deschedules background jobs</action>
  </phase>

  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- (vd 620) no restart or start release R3 after stop shadow system! -->
      <!-- (ps 610.110) BW Phase only -->
      <phase name="JOB_DROP_TMPOBJ_UPG1" logfile="RSDR_NAMT_CL.LOG" elgfile="RSDR_NAMT_CL.ELG" password="AWHKBVTQ">
           <!-- pwd: 53084 -->   
        <args>
          <arg>RSDR_UPG_DROP_TMPOBJECTS</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSDRTMP\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CLEAR NAMETAB</arg>
        </args>
        <options>
          <option name="strategy" value="Resource-minimized" />
          <option name="startcomponent" value="SAP_BW" />
        </options>
        <action>Deletes temporary BW objects</action>
      </phase>
      <!-- (ps 700-1.65) BW Phase only from M.Lux -->
      <phase name="JOB_SDLINIT_TABLES_UPG1" logfile="RSSM_SDLINIT.LOG" elgfile="RSSM_SDLINIT.ELG" password="OCDEFTTC">
           <!-- pwd: 74999 -->   
        <args>
          <arg>RSSM_PREPARE_SDLINIT_TABLES_40</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>PREPARE_SDLINIT_TABLES_40\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>BW checks</arg>
        </args>
        <options>
          <option name="strategy" value="Resource-minimized" />
          <option name="startcomponent" value="SAP_BW" />
          <option name="ST_range" value="620-640" />
        </options>
        <action>Deletes invalid nametab entries</action>
      </phase>
      <phase name="JOB_RDDPURIF_R" logfile="PDDPURIF.LOG" elgfile="PDDPURIF.ELG" password="WPCMQDAR">
           <!-- pwd: 89806 -->   
        <args>
          <arg>RDDPURIF</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RDDPURIF\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>CONVERSION PREPARATION</arg>
        </args>
        <options>
          <option name="strategy" value="Resource-minimized" />
        </options>
        <action>Deletes inconsistent values from tables</action>
      </phase>
      <phase name="JOB_RSVBCHCK_R" logfile="PSVBCHCK.LOG" elgfile="PSVBCHCK.ELG" password="ATAUUVEP">
           <!-- pwd: 34051 -->   
        <args>
          <arg>RSVBCHCK</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSVBCHCK\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CHECK OF UPDATE TASK</arg>
        </args>
        <options>
          <option name="strategy" value="Resource-minimized" />
        </options>
        <action>Checks whether outstanding updates tasks and queued RFCs exist</action>
        <usage>Check outstanding update tasks with transaction SM13 and queued RFCs with transaction SMQ1</usage>
      </phase>
    </phaselist>
  </submodule>
  <!-- (vd 620.30) check for empty DDXTT -->
  <phase name="INTCHK_SW" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>NOW</arg>
    </args>
    <action>Checks whether the inactive nametab is empty</action>
  </phase>

  <!-- ********************************************************************** -->
  <phase name="STOPSAP_4SHDSYS" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>CENTRAL</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
    <action>Stops SAP system</action>
  </phase>

  <!-- ********************************************************************** -->
  <submodule password="KRGCCBGT">
    <!--  (jo 720) Either module "MAIN_SHDPREPUT" runs or this phase in case PREPUT.BUF is not empty  -->
    <options>
      <option name="HASANYPUTSTEP(PREPUT.BUF)" value="I" />
      <!--  (jo 720) We need to execute the preput if we have to activate something  -->
      <not><option name="HASANYPUTSTEP(PREPUT.BUF)" value="AR" /></not>
    </options>
    <phaselist>
      <!-- (jo 720) Discussion with Christiane: Need to mask this  -->
      <phase name="SQLSELEXE_MAINIMP_MASK" password="YAWZNZVG">
	   <!-- pwd: 79932 -->   
	<args>
	  <arg>TFAWFMAP.LST</arg>
	  <arg>MAINIMPORT_MASKTABS</arg>
	  <arg>PLAINBINFILE</arg>
	</args>
      </phase>

      <phase name="CMDFILE_PREPUT_NOA" connect="shadow" elgfile="CMDFILEPRE.ELG" password="IRQAWFOZ">
	   <!-- pwd: 64616 -->   
	<args>
	  <arg>PREPUT.BUF</arg>
	  <arg>CMDFILE.TP0</arg>
	  <arg>PREPUTSHDIMP.BUF</arg>
	  <arg>nochkimpdp</arg>
	</args>
	<action>Command file import for PREPUT</action>
      </phase>

      <phase name="START_SHDI_PREPUT_NOA" logfile="STARTSSC.LOG" password="QOVSNPTA">
	   <!-- pwd: 67126 -->   
	<args>
	  <arg>START_SERVICE</arg>
	  <arg>DEVTRACE.LOG</arg>
	</args>
	<action>Starts the shadow system</action>
      </phase>

      <!--  (jo 720) Save preput for later recovery  -->
      <phase name="PREPUTRECOVER_NOA" connect="shadow" logfile="PREPUTRECOVER.LOG" password="IKETXFFO">
	   <!-- pwd: 19932 -->   
	<args>
	  <arg>PREPUT.BUF</arg>
	  <arg>SAPK???EPP</arg>
	  <arg></arg> <!-- Substitute last character with 'U'  -->
	  <arg>TR_PREPUTRECOVER</arg>
	  <arg></arg>
	</args>
	<action>Save transport objects from preput for later recovery</action>
      </phase>

      <phase name="STOP_SHDI_PREPUT_NOA" logfile="STOPSHDI.LOG" password="IIVEBFVW">
	   <!-- pwd: 66178 -->   
	<args>
	  <arg>STOP_SERVICE</arg>
	</args>
	<action>Stops shadow instance</action>
      </phase>

      <!--  (jo 720) Do it via main import to avoid problems of DOKTL  -->
      <phase name="TABIM_FIXIMP" connect="shadow" elgfile="TABIMFIXIMP.ELG" password="SEFKNLNI">
	   <!-- pwd: 32478 -->   
	<args>
	  <arg>PREPUTSHDIMP.BUF</arg>
	  <arg>TABIMUPG.TP0</arg>
	  <arg></arg>
	  <arg>parallelgroups;nochkimpdp</arg>
	</args>
	<action>Imports repair requests for shadow system</action>
      </phase>

      <!-- (jo 720) Unmask again  -->
      <phase name="SQLSELEXE_MAINIMP_UNMASK" password="AFCGWVMT">
	   <!-- pwd: 33621 -->   
	<args>
	  <arg>TFAWFMAP.LST</arg>
	  <arg>MAINIMPORT_UNMASKTABS</arg>
	  <arg>PLAINBINFILE</arg>
	</args>
      </phase>
    </phaselist>
  </submodule>

  <!-- ********************************************************************** -->

  <!-- FIXME: Should this come after STOPSAP_SHDSYS?? What does it trigger in SAPJup?? -->
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_DOWN_START_SHDSYS" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>DOWNTIME</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Resource-minimized" />
      <not>
        <option name="archiving" value="EUI" />
      </not>
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- ******************************************************************************** -->

  <phase name="SHDINST_CHK2" logfile="SHDINST_CHK2.LOG" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <action>Checks the shadow instance</action>
  </phase>
  <!--  (jo 720) According to IM 2649151 2011 do this early  -->
  <phase name="SQLDB_D1GENIN_SHD1" logfile="D1GENINSHD.LOG" password="MVWDHMJL">
       <!-- pwd: 5514 -->   
    <args>
      <arg>D1GENINSERTSHD</arg>
      <arg></arg>
    </args>
    <action>Prevents anticipating generation for SHD system</action>
    <options>
      <or>
	<and>
	  <option name="MODE" value="EXPORT" />
	  <option name="realdestvers" value="702-709,730-*" />
	</and>
	<and>
	  <option name="MODE" value="CLONE" />
	  <option name="ST_range" value="702-709,730-*" />
	</and>
      </or>
    </options>
  </phase>
</phaselist>
</module>

<module name="MAIN_SHDPREPUT" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Shadow System Operations: Preput</description>
      <options>
	<!--  (jo 720) We need to execute the preput if we have to activate something  -->
        <option name="HASANYPUTSTEP(PREPUT.BUF)" value="A" />
	<option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_SHDRUN)</postevent>
      <revokemodule>REV_PREPROC</revokemodule>
      <password>OCYMMIKQ</password>
      <!--  pwd: 9814  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
        <precedence>MAIN_SHDCRE</precedence>
        <precedence>MAIN_SHDINST</precedence>
        <precedence>MAIN_DTTRANSSHD</precedence>
        <precedence>MAIN_SHADOW</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINShdPreput.xml#104 $">
  <!-- (jo 720) Discussion with Christiane: Need to mask this  -->
  <phase name="SQLSELEXE_MAINIMP_MASK" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>TFAWFMAP.LST</arg>
      <arg>MAINIMPORT_MASKTABS</arg>
      <arg>PLAINBINFILE</arg>
    </args>
  </phase>

  <!--  Preput for export case  -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <phaselist>
      <phase name="EU_SAVETAB_PPBACKUP" logfile="EUSAVETABB.LOG" connect="shadow" password="AWHKBVTQ">
	   <!-- pwd: 53084 -->   
	<args>
	  <arg>SAVE</arg>
	  <arg>DDXTT;DDXTF</arg>
	  <arg>SAVETABLES.DAT</arg>
	  <arg>CLEARTABLES</arg>
	</args>
      </phase>

      <!--  (jo + cv) DDXTT from the export still contains wrong entries, so we have to make sure
	    we add the transports also to the heap so the activator can see it
       -->
      <phase name="TR_BUF2HEAP_PREPUT" logfile="TRB2HPP.LOG" password="OCDEFTTC">
	   <!-- pwd: 74999 -->   
	<args>
	  <arg>PREPUT.BUF</arg>
	  <arg>TR_EXPPREPUT</arg>
	  <arg></arg>
	  <arg>TPSHBUFPP.LOG</arg>
	</args>
	<action>Moves preput buffer requests to the SAPup buffer</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- Note 1703429: HDB Primary Index Fix for Preput distributor -->
  <phase name="PREPREPUT_HDB731" logfile="PREPREPUT_731_HDB.LOG" elgfile="PREPREPUT_731_HDB.ELG" connect="shadow" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>R018769.Y3S</arg>
      <arg></arg>
    </args>
    <options>
      <option name="expcomponent" value="SAP_BASIS(731(0-3))" /> <!-- 731 SP 0-3 -->
      <option name="MODE" value="EXPORT" />
      <option name="DBTYPE" value="HDB" />
    </options>
  </phase>
  
  <phase name="PREPREPUT_738" logfile="PREPREPUT.LOG" elgfile="PREPREPUT.ELG" connect="shadow" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>RADTBCON.SAP</arg>
      <arg></arg>
    </args>
    <options>
      <option name="ST_range" value="700-703" />
      <option name="destcomponent" value="SAP_BASIS(740(0-1))" /> <!-- 740 SP 0-1 -->
      <not><option name="MODE" value="EXPORT" /></not>
    </options>
  </phase>
  
  <phase name="PREPREPUT_740" logfile="PREPREPUT.LOG" elgfile="PREPREPUT.ELG" connect="shadow" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>R000036.D75</arg>
      <arg></arg>
    </args>
    <options>
      <or>
        <option name="ST_range" value="700-703" /> <!-- Start 700-731 -->
        <option name="startcomponent" value="SAP_BASIS(740(0-1))" /> <!-- Start 740 SP0-1 -->
      </or>
      <option name="realdestvers" value="740-799" /> <!-- 740-799 -->
      <not><option name="destcomponent" value="SAP_BASIS(740(0-1))" /></not> <!-- not 740 SP 0-1 -->
      <not><option name="MODE" value="EXPORT" /></not>
    </options>
  </phase>

  <phase name="PREPREPUT_742" logfile="PREPREPUT.LOG" elgfile="PREPREPUT.ELG" connect="shadow" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>R000080.PP8</arg>
      <arg></arg>
    </args>
    <options>
      <or>
        <option name="ST_range" value="700-703" /> <!-- Start 700-731 -->
        <option name="startcomponent" value="SAP_BASIS(740(0-7))" /> <!-- Start 740 SP0-7 -->
      </or>
      <option name="realdestvers" value="740-799" /> <!-- 740-799 -->
      <not><option name="destcomponent" value="SAP_BASIS(740(0-7))" /></not> <!-- not 740 SP 0-7 -->
      <not><option name="MODE" value="EXPORT" /></not>
    </options>
  </phase>
  
  <phase name="START_SHDI_PREPUT" logfile="STARTSSC.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts the shadow system</action>
  </phase>

  <phase name="SETSYNC_SHD_STARTED_PRE" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>SHADOWINST</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- set parameter for the time when shd runs with preput for as400 to know that views ddls must be generated for shd system -->
  <phase name="SETUPGPAR_SETSQL4SHD" logfile="SETUPGPAR.LOG" connect="shadow" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>SET</arg>
      <arg>SQL4SHD=YES</arg>
    </args>
    <!-- (jo 720) This is needed for the shadow system, so do it in the shadow system which is up now! -->
    <action>Set parameter SQL4SHD indicating that CREATE/DROP VIEW statement should be generated for shadow system during preput</action>
  </phase>
    
  <phase name="SQLDB_MSSPROCSIGN_PRE" logfile="MSSPROCSIGN_PRE.LOG" connect="shadow" password="QWFAXPHU">
    <!-- pwd: 97943 -->
    <args>
      <arg>MSSPROCSIGN</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>Performs specific actions</action>
  </phase>
  <phase name="SQLDB_MSSATMDEFBND_PRE" logfile="MSSATMDEFBND_PRE.LOG" connect="shadow" password="QWFAXPHU">
    <!-- pwd: 97943 -->
    <args>
      <arg>MSSATMDEFBND</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>Performs specific actions</action>
  </phase>

  <phase name="JOB_RSUPGCUA_SHD_PRE" logfile="PSUPGCUA.LOG" connect="shadow" elgfile="PSUPGCUA.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPGCUAGEN111</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGCUAGEN111\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>CUA GEN</arg>
    </args>
    <action>Performs specific actions</action>
  </phase>

  <if test="0">
  <!-- fill alternative nametab DDMTT, connect is set internally -->
  <phase name="ALTNTAB_FILL_PRE" logfile="ALTNTFIPRE.LOG" elgfile="ALTNTFIPRE.ELG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>30</arg>
    </args>
    <action>Creates alternative nametab DDMTT/DDMTF for distributor</action>
  </phase>
  </if>

  <!-- *********************************************************** -->
  <phase name="SQLDB_SHADOW_PRE" logfile="INSSHDPRE.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>INSERT_SHADOW</arg>
      <arg></arg>
    </args>
  </phase>

  <phase name="NTACT_ALTNT_PRE" logfile="NTMOVALTNTPRE.LOG" elgfile="NTMOVALTNT.ELG" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <args>
      <arg>ANTCPINT</arg>
      <arg>NOBUFRESET;SRCSHDNAMETAB;DESTSHDNAMETAB;DESTALTNAMETAB;TTONLY=!_J</arg>
      <arg>NTMOVMTT.TP0</arg>
    </args>
  </phase>

  <submodule password="KRGCCBGT" execparallel="true">
    <!--   cv   -->
    <phaselist>
      <!-- (mh 620.76) switch off BAdIs on shadow system -->
      <phase name="RUN_RSUPGBAD_PRE" logfile="RSUPGBADPRE.LOG" connect="shadow" elgfile="RSUPGBADPRE.ELG" password="IKETXFFO">
           <!-- pwd: 19932 -->   
        <args>
          <arg>RSUPGBAD</arg>
          <arg>RSUPGBAD_SHD1</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPGBAD\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>DISABLE non-BASIS BADIs</arg>
        </args>
        <action>Disables all application BAdIs</action>
      </phase>
      <!-- is also needed to make PARMVNT_PRE work! -->
      <phase name="JOB_RSUPDTEC_SHD_PRE" logfile="PSUPDTEC.LOG" connect="shadow" elgfile="PSUPDTEC.ELG" password="IIVEBFVW">
           <!-- pwd: 66178 -->   
        <args>
          <arg>RSUPDTEC</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPDTEC\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Resolve inconsistencies in TABART-TABSPACE mapping</arg>
        </args>
        <action>Resolves inconsistencies in TABART-TABSPACE mapping.</action>
      </phase>
      <phase name="JOB_RDDNEWPP_PRE" logfile="RDDNEWPPPRE.LOG" connect="shadow" elgfile="RDDNEWPPPRE.ELG" password="SEFKNLNI">
           <!-- pwd: 32478 -->   
        <args>
          <arg>RDDNEWPP</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg></arg>
          <arg>5</arg>
          <arg>RDDIMPDP SCHEDULING</arg>
        </args>
        <action>Reschedules RDDIMPDP</action>
      </phase>

    </phaselist>
  </submodule>

  <phase name="CMDFILE_PREPUT" connect="shadow" elgfile="CMDFILEPRE.ELG" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>PREPUT.BUF</arg>
      <arg>CMDFILE.TP0</arg>
      <arg>PREDDIC.BUF</arg>
      <arg></arg>
    </args>
    <action>Command file import for PREPUT</action>
  </phase>

  <!--  (jo 720) Save preput for later recovery  -->
  <phase name="PREPUTRECOVER_A" connect="shadow" logfile="PREPUTRECOVER.LOG" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>PREPUT.BUF</arg>
      <arg>SAPK???EPP</arg>
      <arg></arg> <!-- Substitute last character with 'U'  -->
      <arg>TR_PREPUTRECOVER</arg>
      <arg></arg>
    </args>
    <action>Save transport objects from preput for later recovery</action>
  </phase>

  <phase name="DDIC_PREPUT" connect="shadow" buffersync="true" elgfile="DDICPRE.ELG" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>PREDDIC.BUF</arg>
      <arg>DDICUPG.TP0</arg>
      <arg>PREACT.BUF</arg>
      <arg></arg>
    </args>
    <action>Imports the dictionary objects of the PREPUT</action>
  </phase>

  <!-- (fhw 700sr1) DB6 only -->
  <phase name="DB6_ACTIONS_PRE" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <args>
      <arg>DB6ACTIO.LST</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>runstats listed tables</action>
  </phase>

  <!-- Mask BI_CONT to avoid that the activator activates BW-objects -->
  <phase name="SQLDB_MASK_BICONT" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <args>
      <arg>MASK_BICONT</arg>
      <arg></arg>
    </args>
    <action>Mask component BI_CONT</action>
  </phase>

  <!-- Activation -->
  <phase name="PREACT_UPG" connect="shadow" elgfile="ACTPRE.ELG" password="MVWDHMJL">
       <!-- pwd: 5514 -->   
    <args>
      <arg>PREACT.BUF</arg>
      <arg>ACTUPG.TP0</arg>
      <arg>AFTERPREACT.BUF</arg>
      <arg></arg>
    </args>
    <action>Activates ABAP Dictionary objects of PREPUT</action>
  </phase>

  <phase name="SQLDB_UNMASK_BICONT" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <args>
      <arg>UNMASK_BICONT</arg>
      <arg></arg>
    </args>
    <action>Unmask component BI_CONT</action>
  </phase>

  <!-- ********************************************************************** -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
    <phaselist>
      <phase name="STOP_SHDI_PREPUT_RESMIN" logfile="STOPSHDI.LOG" password="KVYGUBAD">
	<!-- pwd: 66191 -->   
	<args>
	  <arg></arg>
	</args>
	<action>Stops shadow instance</action>
      </phase>

      <phase name="STARTSAP_PREPUT_RESMIN" password="QCGTLPLW">
	<!-- pwd: 13817 -->
	<args>
	  <arg>CENTRAL;START_SERVICE</arg>
	  <arg>DEVTRACE.LOG</arg>
	</args>
      </phase>
    </phaselist>
  </submodule>

  <!-- (cv) Now in original system  -->
  <phase name="RUN_RSPTBFIL_DEST_PRE" logfile="auto" elgfile="auto" password="YVGUKZWN">
       <!-- pwd: 68913 -->   
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_ORGDEST=SAP_RSPTBFIL(ACTION=ORGPREDEST,LOGFILE=RSPTBPDST.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBPDST\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PUTTB_SHD pre-destination filling</arg>
    </args>
    <action>Enters target release information in table PUTTB_SHD</action>
  </phase>

  <!-- ********************************************************************** -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
    <phaselist>
      <phase name="STOPSAP_PREPUT_RESMIN" password="SJVPQLMB">
	<!-- pwd: 97353 -->
	<args>
	  <arg>CENTRAL</arg>
	</args>
	<action>Stops SAP system</action>
      </phase>

      <phase name="START_SHDI_PREPUT_RESMIN" logfile="STARTSSC.LOG" password="YQQPHZXU">
	<!-- pwd: 83652 -->   
	<args>
	  <arg>START_SERVICE</arg>
	  <arg>DEVTRACE.LOG</arg>
	</args>
	<action>Starts the shadow system</action>
      </phase>
    </phaselist>
  </submodule>

  <!--  (jo+cv) JOB_RUTTTYPSET_PRE + JOB_RSSTORPA_PRE should not be needed  -->

  <!-- parallel distribution in shadow system -->
  <phase name="PARDISTPRE_SHD" logfile="PARDSHDPRE.LOG" connect="shadow" elgfile="PARDSHDPRE.ELG" password="CHOKYROF">
       <!-- pwd: 81640 -->   
    <args>
      <arg>10</arg>
      <arg>10</arg>
      <arg>10</arg>
      <arg></arg>
    </args>
    <action>Starts distributor</action>
  </phase>

  <!-- ********************************************************************** -->
  <!-- unset parameter after preput is done -->
  <phase name="SETUPGPAR_UNSETSQL4SHD" logfile="SETUPGPAR.LOG" connect="shadow" password="OCDEFTTC">
       <!-- pwd: 13107 -->   
    <args>
      <arg>DEL</arg>
      <arg>SQL4SHD</arg>
    </args>
    <!-- (jo 720) This is needed for the shadow system, so do it in the shadow system which is up now! -->
    <action>Remove parameter SQL4SHD</action>
  </phase>

  <!-- (jo 700.22) Dump shared memory statistics for shadow system -->
  <phase name="SHMD_STAT_SSIL_PRE" password="CRUUERMR">
       <!-- pwd: 34594 -->   
    <args>
      <arg>shadow</arg>
      <arg>SHMD_SSILP.LOG</arg>
      <arg>ENQSTAT_SSILP.LOG</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/dmpspc" />
    </options>
    <action>Dumps shared memory usage of shadow system</action>
  </phase>

  <!-- ********************************************************************** -->
  <!-- stop shadow instance -->
  <phase name="STOP_SHDI_PREPUT" logfile="STOPSHDI.LOG" password="KVYGUBAD">
       <!-- pwd: 66191 -->   
    <args>
      <arg></arg>
    </args>
    <action>Stops shadow instance</action>
  </phase>

  <!-- ********************************************************************** -->
  <!-- ********************************************************************** -->

  <!--  (jo 720) Must start system for next phase to succeed in case of resource minimized  -->
  <phase name="STARTSAP_PREPUT_RMPTB" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <args>
      <arg>CENTRAL;START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
  </phase>

  <!-- (cv) Now in original system  -->
  <!-- compute cp2shd, switch, modeflag, mvntabs -->
  <phase name="RUN_RSPTBFIL_PDIST_PRE" logfile="auto" elgfile="auto" password="SUMNHLPW">
       <!-- pwd: 94221 -->   
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_PDIST_PRE=SAP_RSPTBFIL(ACTION=PDIST_PRE,LOGFILE=RSPTBPPOD.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBPPOD\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PUTTB_SHD post distribution actions</arg>
    </args>
    <action>Enters distributor results in table PUTTB_SHD</action>
  </phase>

  <!-- ********************************************************************** -->
  <!--  (jo + cv) Moved after RUN_RSPTBFIL_PDIST_PRE  -->
  <!-- wh RUN_RSPTBFIL_DEST_PRE modifies PUTTB_SHD in a way that it has to be reread -->
  <phase name="READPUTTB_UPG_PRE" logfile="RDPUTTBPRE.LOG" password="SANGVLTY">
       <!-- pwd: 63887 -->   
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
  </phase>

  <!--  (jo 720) Undo phase MAIN_SHDINST/SQLDB_UNISETTAB2VIEW  -->
  <phase name="SQLDB_UNIUNSETTAB2VIEW" password="EASFFNXO">
    <!-- pwd: 78049 -->   
    <args>
      <arg>TABUNI_UNSETTAB2VIEW</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
  </phase>

  <phase name="STOPSAP_PREPUT_RMPTB" password="SJVPQLMB">
    <!-- pwd: 97353 -->
    <args>
      <arg>CENTRAL</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
    <action>Stops SAP system</action>
  </phase>

  <!-- ************************************************************ -->
  <!-- UPGRADE: PREPUT -->
  <!-- movenametab, drop/create synonyms, move nametab, create -->
  <!-- synonyms and start shadow instance again -->
  <!-- ************************************************************ -->
  <!-- clean shadow load tables -->
  <phase name="SQLSELEXE_TRUNCSHDLOADS_1" logfile="DROPSHDLOADS1.LOG" password="SNNTILGL">
       <!-- pwd: 18802 -->   
    <args>
      <arg>LOADTABLES_SHD</arg>
      <arg>TRUNC_TABLES</arg>
      <arg>SCRCLASSID;SHDNAME</arg>
    </args>
    <action>Cleans shadow load tables</action>
  </phase>

  <!-- ft 09/2013 External conversion of preput tables -->
  <phase name="XCNV_PREPUT_DUMP" logfile="XCNVDUMPPREPUT.LOG" connect="shadow" elgfile="XCNVDUPREPUT.ELG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>DUMP</arg>
      <arg>PRESHADOW</arg>
      <arg>XCNV_SHD</arg>
      <arg>XCNVPREPUT.SAP</arg>
    </args>
    <action>Writes the contents of tables for external conversion to the file system</action>
  </phase>
  <!-- ft 09/2013 Deletion of data (pool and cluster tables) -->
  <phase name="XCNV_PREPUT_DEL" logfile="XCNVDELEPREPUT.LOG" connect="shadow" elgfile="XCNVDEPREPUT.ELG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>DEL</arg>
      <arg>PRESHADOW</arg>
      <arg>XCNV_SHD_DEL</arg>
      <arg>XCNV_DEL</arg>
    </args>
    <action>Deletes from the system the contents of tables that have been written to the file system</action>
  </phase>

  <submoduleref name="SUBMOD_SHDALIASDEL" password="EHEMENGZ">
       <!-- pwd: 66195 -->   
  </submoduleref>

  <!-- External conversion of shadow tables -->
  <!-- (vd 50A.25) -->
  <phase name="PARMVNT_PRE" logfile="MVNTSHDPRE.LOG" elgfile="MVNTSHDPRE.ELG" password="GAVULJPI">
       <!-- pwd: 89289 -->   
    <args>
      <arg>TP_MOVENTABS_SHD</arg>
      <arg>INTDEL;INTACT;NOTOUCH;NOBUFFRESET;SHADOW_ONLY</arg>
      <arg>MF=F,STEP=S,RANGE-TS; MF=A,RANGE-TS; MF=J; MF=B,STEP=S</arg>
      <arg>MVNTSHD.TP0</arg>
    </args>
    <action>Activates nametab entries</action>
  </phase>

  <!-- *********************************************************************************** -->
  <submoduleref name="SUBMOD_SHDALIASCRE" password="IIIRBFVW">
    <!-- pwd: 92863 -->
    <defs>
      <def>HANDLEVIEWS=NO</def>
    </defs>
  </submoduleref>

  <!-- ft 09/2013 external conversion loading back the data -->
  <phase name="XCNV_PREPUT_LOAD" logfile="XCNVLOADPREPUT.LOG"
	 connect="shadow" elgfile="XCNVLOPREPUT.ELG" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <args>
      <arg>LOAD</arg>
      <arg>PRESHADOW</arg>
      <arg>XCNV_SHD</arg>
      <arg>XCNVPREPUT.SAP</arg>
    </args>
    <action>Converts tables externally and writes the contents back to the system</action>
  </phase>

  <submoduleref name="SUBMOD_SHDVIEWCRE" password="CRUUERMR">
    <!-- pwd: 34594 -->   
  </submoduleref>

  <!-- *********************************************************************************** -->

  <!-- => Import PREPUT data 
    (jo 720) is now main import, so aliases must be there and SHADOW_NTACT_RECP_PRE is no longer needed.
    -->
  <phase name="TABIM_PREPUT" connect="shadow" elgfile="TABIMPREPUT.ELG" password="MDTYRMXF">
       <!-- pwd: 2995 -->   
    <args>
      <arg>AFTERPREACT.BUF</arg>
      <arg>TABIMUPG.TP0</arg>
      <arg>AFTERPRETABIM.BUF</arg>
      <arg>parallelgroups</arg>
    </args>
    <action>Imports PREPUT data into the shadow tables</action>
  </phase>

  <if test="0"> <!-- (jo 720) Disable as discussed with Christiane  -->
  <!-- **************************************************************  -->
  <phase name="START_SHDI_PREPUT_R" logfile="STARTSSC.LOG" password="UZSUQHGJ">
       <!-- pwd: 89147 -->   
    <args>
      <arg></arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts the shadow system</action>
  </phase>

  <phase name="XPRAS_PREPUT" connect="shadow" elgfile="XPRASPREPUT.ELG" password="WJOGCDWP">
       <!-- pwd: 45107 -->   
    <args>
      <arg>AFTERPRETABIM.BUF</arg>
      <arg>XPRASSHD.TP0</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <action>Executes XPRAs and AIMs on the shadow instance</action>
  </phase>

  <phase name="STOP_SHDI_PREPUT_R" logfile="STOPSHDI.LOG" password="YDDPUZKH">
       <!-- pwd: 70121 -->   
    <args>
      <arg>STOP_SERVICE</arg>
    </args>
    <action>Stops shadow instance</action>
  </phase>
  </if>

  <!-- **************************************************************  -->

  <!-- TRUNCATE of DDMTT~/DDMTF~ via SQLDB-script (delete from or truncate) -->
  <phase name="SQLDB_DDMTT" logfile="SQLEXDDM.LOG" password="GRNLQJWF">
       <!-- pwd: 25431 -->   
    <args>
      <arg>TRUNCATE_DDMTT</arg>
      <arg></arg>
    </args>
    <action>Truncate DDMTT~ and DDMTF~</action>
  </phase>

  <!-- **************************************************************  -->
  <phase name="SQLDB_SHADOW" logfile="SQLEXSHD.LOG" password="WFJPKDCF">
       <!-- pwd: 27637 -->   
    <args>
      <arg>UPDATE_SHADOW</arg>
      <arg></arg>
    </args>
    <action>Update table SHADOW~</action>
  </phase>
  <phase name="SHDINST_CHK2_PRE" logfile="SHDINST_CHK2.LOG" password="CYOWKGMQ">
       <!-- pwd: 2600 -->   
    <action>Checks the shadow instance</action>
  </phase>
  <!-- Fix DDXTT? entries for Original views -->
  <phase name="FIX_DDXTT_DB4" logfile="FIXDDXTT.LOG" connect="shadow" password="GBTVWJUR">
       <!-- pwd: 59052 -->   
    <!-- (AM 720) -->
    <options>
      <option name="DBTYPE" value="DB2/400" />
    </options>
    <action>Reset DDXTT Flag for DB4</action>
  </phase>

  <!--  Preput for export case  -->
  <phase name="EU_SAVETAB_PPRESTORE" logfile="EUSAVETABR.LOG" connect="shadow" password="QVHZMPCL">
       <!-- pwd: 56325 -->   
    <args>
      <arg>RESTORE</arg>
      <arg>DDXTT;DDXTF</arg>
      <arg>SAVETABLES.DAT</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
  </phase>

  <!-- (jo 720) Unmask again  -->
  <phase name="SQLSELEXE_MAINIMP_UNMASK" password="WMVWJDLQ">
       <!-- pwd: 37086 -->   
    <args>
      <arg>TFAWFMAP.LST</arg>
      <arg>MAINIMPORT_UNMASKTABS</arg>
      <arg>PLAINBINFILE</arg>
    </args>
  </phase>
</phaselist>
</module>

 <module name="MAIN_SHDRUN" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Shadow System Operations: SPDD and Activation</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_SHDIMP)</postevent>
      <revokemodule>REV_PREPROC</revokemodule>
      <password>CRHHERMR</password>
      <!--  pwd: 95056  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
        <precedence>MAIN_SHDCRE</precedence>
        <precedence>MAIN_SHDINST</precedence>
        <precedence>MAIN_DTTRANSSHD</precedence>
        <precedence>MAIN_SHADOW</precedence>
        <precedence>MAIN_SHDPREPUT</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINShdRun.xml#247 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Shadow System Operation (after switch strategy) -->
  <!-- ************************************************************ -->

  <!--  (jo 720) Discussion with Christiane: Have DIFFEXP module now here after preput module  -->
  <submoduleref name="SUBMOD_DIFFEXP" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
  </submoduleref>
  <!-- ******************************************************* -->
  <!--  (jo + cv) This must come *after* DIFFEXP  -->  
  <phase name="TR_TRK2HEAP_INIT" logfile="TRSHDIN.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>CP2SHD_INIT</arg>
      <arg>TR_CP2SHD_INIT</arg>
    </args>
    <action>Copies requests to the SAPup buffer</action>
  </phase>
  <phase name="TP_ACTION_CP2SINI" logfile="CP2SHDI.LOG" elgfile="CP2SHDI.ELG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>TR_CP2SHD_INIT</arg>
      <arg>R3TRANS_CPYSHD_TABU</arg>
      <arg>R3E</arg>
      <arg>18</arg>
      <arg>8</arg>
      <arg>CP2SHDI.TP0</arg>
    </args>
    <action>Copies control entries to shadow tables</action>
  </phase>

  <!--  (jo 720) Moved SHADOW_NTACT_DEL after DIFFEXP module  -->
  <phase name="SHADOW_NTACT_DEL" logfile="NTSHDDEL.LOG" elgfile="NTSHDDEL.ELG" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <args>
      <arg>DELSHANT</arg>
      <arg>LOGICAL_ALSO</arg>
      <arg>NTSHDOP.TP0</arg>
    </args>
    <action>Deletes nametabs of shadow tables in the shadow nametab</action>
  </phase>

  <phase name="START_SHDI_FIRST" logfile="STARTSFI.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts the shadow system</action>
  </phase>
  <phase name="SETSYNC_SHD_STARTED" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <!-- pwd: 63747 -->
    <args>
      <arg>SHADOWINST</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (hk 720) -->
  <phase name="NANOTES_SHD" logfile="NANOTESSHD.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>SHD</arg>
      <arg>NANOTES.LST</arg>
      <arg>NANOTES.DMP</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="proddestvers" value="720-*" />
    </options>
    <action>Implement notes via call of Note Assistant</action>
  </phase>
  <phase name="RFCDEST_CREATE_S2O" logfile="CRRFCDESTS2O.LOG" connect="shadow" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>CREATE_NOPWD</arg>
      <arg>SHD2ORIG</arg>
    </args>
    <options>
      <!--  (jo 720) See 1377867 2011 - is useless for Resource-minimized  -->
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Creates RFC connection SAP_UPGRADE_ORIG_SYSTEM</action>
  </phase>
  
  <phase name="SQLDB_MSSPROCSIGN" logfile="MSSPROCSIGN.LOG" connect="shadow" password="QWFAXPHU">
    <!-- pwd: 97943 -->
    <args>
      <arg>MSSPROCSIGN</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>Performs specific actions</action>
  </phase>
  <phase name="SQLDB_MSSATMDEFBND" logfile="MSSATMDEFBND.LOG" connect="shadow" password="QWFAXPHU">
    <!-- pwd: 97943 -->
    <args>
      <arg>MSSATMDEFBND</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>Performs specific actions</action>
  </phase>

  <!-- cv (not needed anymore in case R3load creates the functions) --> 
  <!-- cv not needed for SUM SP11/12, need to check later again -->
  <!-- (ms + cv) if 740 SP12 is delivered with PREPUT we have to adapt the options or the call of RUTCNVFUNCCRE -->
  <if test="0">
  <phase name="RUN_RUTCNVFUNCCRE_SHD" logfile="RUTCNVFUNCCRESHD.LOG" connect="shadow" elgfile="RUTCNVFUNCCRESHD.ELG" password="SJVPQLMB">
      <!-- pwd: 97353 -->   
    <args>
      <arg>RUTCNVFUNCCRE</arg>
      <arg>SAP_FUNCCRE</arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTCNVFUNCCRE\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Create DB-functions</arg>
    </args>
    <options>
      <option name="destcomponent" value="SAP_BASIS(740(8-*))"/>
      <or>
        <option name="startcomponent" value="SAP_BASIS(740(*-7))"/>
        <option name="startcomponent" value="SAP_BASIS(*-731)"/>
      </or>
    </options>
    <action>Create necessary DB-functions for DD SQL-views</action>
  </phase>
  </if>
  <phase name="JOB_RSUPGCUA_SHD" logfile="PSUPGCUA.LOG" connect="shadow" elgfile="PSUPGCUA.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPGCUAGEN111</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGCUAGEN111\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>CUA GEN</arg>
    </args>
    <action>Performs specific actions</action>
  </phase>
  <!-- fill alternative nametab DDMTT, connect is set internally -->
  <phase name="ALTNTAB_FILL" logfile="ALTNTFI.LOG" elgfile="ALTNTFI.ELG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>30</arg>
    </args>
    <action>Creates alternative nametab DDMTT/DDMTF for distributor</action>
  </phase>
  <!-- (mh 620/4.26) Load generation for the shadow system -->
  <phase name="RUNASYN_RSGENLOAD" logfile="RSGENLOAD.LOG" connect="shadow" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>RSGENLOAD</arg>
      <arg></arg>
      <arg>LOAD GENERATION</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Genrates ABAP Loads on Shadow System on advance</action>
  </phase>
   <!--  Tino Rosenkranz: Run AIM for import BADI/SWF Objects  -->
  <phase name="JOB_BADIIMP_POSTPROC" connect="shadow" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <args>
      <arg>BADI_IMP_POSTPROC</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>BADI_IMP_POSTPROC.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>call AIMs in Shadow System for BADI/SFW check test objects</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/badi_check" />
      <option name="MODE" value="EXPORT" />
      <!-- <option name="ST_range" value="600-*" /> -->
    </options>
  </phase>
  <!-- ak 11/2013 -->
  <phase name="JOB_ZUPGMODEHPI_VERIFY" connect="shadow" logfile="auto" elgfile="auto" password="EASFFNXO" continue_on_oq_errors="true">
    <!-- pwd: 78049 -->   
    <args>
      <arg>ZUPGMODEHPI_VERIFY</arg>
      <arg>SAP&amp;_CHECK_DIS</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZUPGMODEHPI_VERIFY_D\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Check DISABLE CMOD FUNCS</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="feature_switch" value="/fa/cmod_check" />
      <option name="feature_switch" value="cmod_disabling" />
      <not>
        <option name="NOSTACKFILE" value="TRUE" />
      </not>
    </options>
    <action>Check status of test candidate for correct disablement</action>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- (af 710) Banking Platform specific -->
      <!-- Contact: Matthias Nahrgang -->
      <phase name="JOB_RBCA_FSP_UPG_WRITE" logfile="RBCA_FSP_UPG_WRITE.LOG" connect="shadow" elgfile="RBCA_FSP_UPG_WRITE.ELG" password="IKETXFFO">
           <!-- pwd: 19932 -->   
        <args>
          <arg>RBCA_FSP_UPG_WRITE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RBCA_FSP_UPG_WRITE\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Banking Platform specific adaptions</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="ST_range" value="620-*" />
          <option name="proddestvers" value="710-*" />
          <option name="destcomponent" value="FSAPPL" />
        </options>
        <action>Banking Platform specific checks</action>
      </phase>
      <!-- (mh 620.76) switch off BAdIs on shadow system -->
      <phase name="RUN_RSUPGBAD" logfile="RSUPGBAD.LOG" connect="shadow" elgfile="RSUPGBAD.ELG" password="IIVEBFVW">
           <!-- pwd: 66178 -->   
        <args>
          <arg>RSUPGBAD</arg>
          <arg>RSUPGBAD_SHD1</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPGBAD\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>DISABLE non-BASIS BADIs</arg>
        </args>
        <action>Disables all application BAdIs</action>
      </phase>
      <!-- (ps leanbyd) -->
      <!-- (WH10) not only LeanBYD -->
      <phase name="JOB_RSUPG_WRP" logfile="RSUPGWRP.LOG" connect="shadow" elgfile="RSUPGWRP.ELG" password="SEFKNLNI">
           <!-- pwd: 32478 -->   
        <args>
          <arg>RSUPG_WRP_REGEN_SAPALL</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPG_WRP_REGEN_SAPALL\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Regenerate profiles</arg>
        </args>
        <options>
          <option name="SECOND_SHD" />
        </options>
        <action>Regenerate profiles</action>
      </phase>
      <!-- (vd 610.26) -->
      <phase name="JOB_RSUPDTEC_SHD" logfile="PSUPDTECSHD.LOG" connect="shadow" elgfile="PSUPDTEC.ELG" password="AFCGWVMT">
           <!-- pwd: 33621 -->   
        <args>
          <arg>RSUPDTEC</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPDTEC\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Adapts technical settings for TABART-TABSPACE mappings</arg>
        </args>
	<if test="0"> <!--  (jo) We need this also in PREPUT to correct MAIN_SHDRUN/SUBMOD_DIFFEXP/JOB_RDDSAVTE  -->
          <options>
	    <!--  (jo 720) Only do this if we don't have a preput  -->
            <not><option name="HASANYPUTSTEP(PREPUT.BUF)" value="AR" /></not>
          </options>
	</if>
        <action>Adapts technical settings for TABART-TABSPACE mappings</action>
      </phase>
      <phase name="JOB_RDDNEWPP_SHD" logfile="RDDNEWPP.LOG" connect="shadow" elgfile="RDDNEWPP.ELG" password="AMBAVVVE">
           <!-- pwd: 12335 -->   
        <args>
          <arg>RDDNEWPP</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg></arg>
          <arg>5</arg>
          <arg>RDDIMPDP SCHEDULING</arg>
        </args>
        <action>Reschedules RDDIMPDP</action>
      </phase>
      <!-- (vd 610.12) inactive nametab copy YTT -> XTT -->
      <!-- phase 1+4 = central basis + views -->
      <!-- mh 620/3: DDYTT is empty, RDDYT2NT removed -->
      <!-- (mh 620.11.39) RDDNT5MD replaces RUN_RDDNT4MD and RUN_RDDYT2NT -->
      <phase name="RUN_RDDNT5MD" logfile="PDDNT4MD.LOG" connect="shadow" elgfile="PDDNT4MD.ELG" password="WJOGCDWP">
           <!-- pwd: 18134 -->   
        <args>
          <arg>RDDNT5MD</arg>
          <arg>SAP_NTABADAPT</arg>
          <arg>NO-IGNORE</arg>
          <arg>RDDNT4MD\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>INACT. NAMETAB ADAPTION</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
        </options>
        <action>Adjusts structure changes to the source release</action>
      </phase>
      <!-- (jo 700/2) see IM 784686 2006: TABUIMP_CNV seems to parallelize some after import method, causing deadlocks. -->
      <phase name="JOB_RSUPGCUA_TIMCNV" logfile="PSUPGCUA.LOG" connect="shadow" elgfile="PSUPGCUA.ELG" password="KABYXBZW">
           <!-- pwd: 47366 -->   
        <args>
          <arg>RSUPGCUAGEN111</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPGCUAGEN111\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CUA GEN</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="ST_range" value="*-700" />
        </options>
        <action>Performs specific actions</action>
      </phase>
    </phaselist>
  </submodule>
  <phase name="TABUIMP_CNV" connect="shadow" elgfile="TABUCNV.ELG" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <args>
      <arg>TABUCNV.BUF</arg>
      <arg>TABUCNV.TP0</arg>
      <arg></arg>
      <arg>buffertest=I</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Imports (a small number of) table entries needed to start </action>
    <action>the system with the new SAP Kernel</action>
  </phase>
  <if test="0">
    <!-- ae ehpi update SVERS~ after preput because R3trans handling of DD43L and DD43T depends on the version in SVERS CSN 671857 2010 -->
    <phase name="SQLDB_UPDATE_SHDSVERS" logfile="UPDSVERSSHD.LOG" password="MVWDHMJL">
         <!-- pwd: 5514 -->   
      <args>
        <arg>UPDATE_SVERS_SHD</arg>
	<arg></arg>
      </args>
      <options>
        <option name="MODE" value="CLONE" />
      </options>
      <action>Write destination release in SVERS~</action>
    </phase>
  </if>

  <!-- DDIC Import -->
  <phase name="TR_STORE2BUFFER_SHDINC" password="EASFFNXO"> <!-- pwd: 78049 -->
    <args>
      <arg>APPSHDBUF.TP0</arg>
      <arg>SHDINC.BUF</arg>
      <arg></arg>
    </args>
  </phase>

  <!-- (jo + ft 721) Separate DDIC_UPG in command file and DDIC import:
       The buffer starts with TR_EXPPREPUT transports which must have umod=1
       since they were already imported in the PREPUT. The following transports
       (e. g. TR_UPGRADE) do not have umod=1.
       If DDIC_UPG was repeated with "init", the preput transports were imported
       again (due to umod=1), but not the following ones, leading to a mess.
    -->
  <phase name="CMDFILE_UPG" connect="shadow" elgfile="CMDFILE.ELG" password="YVGUKZWN">
       <!-- pwd: 68913 -->
    <args>
      <arg>SHDINC.BUF</arg>
      <arg>CMDFILE.TP0</arg>
      <arg>AFTERCMDFILE.BUF</arg>
      <arg></arg>
    </args>
    <action>Command file import of all SAP packages</action>
  </phase>

  <!-- (jo + cv 720) SFW_PACKAGE had problems due to missing buffersync after DDIC_UPG -->
  <phase name="DDIC_UPG" autorepeat="1" connect="shadow" buffersync="true" elgfile="DDICUPG.ELG" password="YVGUKZWN">
       <!-- pwd: 68913 -->   
    <args>
      <arg>AFTERCMDFILE.BUF</arg>
      <arg>DDICUPG.TP0</arg>
      <arg>AFTERDDIC.BUF</arg>
      <arg>parallelgroups</arg>
    </args>
    <action>DDIC import of all SAP packages and of SPDD results</action>
  </phase>

  <phase name="RUN_RSUMOD10_SPDD_SHD" connect="shadow" logfile="AMODSPDD.LOG" elgfile="AMODSPDD.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUMOD10</arg>
      <arg>SAP_UPG_SPDD</arg>
      <arg>NO-IGNORE</arg>
      <arg>AMODPROT\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>MOD CLASSIFICATION ERRORS</arg>
    </args>
    <action>SPDD preparation: Classify modified objects</action>
  </phase>

  <submodule password="KRGCCBGT">
    <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
    <phaselist>
      <phase name="TR_STORE2BUFFER_CUST" password="EASFFNXO"> <!-- pwd: 78049 -->
	<args>
	  <arg>APPSHDBUF.TP0</arg>
	  <arg>CMDFILE_CUST.BUF</arg>
	  <arg></arg>
	</args>
      </phase>
    
      <phase name="CMDFILE_CUST" connect="shadow" buffersync="true" elgfile="CMDFILECUST.ELG" password="IEDAJFBM">
	<!-- pwd: 40231 -->   
	<args>
	  <arg>CMDFILE_CUST.BUF</arg>
	  <arg>CMDFILECUST.TP0</arg>
	  <arg>DDIC_CUST.BUF</arg>
	  <arg>nochkimpdp;custclient;parallelgroups;checkaccimport</arg>
	</args>
	<action>Command file import for all customer transports</action>
      </phase>
      
      <!-- (stm) DDIC Import of custommer transports and versioning before import-->      
      <phase name="DDIC_CUST" autorepeat="1" connect="shadow" buffersync="true" elgfile="DDICUPGCUST.ELG" password="WCPMDDNE">
	<!-- pwd: 11646 -->   
	<args>
	  <arg>DDIC_CUST.BUF</arg>
	  <arg>DDICUPGCUST.TP0</arg>
	  <arg>ACTUPG_CUST.BUF</arg>
	  <arg>custclient</arg>
	</args>
	<action>DDIC import of customer transports</action>
      </phase>
    </phaselist>
  </submodule>

  <phase name="SQLDB_DD1217" logfile="DD12LDD17S.LOG" password="CHOKYROF">
       <!-- pwd: 81640 -->   
    <args>
      <arg>DD12L_DD17S</arg>
      <arg></arg>
    </args>
    <action>Deletes secondary index KEY of table PFO_GO_00IS</action>
  </phase>

  <!-- cv: needed for 740-SP1 delivery and higher as preparation step for the DDIC_XPRAs -->
  <phase name="JOB_RSDELIVERY740" logfile="PSDELIV740.LOG" connect="shadow" elgfile="PSDELIV740.ELG" password="SUMNHLPW">
       <!-- pwd: 94221 -->   
    <args>
      <arg>RSDELIVERY740</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSDELIVERY740\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>CHECK DELIVERY OF TABLES AND INDEXES IN 740</arg>
    </args>
    <options>
      <not>
        <option name="MODE" value="EXPORT" />
      </not>
      <option name="realdestvers" value="740-799" />		
      <option name="ST_range" value="*-739" />
    </options>
    <action>Creates a list of indexes and tables delivered with 740</action>
  </phase>

  <phase name="JOB_RSWBOUP1_SHD" logfile="PSWBOUP1.LOG" connect="shadow" elgfile="PSWBOUP1.ELG" password="SUMNHLPW">
       <!-- pwd: 94221 -->   
    <args>
      <arg>RSWBOUP1</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSWBOUP1\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>CTS MIGRATION PART 1</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Initializes and adjusts tables for the Workbench Organizer</action>
  </phase>
  <!-- (vd 620.22) for generation of shadow access to org include (since 620) -->
  <phase name="RUN_RSINCGEN_SHD1" logfile="PSINCGEN.LOG" connect="shadow" elgfile="PSINCGEN.ELG" password="EWIWUCUS">
       <!-- pwd: 9911 -->   
    <args>
      <arg>RSINCGEN</arg>
      <arg>SAP_SH1_RSINCL</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSINCGEN_SHD\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>RS SHD INCLUDE GENERATION</arg>
    </args>
    <action>Generates include program for accessing original tables</action>
  </phase>
  <submoduleref name="SUBMOD_SHDPREPEXP" password="QOIFNPTA">
       <!-- pwd: 33718 -->   
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
  </submoduleref>

 <!-- (vd 620.55) the sorting maechanism schould be run after the DDIC-Imp -->
  <phase name="JOB_UMOD20_UPG" logfile="PSUMOD20.LOG" connect="shadow" elgfile="PSUMOD20.ELG" password="CRUUERMR">
       <!-- pwd: 34594 -->   
    <!-- 61009 -->
    <args>
      <arg>RSUMOD20</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>IMODPROT\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>IS-FIELD MERGE</arg>      
    </args>
    <options>
      <option name="realdestvers" value="*-759" />	
     </options> 
     <action>Brings the structure of tables into line with the database</action>
  </phase>

  <!-- (vd 620.uc) Pool adaptions for UNICODE (K. Hoeft) -->
  <phase name="RUN_RADTBUCACT" logfile="PADTBUC.LOG" connect="shadow" elgfile="PADTBUC.ELG" password="OCDEFTTC">
       <!-- pwd: 13107 -->   
    <args>
      <arg>RADTBUCACT</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RADTBUCACT\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Pool adaptions for UNICODE</arg>
    </args>
    <options>
      <option name="UNICODE_only" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>UNICODE only: Adjusts ABAP Dictionary entries</action>
  </phase>

  <!-- cv 10/13 -->
  <phase name="RUN_RUTPREDEPVIEWS4DEL" logfile="auto" connect="shadow" elgfile="auto" password="IBWKCFML">
       <!-- pwd: 58952 -->   
    <args>
      <arg>RUTPREDEPVIEWS4DEL</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTPREDEPVIEWS4DEL\.$(SAPSID)</arg>
      <arg>0</arg>
      <arg>Prepare deletions of some views of SAP_FIN</arg>
    </args>
    <options>
      <not> <option name="startcomponent" value="SAP_FIN(700-*)" /> </not>
      <option name="destcomponent" value="SAP_FIN(700-*)" />  
    </options>
    <action>Prepare deletions of some views of SAP_FIN</action>
  </phase>

  <!-- (fhw 700sr1) DB6 only -->
  <phase name="DB6_ACTIONS" password="SANGVLTY">
       <!-- pwd: 63887 -->   
    <args>
      <arg>DB6ACTIO.LST</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>runstats listed tables</action>
  </phase>

  <!-- ************************************************************************** -->
  <!--  (jo 720) EHPI now also creates "AFTERDDIC.BUF" and immediately hands it down
    **   to "ACTUPG.BUF"
    **  (jo 720) After cleaning up of ADDTOBUF_MCM/SFW buffer stuff, we use this generic
    **   phase to generate the ACT buffer, adding
    -->
  <phase name="BUFFEROP_ACTUPG" password="QIHMZPPY">
       <!-- pwd: 28996 -->   
    <args>
      <arg>MRG_ACTUPG</arg>
      <arg>DDICUPG.TPP</arg>
    </args>
    <action>Merges buffer for ACT_UPG phase</action>
  </phase>

  <!-- ************************************************************************** -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
    <phaselist>
      <!-- (jo 720) To support customer transports, we need to feed a separate
	   buffer "ACTUPGIN.BUF" into ACT_UPG phase. This is a merge of the
	   ACTUPG.BUF + AFTERDDIC_CUST.BUF
	-->
      <phase name="BUFFEROP_ACTUPGIN" password="KVYGUBAD">
           <!-- pwd: 66191 -->   
        <args>
          <arg>MRG_ACTUPGIN</arg>
          <arg>DDICUPG.TPP</arg>
        </args>
        <action>Merges input buffer for ACT_UPG phase</action>
      </phase>
      <!-- Activation -->
      <phase name="ACT_UPG_CUST" unlockonerror="true" connect="shadow" elgfile="ACTUPG.ELG" password="YXPJGZGF">
           <!-- pwd: 55238 -->   
        <args>
          <arg>ACTUPGIN.BUF</arg>
          <arg>ACTUPG.TP0</arg>
          <arg>ACTUPGEND.BUF</arg>
          <arg></arg>
        </args>
        <action>Activates ABAP Dictionary customer objects</action>
        <usage>If necessary adjust ABAP Dictionary objects using transaction SPDD</usage>
      </phase>
      <!-- (jo 720) This will copy ACTUPG.BUF to SHDINCIMP.BUF and delete putstep "A"  -->
      <phase name="BUFFEROP_SHDINCIMP" password="SNNTILGL">
           <!-- pwd: 18802 -->   
        <args>
          <arg>MRG_SHDINCIMP</arg>
          <arg>ACTUPG.TPP</arg>
        </args>
        <action>Merges input buffer for SHADOW_IMPORT_INC phase</action>
      </phase>
      <!-- (jo 720) This will copy AFTERDDIC_CUST.BUF to SHDINCIMP_CUST.BUF and delete putstep "A"  -->
      <phase name="BUFFEROP_SHDINCIMP_CUST" password="EHEMENGZ">
           <!-- pwd: 66195 -->   
        <args>
          <arg>MRG_SHDINCIMP_CUST</arg>
          <arg>ACTUPG.TPP</arg>
        </args>
        <action>Merges customer input buffer for SHADOW_IMPORT_INC phase</action>
      </phase>
    </phaselist>
  </submodule>
  <!-- Activation -->
  <phase name="SQLDB_SET_TIMESTAMP_E070SHD" logfile="SET_TIMESTAMP_E070SHD.LOG" password="ADGEAVCB">
       <!-- pwd: 64513 -->   
    <args>
      <arg>SET_TIMESTAMP_E070SHD</arg>
      <arg></arg>
    </args>
    <options>
    	<not><option name="MODE" value="EXPORT" /></not>
    </options>
    <action>Sets E070~ Timestamp</action>
  </phase>
  <phase name="UPDATE_DBSTATS_DB2_ACT_UPG" password="YDDPUZKH">     <!-- pwd: 70121 -->   
    <args>
      <arg>FILE</arg>
      <arg>bin</arg>
      <arg>DB2RUNPH.LST</arg>
      <arg>ACT_UPG=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
        <option name="DBTYPE" value="DB2-z/OS" />
    </options>
  </phase>
  <phase name="ACT_UPG" autorepeat="$ISENABLED($ENVVAL(/dev/act_autorepeat))" unlockonerror="true" connect="shadow" elgfile="ACTUPG.ELG" password="GAVULJPI">
       <!-- pwd: 89289 -->   
    <args>
      <arg>ACTUPG.BUF</arg>
      <arg>ACTUPG.TP0</arg>
      <arg>SHDINCIMP.BUF</arg>
      <arg></arg>
    </args>
    <action>Activates ABAP Dictionary customer objects</action>
    <usage>If necessary adjust ABAP Dictionary objects using transaction SPDD</usage>
    <options>
      <not>
        <option name="HASTRTYPE" value="TR_CUSTOMER" />
      </not>
    </options>
  </phase>
  
  <phase name="RUNASYN_GENER8_SHD1_MIN" connect="shadow" logfile="GENER8_SHD_MIN.LOG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_SHD_GENER8_MINIMAL</arg> 
      <arg>SAP_SHD_GENER8_MIN</arg>
      <arg>Generates the loads needed for the most basic transactions</arg>
    </args>
    <action>Generates the loads needed for the most basic transactions</action>
    <options>
      <or>
        <option name="ITERATIVE_UPG" />
        <option name="ZERODOWNTIME_UPG" /> 
      </or>
	  <option name="feature_switch" value="/dev/gener8_shd_min" />
    </options>
  </phase> 
  
  <phase name="RUN_RTO_CALLER_MODIFY" connect="shadow" logfile="RTO_CALLER.LOG" elgfile="RTO_CALLER.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_RTO_CALLER</arg> 
      <arg>SAP_RTO_MODTG</arg>
      <arg></arg>
      <arg>RTO_CAL_MODTG\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>RTO Caller calling all RTOs modifications</arg>
    </args>
    <action>RTO Caller calling all RTOs modifications</action>
    <options>
      <or>
        <option name="ITERATIVE_UPG" />
        <option name="ZERODOWNTIME_UPG" /> 
      </or>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="700-*" />
    </options>
  </phase> 
  
  <phase name="RUN_RTO_DELETE_TABLE" connect="shadow" logfile="RTO_DELETE_TABLE.LOG" elgfile="RTO_DELETE_TABLE.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_RUN_TASK_ONCE</arg> 
      <arg>TABLE_DELETE</arg>
      <arg></arg>
      <arg>RTO_DELETE_TABLE\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Delete StressMaker tables</arg>
    </args>
    <action>Delete StressMaker tables</action>
    <options>
      <option name="ZERODOWNTIME_UPG" /> 
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="700-*" />
    </options>
  </phase> 
  
    <phase name="RUN_RTO_TABLIST_WRITETABLST" logfile="RTO_TABLIST_WRITETABLST.LOG" elgfile="RTO_TABLIST_WRITETABLST.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>TABLIST_WRITETABLST</arg>
      <arg></arg>
      <arg>RTO_TABLIST_WRITETABLST\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>CRRTABLIST Test add to CRRTABLIST.LST</arg>
    </args>
    <action>CRRTABLIST Test add to CRRTABLIST.LST</action>
    <options>
      <option name="ITERATIVE_UPG" />
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="700-*" />
    </options>
  </phase>  
  
  <!-- (sm 720) Switch framework handling for customer transports-->
  <submodule password="KRGCCBGT">
    <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
    <phaselist>
      <phase name="CONVBUFFER_CUSTTRANS_B2L" logfile="CNVBFCUSTTRB2L.LOG" connect="shadow" password="IIIRBFVW">
           <!-- pwd: 92863 -->   
        <args>
          <arg>BUFFER2LIST</arg>
          <arg>SYNCMARKS</arg>
          <arg>DDIC_CUST.BUF</arg>
          <arg>CUSTTRANS.LST</arg>
        </args>
        <action></action>
      </phase>
      <phase name="SFW_CHECK_CUST" logfile="SFWCHECKCUST.LOG" password="IIIRBFVW">
	<!-- pwd: 92863 -->   
	<!-- SFW_CHECK_CUST must run after CONVBUFFER_CUSTTRANS_B2L so that CUSTTRANS.LST is filled. -->
	<args>
	  <arg>CUSTTRANS.LST</arg>
	</args>
	<action>Check, if customer transports contain SFW objects</action>
      </phase>
      <submodule password="KRGCCBGT">
	<options>
	  <option name="CUST_HAS_SFW_OBJ" />
	</options>
	<phaselist>
	  <!-- (sm 720) Second SFW tableset check in shadow system (needed, if the preput is only available in the shadow system)-->
	  <phase name="SFW_FIND_TABSET_CUST" logfile="SFWTABSCUST.LOG"
		 password="WIDSRDRG">
	    <!-- pwd: 92795 -->
	    <action>Check, which SFW tables need to be rescued</action>
	  </phase>
	  <phase name="SQLDB_SFW_CLEARTABS" logfile="SFW_CLEARTABS.LOG"
		 password="WHFRGDMX">
	    <!-- pwd: 23394 -->
	    <args>
	      <arg>SFW_CLEARTABS</arg>
	      <arg></arg>
	    </args>
	    <options>
	      <or>
		<!-- startrelease 7.02 < SP3 -->
		<option name="startcomponent" value="SAP_BASIS(702(0-2))" />
		<!-- targetrelease 7.02 < SP3 -->
		<option name="destcomponent" value="SAP_BASIS(702(0-2))" />
	      </or>
	    </options>
	    <action>Clear unexpected content of new SFW tables</action>
	  </phase>
	</phaselist>
      </submodule>
      <!-- (sm 720) Set lockflag for customer transports -->
      <phase name="RUN_RSUPDATE_LOCKFLAG_7" logfile="RSUPDATE_LOCKFLAG_7.LOG" connect="shadow"
	     elgfile="RSUPDATE_LOCKFLAG_7.ELG" password="YLAKEZYB">
           <!-- pwd: 80490 -->   
        <args>
          <arg>RSUPDATE_LOCKFLAG_WRAPPER</arg>
          <arg>UPDLOCKF7</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPDATE_LOCKFLAG_7\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg></arg>
        </args>
      </phase>
    </phaselist>
  </submodule>

  <!-- (jo 720) For ICNV with DDL's -->
  <phase name="RUN_RSDDLCNV_ACT" logfile="RSDDLCNVACT.LOG" connect="shadow" elgfile="RSDDLCNVACT.ELG" password="MDTYRMXF">
       <!-- pwd: 2995 -->   
    <args>
      <arg>RSDDLCNV</arg>
      <arg>SAP_RSDDL_ACT</arg>
      <arg>IGNORE</arg>
      <arg>RSACTICN\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Prepare for ICNV for DDL's</arg>
    </args>
    <options>
      <option name="strategy" value="Downtime-minimized" />
      <not>
        <option name="icnv4ddl" value="none" />
      </not>
    </options>
  </phase>
   <!-- (cv 700.07) -->
  <phase name="RUN_RSGENVIEWSTRUC" logfile="PSGENVIW.LOG" connect="shadow" elgfile="PSGENVIW.ELG" password="UZSUQHGJ">
       <!-- pwd: 89147 -->   
    <!-- (jo 720) -->
    <args>
      <arg>RSGENVIEWSTRUC</arg>
      <arg>SAP_GENVSTRUC</arg>
      <arg>IGNORE</arg>
      <arg>RSGENVIW\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Generate view sources</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>generates view sources</action>
  </phase>

  <submodule password="KRGCCBGT" execparallel="true">
    <!--   cv   -->
    <phaselist>
      <!-- (ps 700-1.09) -->
      <phase name="JOB_RDDPRHS" logfile="PRDDPRHS.LOG" connect="shadow" elgfile="PRDDPRHS.ELG" password="WJOGCDWP">
           <!-- pwd: 45107 -->   
        <args>
          <arg>RDDPRHS</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RDDPRHS\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>SAVE SPDD DEC</arg>
        </args>
        <action>saves spdd informations</action>
      </phase>
      <!-- (ps 640-2.24) Report from Ute Buehler to update DD40L in Unicode upgrade -->
      <phase name="JOB_RUTTTYPSET" logfile="PUTTTYPSET.LOG" connect="shadow" elgfile="PUTTTYPSET.ELG" password="YDDPUZKH">
           <!-- pwd: 70121 -->   
        <args>
          <arg>RUTTTYPSET</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RUTTTYPSET\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>UPDATE DD40L</arg>
        </args>
        <options>
          <option name="UNICODE_only" />
        </options>
        <action>Runs only in UNICODE to update DD40L</action>
      </phase>
      <phase name="JOB_RSSTORPA" logfile="PSSTORPA.LOG" connect="shadow" elgfile="PSSTORPA.ELG" password="GRNLQJWF">
           <!-- pwd: 25431 -->   
        <args>
          <arg>RSSTORPA</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSSTORPA\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>STORAGE PARAMETER ADAPTION</arg>
        </args>
        <action>Saves memory parameters for distributor</action>
      </phase>
    </phaselist>
  </submodule>

  <submoduleref name="SUBMOD_PREP_DDIC_740" password="WFJPKDCF">
       <!-- pwd: 27637 -->   
    <options>
      <option name="realdestvers" value="740-799" />		
      <option name="ST_range" value="*-739" />
    </options> 
  </submoduleref>

  <submoduleref name="SUBMOD_MIG_SMIGR" password="WFJPKDCF">
       <!-- pwd: 27637 -->   
    <options>	
      <option name="MIGRATE_SECONDDB" />
    </options> 
  </submoduleref>
  
  <phase name="RUN_RSPTBFIL_INISHD" logfile="auto" connect="shadow" elgfile="auto" password="GBTVWJUR">
       <!-- pwd: 59052 -->   
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_INISHD=SAP_RSPTBFIL(ACTION=INI_SHD,LOGFILE=RSPTBSHDIN.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBSHDIN\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PUTTB_SHD destination filling</arg>
    </args>
    <action>Enters target release information in table PUTTB_SHD</action>
  </phase>

    <!-- ********************************************************************************************* -->
  <!-- WH09 - START:set of new phases to restart the shadow systen after shadow import -->
  <!-- ********************************************************************************************* -->
  <phase name="RUN_RSCPINTS_PREP" logfile="RSCPPRP.LOG" connect="shadow" elgfile="RSCPPRP.ELG" password="CYOWKGMQ">
       <!-- pwd: 2600 -->   
    <args>
      <arg>RSCPINTS</arg>
      <arg>SAP_PREP_SHD</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSCPPRP\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PREPARE Distribution of shadow system</arg>
    </args>
    <options>
      <option name="SECOND_SHD" />
    </options>
    <action>Save DDIC tables</action>
  </phase>
  <!-- ******************************************************************************************* -->
  <!-- WH09 - END:set of new phases to restart the shadow systen after shadow import -->
  <!-- ******************************************************************************************* -->
  <phase name="RUN_RSPTBFIL_DEST" logfile="auto" elgfile="auto" connect="shadow" password="GBTVWJUR">
       <!-- pwd: 59052 -->   
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_DEST=SAP_RSPTBFIL(ACTION=DEST,LOGFILE=RSPTBDST.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBDST\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PUTTB_SHD prepare distribution</arg>
    </args>
    <action>Prepares distribution run in table PUTTB_SHD</action>
  </phase>

  <!-- Create TBATG entries for secondary indices -->
  <!-- find indices that could be created during uptime -->
  <phase name="RUN_INDC_UPG" logfile="INDEXCHK.LOG" connect="shadow" elgfile="INDEXCHK.ELG" password="QVHZMPCL">
       <!-- pwd: 56325 -->   
    <args>
      <arg>RDDINDCH</arg>
      <arg>SAP_INDEXCHK</arg>
      <arg>NO-IGNORE</arg>
      <arg>INDCHK\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>INDEX CHECK</arg>
    </args>
    <action>Checks secondary indexes</action>
  </phase>

  <!-- drop table RFCKEYSS, only necessary with start release 46C -->
  <phase name="SQLDB_CLEARRFCKEYSS" password="WMVWJDLQ">
       <!-- pwd: 37086 -->   
    <args>
      <arg>CLEAR_RFCKEYSS</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="ST_range" value="*-46D" />
    </options>
    <action>Deletes table RFCKEYSS</action>
  </phase>
 
  <!-- parallel distribution in shadow system -->
  <phase name="PARDIST_SHD" logfile="PARDSHD.LOG" connect="shadow" elgfile="PARDSHD.ELG" password="CZZKVGRZ">
       <!-- pwd: 6418 -->   
    <args>
      <arg>20</arg>
      <arg>10</arg>
      <arg>10</arg>
      <arg></arg>
    </args>
    <action>Starts distributor</action>
  </phase>
  <!-- get the list of tables marked for external convertion modeflag = U and save it for future update statistics -->
  <phase name="GET_XCNV_TABLES" logfile="GET_XCNV_TABLES.LOG" connect="shadow" password="IAYJRFHC">
       <!-- pwd: 17253 -->   
    <args>
      <arg>XCNV_TABLES.LST</arg>
    </args>
    <action>Get list of tables marked for external convertion with standard dictionary means</action>
  </phase>
  <!-- ICNV filter -->
  <!-- (ps 610.102) -->
  <phase name="JOB_RSNTICNV" logfile="PSNTICNV.LOG" connect="shadow" elgfile="PSNTICNV.ELG" password="IBWKCFML">
       <!-- pwd: 58952 -->   
    <args>
      <arg>RSNTICNV</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTNTICN\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>ICNV FILTER</arg>
    </args>
    <options>
      <option name="USE_ICNV" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Calculates candidates for ICNV</action>
  </phase>

  <!-- cv 09/13 -->
  <phase name="RUN_RUTRN2VIEW" logfile="auto" connect="shadow" elgfile="auto" password="IBWKCFML">
       <!-- pwd: 58952 -->   
    <args>
      <arg>RUTCOMPLETERN2VIEW</arg>
      <arg>SAP_RENAME</arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTCOMPLETERN2VIEW\.$(SAPSID)</arg>
      <arg>0</arg>
      <arg>Prepare rename statements for some tables of SAP_FIN</arg>
    </args>
    <options>
      <not> <option name="startcomponent" value="SAP_FIN(700-*)" /> </not>
      <option name="destcomponent" value="SAP_FIN(700-*)" />  
      <option name="DBTYPE" value="HDB" />        
    </options>
    <action>Prepare rename statements for some tables of SAP_FIN</action>
  </phase>

  <phase name="SETUPGPAR_COPYFROM_UPTIME" logfile="SETUPGPAR.LOG" password="MQLQXXTE">
       <!-- pwd: 91684 -->   
    <args>
      <arg>SET</arg>
      <arg>COPYFROM_UPTIME=YES</arg>
    </args>
    <options>
      <option name="SECOND_SHD" />
      <option name="feature_switch" value="cpfrom_uptime" />
    </options>
    <action>Makes parameter settings for the ISU stress maker tool</action>
  </phase>
  <!-- compute cp2shd, switch, modeflag, mvntabs -->
  <phase name="RUN_RSPTBFIL_PDIST" logfile="auto" elgfile="auto" connect="shadow" password="YOHALZNC">
       <!-- pwd: 57484 -->   
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_POSTDIST=SAP_RSPTBFIL(ACTION=POSTDIST,LOGFILE=RSPTBPOD.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBPOD\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>PUTTB_SHD post distribution actions</arg>
    </args>
    <action>Enters distributor results in table PUTTB_SHD</action>
  </phase>
  <!-- (jo 720) Synchronize PUTTB_SHD  (IM 2547477 2011) -->
  <phase name="READPUTTB_PDIST" logfile="RDPUTTBPDIST.LOG" connect="shadow" password="YHIGMZER">
       <!-- pwd: 70598 -->   
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
  </phase>
  <!-- check distributor result -->
  <phase name="JOB_RSCHECKDIST" logfile="PSCHECKDIST.LOG" connect="shadow" elgfile="PSCHECKDIST.ELG" password="MBCOOXWZ">
       <!-- pwd: 73324 -->   
    <args>
      <arg>RS_CHECK_DISTRESULT</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RS_CHECK_DISTRESULT\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>CHECK DISTRIBUTOR RESULT</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/db02chk_final" />
      <option name="realdestvers" value="731-799" />
    </options>
    <action>Checks SQL-statements calculated by distributor</action>
  </phase> 
  <!-- (jo 720) For ICNV with DDL's -->
  <phase name="RUN_RSDDLCNV_DISAUT" logfile="RSDDLCNVDIS.LOG" connect="shadow" elgfile="RSDDLCNVDIS.ELG" password="MEJEVXLA">
       <!-- pwd: 68057 -->   
    <args>
      <arg>RSDDLCNV</arg>
      <arg>SAP_RSDDL_DSA</arg>
      <arg>IGNORE</arg>
      <arg>RSDISICN\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Prepare for ICNV for DDL's</arg>
    </args>
    <options>
      <option name="strategy" value="Downtime-minimized" />
      <option name="icnv4ddl" value="automatic" />
    </options>
  </phase>
  <!-- (jo 720) For ICNV with DDL's -->
  <phase name="RUN_RSDDLCNV_DISMAN" logfile="RSDDLCNVDIS.LOG" connect="shadow" elgfile="RSDDLCNVDIS.ELG" password="YAWZNZVG">
       <!-- pwd: 96861 -->   
    <args>
      <arg>RSDDLCNV</arg>
      <arg>SAP_RSDDL_DSM</arg>
      <arg>IGNORE</arg>
      <arg>RSDISICN\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Prepare for ICNV for DDL's</arg>
    </args>
    <options>
      <option name="strategy" value="Downtime-minimized" />
      <option name="icnv4ddl" value="manual" />
    </options>
  </phase>
  <!-- (jo 720) Requested by Levke to remove tables below threshholds -->
  <phase name="ICNV_FILTER_DDL" logfile="ICNVFILTDDL.LOG" password="WHFRGDMX">
       <!-- pwd: 23394 -->   
    <args>
      <arg></arg>
    </args>
    <options>
      <option name="strategy" value="Downtime-minimized" />
      <not>
        <option name="icnv4ddl" value="none" />
      </not>
    </options>
  </phase>
  <!-- (mh 620/4.11) DDXTT-TABLSIZE filling -->
  <phase name="RUN_RSUPG_DDXTT_TABLSIZE" logfile="RSUPG_DDXTT_TABLSIZE.LOG" connect="shadow" elgfile="RSUPG_DDXTT_TABLSIZE.ELG" password="GYZSPJFQ">
       <!-- pwd: 19004 -->   
    <args>
      <arg>RSUPG_DDXTT_TABLSIZE</arg>
      <arg>SAP_PROCS</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPG_DDXTT_TABLSIZE\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>DDXTT-TABLSIZE filling</arg>
    </args>
    <action>Preparations for parallel SQL execution</action>
  </phase>

  <!--  (jo 720) Generate "CP2SHDSIZE.LST" for RUN_RSPTBFIL_TRINIT_S   -->
  <phase name="GEN_TABSIZEFILE_CP2SHD" logfile="GENCP2SHDSIZE.LOG" password="OKVHWIYK">
       <!-- pwd: 9968 -->   
    <args>
      <arg>CP2SHD_TABLES</arg>
      <arg>CP2SHDSIZE.LST</arg>
      <arg></arg>
    </args>
    <action>Generates input file for RUN_RSPTBFIL_TRINIT_S</action>
  </phase>

  <!-- (jo 720) Communicate number of processes to RUN_RSPTBFIL_TRINIT_S  -->
  <phase name="SETUPGPAR_CP2SHDPROCS" logfile="SETUPGPAR.LOG" connect="shadow" password="SQHWPLVM">
       <!-- pwd: 87281 -->   
    <args>
      <arg>SET</arg>
      <arg>CP2SHD_PROCS=$NRPARPROCS(R3TRANS)</arg>
    </args>
    <action>Exposes number of parallel R3trans for better load balancing</action>
  </phase>

  <!-- generate trigger names, and create copy transports -->
  <!-- ISU: Determines converted tables                   -->
  <phase name="RUN_RSPTBFIL_TRINIT_S" logfile="auto" elgfile="auto" connect="shadow" password="UOOJZHDO">
       <!-- pwd: 48000 -->   
    <args>
      <arg>RSPTBFIL</arg>
      <arg>SAP_TRIGINIT=SAP_RSPTBFIL(ACTION=TRIGINIT,LOGFILE=RSPTBTRI.$(SAPSID))</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSPTBTRI\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>TRIGGER table filling</arg>
    </args>
    <action>Generates trigger names and creates transports</action>
  </phase>
  <phase name="RUN_RTO_CALLER_VALIDATE_ISU" connect="shadow" logfile="RTO_CALLER.LOG" elgfile="RTO_CALLER.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_RTO_CALLER</arg> 
      <arg>SAP_RTO_VALISU</arg>
      <arg></arg>
      <arg>RTO_CAL_VALISU\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>RTO Caller calling all ISU RTOs validations</arg>
    </args>
    <action>RTO Caller calling all ISU RTOs validations</action>
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="700-*" />
    </options>
  </phase>  
  <!-- (vd 620.22) for generation of standard include (since 620) -->
  <phase name="RUN_RSINCGEN_SHD2" logfile="PSINCGEN.LOG" connect="shadow" elgfile="PSINCGEN.ELG" password="YGXSBZZI">
       <!-- pwd: 92511 -->   
    <args>
      <arg>RSINCGEN</arg>
      <arg>SAP_SH2_RSINCL</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSINCGEN_SHD\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>RS SHD INCLUDE GENERATION</arg>
    </args>
    <action>Regenerates include program for standard operation</action>
  </phase>
  <!-- Start ISU-stress-maker -->
  <phase name="RUN_RCRR_TFW_START" logfile="RCRRTFW2.LOG" elgfile="RCRRTFW2.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->   
    <args>
      <arg>RCRR_TFW_PHASES</arg>
      <arg>SAP_START</arg>
      <arg>NO-IGNORE</arg>
      <arg>TFW_PHASES_START\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Start old stress maker ISU for startrelease lower 700</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" /> 
      <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="46C-699" />
    </options>
    <action>Start old stress maker ISU for startrelease lower 700</action>
  </phase>
  <!-- Start stressmaker -->
  <phase name="RUN_UPG_STRESSMAKER_START" logfile="RSUPG_STRESS4UPGRADE.LOG" elgfile="RSUPG_STRESS4UPGRADE.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->   
    <args>
      <arg>RSUPG_STRESS4UPGRADE</arg>
      <arg>SAP_STRESS_START</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_STRESSMAKER_START\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Start stress maker for startrelease greater or equal 700</arg>
    </args>
    <options>
      <or>
        <option name="ITERATIVE_UPG" /> 
        <option name="ZERODOWNTIME_UPG" />		
        <option name="MIGRATE_OPTION" value="SLT" />
      </or>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="700-*" />
    </options>
    <action>Start stress maker for startrelease greater or equal 700</action>
  </phase>
  <!-- (af 700.08) combined Upgrade and Unicode Conversion -->
  <!-- Take over conversion data from start release -->
  <phase name="JOB_UM4_COPY_RESULTS" logfile="UM4_COPY_RESULTS.LOG" connect="shadow" elgfile="UM4_COPY_RESULTS.ELG" password="EXLPYNIN">
       <!-- pwd: 83154 -->   
    <args>
      <arg>UM4_COPY_RESULTS</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>UM4_COPY_RESULTS\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>UC DATA TAKE-OVER</arg>
    </args>
    <options>
      <option name="ST_range" value="46A-46Z" />
	  <option name="UCMIG_INTEGRATED" />
	  <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
    <action>Takes over unicode conversion data</action>
  </phase>
  <!-- (af 700.08) combined Upgrade and Unicode Conversion -->
  <!-- truncate table DDNTT/F_CONV_UC -->
  <phase name="SQLDB_DDNTT_CONV_UC_UCM" logfile="DDNTT_CONV_UC.LOG" password="AZBNIVIR">
       <!-- pwd: 58707 -->   
    <args>
      <arg>TRUNC_DDNTT_CONV_UC_SHD</arg>
      <arg></arg>
    </args>
    <!-- (af 700.08) -->
    <options>
      <option name="UCMIG_INTEGRATED" />
    </options>
    <action>Cleans tables for unicode conversion</action>
  </phase>
  <!-- (af 700.08) combined Upgrade and Unicode Conversion -->
  <!-- Fill tables DDNTT/F_CONV_UC from inactive NT -->
  <phase name="RUN_RADCUCNT_ALL" logfile="RADCUCNTALL.LOG" connect="shadow" elgfile="RADCUCNTALL.ELG" password="ADGEAVCB">
       <!-- pwd: 64513 -->   
    <args>
      <arg>RADCUCNTUPG</arg>
      <arg>SAP_CUUC_ALL</arg>
      <arg>IGNORE</arg>
      <arg>RADCUCNTALL\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Generate Unicode NTs</arg>
    </args>
    <options>
   	  <option name="MODE" value="EXPORT" />
      <option name="UCMIG_INTEGRATED" />
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
    <action>Generates the Unicode NTs from the inactive shadow NT</action>
  </phase>
  <!-- (cv 710.5) phase added due to Michael Acker -->
  <!-- updates tables enhspotheader and enhheader to avoid unnecessary generations during XPRA-phase -->
  <phase name="JOB_RSENHUPG" logfile="PSENHUPG.LOG" connect="shadow" elgfile="PSENHUPG.ELG" password="KJWUSBSZ">
       <!-- pwd: 76017 -->   
    <args>
      <arg>RSENHUPG</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSENHUPG\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>ADAPTION OF ENHANCEMENT FRAMEWORK OBJECTS</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="feature_switch" value="/shadow/enhancement_framework:TRUE" />
    </options>
    <action>Adapts enhancement framework objects</action>
  </phase>
  <phase name="RUN_ADD_UPGTABART" logfile="ADD_UPGTABART.LOG" connect = "shadow" elgfile="ADD_UPGTABART.ELG" password="SJVPQLMB">
     <!-- pwd: 97353 -->   
    <args>
      <arg>RZDM_PREPARE_UPG_TABSPACE</arg> 
      <arg>SAP_ADD_UPGTABART</arg>
      <arg></arg>
      <arg>ADD_UPGTABART\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Adds infos for UPG tabart and tabspace to config tables</arg>
    </args>
    <action>Adds infos for UPG tabart and tabspace to config tables</action>
    <options>
      <or>
        <option name="ZERODOWNTIME_UPG" /> 
	    <option name="ITERATIVE_UPG" />
      </or>
	</options>
  </phase> 
  <phase name="RUN_ZDM_STRUCT_ANALYZER" logfile="ZDM_STRUCT.LOG" connect="shadow" elgfile="ZDM_STRUCT.ELG" password="QDRHWPQF">
	       <!-- pwd: 53779 -->   
	<args>
	  <arg>SZDM_STRUCT_ANALYZER</arg>
	  <arg>SAP_ZDM_ANALYZE</arg>
	  <arg>NO-IGNORE</arg>
	  <arg>SZDM_STRUCT_ANALYZER\.$(SAPSID)</arg>
	  <arg>10</arg>
	  <arg>Analyze structure changes of tables</arg>
	</args>
	<options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
	<action>Analyze structure changes of tables</action>
  </phase>  
  <!-- ************************************************************************************* -->
  <!-- ************************************************************************************* -->
  <submodule password="AAMBTVNA">
    <!-- pwd: 40260 -->
    <options>
      <option name="SECOND_SHD" />
    </options>
    <phaselist>
      <!-- ********************************************************************** -->
      <!-- WH10: Change Recording vorbereiten                                     -->
      <!-- ********************************************************************** -->
      <!-- Umsetzungen analysieren und fuer's CRR vorsehen/einmischen		   -->
      <!--   RSCPINTS oder RSPTBFIL-irgendwas  -->
      <!-- Modifizierte Version von RUN_RSPTBFIL_TRINIT_S - keine TRIGGER -->
      <!--    nur cp2shd-Auftraege sind anzulegen !!! -->
      <!-- ********************************************************************** -->
      <!-- WH09: sichere Ergebnis des Standard-Verteilerlaufes -->
      <!-- ********************************************************************** -->
      <submoduleref name="SUBMOD_FDC_INIT" password="QXDBIPMD">
           <!-- pwd: 18224 -->   
        <options>
          <option name="FASTDATACOPY" />
        </options>
      </submoduleref>	  
      <phase name="RUN_RSCPINTS_STDSAVE" logfile="RSCPSTDSAV.LOG" connect="shadow" elgfile="RSCPSTDSAV.ELG" password="GXBREJAH">
           <!-- pwd: 39197 -->   
        <args>
          <arg>RSCPINTS</arg>
          <arg>SAP_SAVE_DIST</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSCPSTDSAV\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Save standard distribution</arg>
        </args>
        <action>Enters target release information in table PUTTB_SHD</action>
      </phase>
      <phase name="RUN_RSCPINTS_RESTINIT" logfile="RSCPREI.LOG" connect="shadow" elgfile="RSCPREI.ELG" password="AGNUHVRC">
           <!-- pwd: 67508 -->   
        <args>
          <arg>RSCPINTS</arg>
          <arg>SAP_REST_INIT</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSCPREI\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Restore original DDIC tables</arg>
        </args>
        <action>Restores initial inactive Nametab</action>
      </phase>
      <phase name="RUN_RSCPINTS_ALTNTUPD" logfile="RSCPAUP.LOG" connect="shadow" elgfile="RSCPAUP.ELG" password="FEVSGIGD">
           <!-- pwd: 656 -->   
        <args>
          <arg>RSCPINTS</arg>
          <arg>SAP_ALTNTUPD</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSCPAUP\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Update alternative Nametab</arg>
        </args>
        <action>Update alternative Nametab</action>
      </phase>

      <phase name="JOB_RUTSETRCST_SHD2" logfile="RUTSETRCST.LOG" connect="shadow" elgfile="RUTSETRCST2.ELG" password="AWHKBVTQ">
          <!-- pwd: 53084 -->   
         <args>
           <arg>RUTSETRCST1</arg>
           <arg></arg>
           <arg>NO-IGNORE</arg>
           <arg>RUTSETRCST\.$(SAPSID)</arg>
           <arg>5</arg>
           <arg>ROW STORE FLAG</arg>
         </args>
         <options>  
           <option name="realdestvers" value="740-799" />		
           <option name="ST_range" value="*-739" />   
           <option name="DBTYPE" value="HDB" />
         </options>
         <action>Sets row store tables</action>
      </phase>
      <!-- cv: CRR-initialization needs to run after RUTSETRCST1, otherwise inactive nametab get created for the aliases and
               distributor calculates CREATE-statements for them -->
      <submoduleref name="SUBMOD_CRR_SETUP" password="CMRCBRNY">
           <!-- pwd: 65164 -->   
        <options>
          <option name="ITERATIVE_UPG" />
        </options>
      </submoduleref>

      <phase name="RUN_RSPTBFIL_SHDDEST" logfile="auto" elgfile="auto" connect="shadow" password="OBSQUTOT">
           <!-- pwd: 37629 -->   
        <args>
          <arg>RSPTBFIL</arg>
          <arg>SAP_SHDDEST=SAP_RSPTBFIL(ACTION=SHDDEST,LOGFILE=RSPTBSHDDST.$(SAPSID))</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSPTBSHDDST\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>PUTTB_SHD prepare distribution for second shadow system</arg>
        </args>
        <action>Prepares distribution run for second shadow system in table PUTTB_SHD</action>
      </phase>
	  
      <!-- td.703. 05 set parameter for the time when shd runs with preput for as400 to know that views ddls must be generated for shd system -->
      <phase name="SETUPGPAR_SETSQL4SHD" logfile="SETUPGPAR.LOG" connect="shadow" password="UFOVLWBZ">
           <!-- pwd: 6948 -->   
        <args>
          <arg>SET</arg>
          <arg>SQL4SHD=YES</arg>
        </args>
        <action>Set parameter SQL4SHD indicating that CREATE/DROP VIEW statement should be generated for shadow system during preput</action>
      </phase>
      <!-- cv delete INDX CRE entries for non shadow tables, otherwise PARMVNT_XCNV fails -->
      <phase name="SQLDB_RMTBATGCRE_INDX" logfile="SQLDBTBATG.LOG" password="QTYKQPST">
           <!-- pwd: 28294 -->   
        <args>
          <arg>TBATG_RM_CRE_INDX</arg>
	        <arg></arg>
        </args>
        <options>
          <or>
            <option name="ITERATIVE_UPG" />
            <option name="MIGRATE_OPTION" value="SLT" />
          </or>
        </options>
        <action>Prevents index creations for non-shadow tables</action>
      </phase>
       <phase name="SQLDB_RMTBATGCRE_CPYFROMSHD" logfile="SQLDBTBATG.LOG" password="QTYKQPST">
           <!-- pwd: 28294 -->   
        <args>
          <arg>TBATG_RM_CRE_CPYFROMSHD</arg>
	        <arg></arg>
        </args>
        <options>
          <not><option name="ITERATIVE_UPG" /></not>
        </options>
        <action>Prevents index creations for non-shadow tables</action>
      </phase>
      <!-- remove index operations on unique tables -->
      <phase name="SQLDB_RMTBATG_UNITABS" logfile="SQLDBTBATG.LOG" password="QTYKQPST">
           <!-- pwd: 28294 -->   
        <args>
          <arg>TBATG_RM_UNITABS</arg>
          <arg></arg>
        </args>
         <action>Prevents index operations on unique tables</action>
      </phase>
  
      <!-- drop table RFCKEYSS, only necessary with start release 46C -->
      <phase name="SQLDB_CLEARRFCKEYSS2" password="WMVWJDLQ">
           <!-- pwd: 37086 -->   
        <args>
          <arg>CLEAR_RFCKEYSS</arg>
          <arg></arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="ST_range" value="*-46D" />
        </options>
        <action>Deletes table RFCKEYSS</action>
      </phase>

      <!-- parallel distribution in shadow system -->
      <phase name="PARDIST_SHD2" logfile="PARDSHD2.LOG" connect="shadow" elgfile="PARDSHD2.ELG" password="CRHHERMR">
         <!-- pwd: 56581 -->   
        <args>
          <arg>20</arg>
          <arg>10</arg>
          <arg>10</arg>
          <arg>LOG_POSTFIX=_SHD2</arg>
        </args>
        <action>Enters target release information in table PUTTB_SHD</action>
      </phase>
	  
      <!-- compute cp2shd, switch, modeflag, mvntabs -->
      <phase name="RUN_RSPTBFIL_SHD2PDIST" logfile="auto" elgfile="auto" connect="shadow" password="IQSZLFJQ">
           <!-- pwd: 66000 -->   
        <args>
          <arg>RSPTBFIL</arg>
          <arg>SAP_SHPOSTDIST=SAP_RSPTBFIL(ACTION=SHDPOSTDIST,LOGFILE=RSPTBSHDPOD.$(SAPSID))</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSPTBSHDPOD\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>PUTTB_SHD shadow post distribution actions</arg>
        </args>
        <action>Enters distributor results in table PUTTB_SHD</action>
      </phase>
      <!-- td.703. 05 unset parameter -->
      <phase name="SETUPGPAR_UNSETSQL4SHD" logfile="SETUPGPAR.LOG" connect="shadow" password="YOHALZNC">
           <!-- pwd: 84619 -->   
        <args>
          <arg>DEL</arg>
          <arg>SQL4SHD</arg>
        </args>
        <action>Remove parameter SQL4SHD</action>
      </phase>
      <!-- (mh 620/4.11) DDXTT-TABLSIZE filling -->
      <phase name="RUN_RSUPG_DDXTT_TABLSIZE_SHD2" logfile="RSUPG_DDXTT_TABLSIZE_SHD.LOG" connect="shadow" elgfile="RSUPG_DDXTT_TABLSIZE_SHD.ELG" password="EPOUONUT">
           <!-- pwd: 10019 -->   
        <args>
          <arg>RSUPG_DDXTT_TABLSIZE</arg>
          <arg>SAP_PROCS</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSUPG_DDXTT_TABLSIZE\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>DDXTT-TABLSIZE filling</arg>
        </args>
        <action>Preparations for parallel SQL execution</action>
      </phase>
      <submoduleref name="SUBMOD_CRR_PREPARE_TRIGGERS" password="SLEEMLWT">
           <!-- pwd: 72419 -->   
        <options>
          <option name="ITERATIVE_UPG" />
        </options>
      </submoduleref>

      <!-- (ms 720) branched out -->
      <submoduleref name="SUBMOD_FDC_ANALYZE" password="QXDBIPMD">
           <!-- pwd: 18224 -->   
        <options>
          <option name="FASTDATACOPY" />
        </options>
      </submoduleref>

      <phase name="RUN_RSCPINTS_SAVE" logfile="RSCPSAV.LOG" connect="shadow" elgfile="RSCPSAV.ELG" password="ORMGOTQH">
           <!-- pwd: 85323 -->   
        <args>
          <arg>RSCPINTS</arg>
          <arg>SAP_SAVE_SHD</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSCPSAV\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>SAVE Distribution of shadow system</arg>
        </args>
        <action>Saves Shadow Distribution </action>
      </phase>
      <!-- WH10: This phase forces a Modeflag = 'A' for application tables that are adapted in PARMVNT_UPG.
	   It ensures consistent nametabs in the second shadow system and prevents syntax errors of application programs
	-->
      <phase name="JOB_RS_APPLINTS_UPDATE" logfile="RS_APPLINTS_UPDATE.LOG" connect="shadow" elgfile="RS_APPLINTS_UPDATE.ELG" password="OKNMPTHW">
           <!-- pwd: 80455 -->   
        <args>
          <arg>RS_APPLINTS_UPDATE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RS_APPLINTS_UPDATE\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>FORCE MODEFLAG A</arg>
        </args>
        <action>Update NonBasis inact. NTs</action>
      </phase>
      <phase name="RUN_RSCPINTS_SHDRESTORE" logfile="RSCPSHDRES.LOG" connect="shadow" elgfile="RSCPSHDRES.ELG" password="GLMSCJSD">
           <!-- pwd: 75708 -->   
        <args>
          <arg>RSCPINTS</arg>
          <arg>SAP_REST_SHD</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSCPSHDRES\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>RESTORE distributed Shadow</arg>
        </args>
        <action>Enters target release information in table PUTTB_SHD</action>
      </phase>
  <phase name="RUN_RUTDDLSCREATE_SHD1" logfile="RUTDDLSCREATE1.LOG" connect="shadow" elgfile="RUTDDLSCREATE1.ELG" password="SJVPQLMB">
      <!-- pwd: 97353 -->   
    <args>
      <arg>RUTDDLSCREATE_SHD1</arg>
      <arg>SAP_VIEWBAS</arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTDDLSCREATE_SHD\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Generate statements for DD SQL views</arg>
    </args>
    <options>
      <option name="startcomponent" value="SAP_BASIS(740(8-*))"/>           
    </options>
    <action>Generate statements for DD SQL views</action>
  </phase>

    </phaselist>
  </submodule>
  <!-- ************************************************************************** -->
  <!-- (ms 720) branched out -->
  <submoduleref name="SUBMOD_FDC_PREP" password="KOMZVBRS">
       <!-- pwd: 69135 -->   
    <options>
      <option name="FASTDATACOPY" />
    </options>
  </submoduleref>

    <!-- (jo + cv) Synchronize PUTTB_SHD  (sr) moved 3 phases forward -->
  <phase name="READPUTTB_SHD2PDIST" logfile="RDPUTTBPRE.LOG" connect="shadow" password="ECBUBNHG">
       <!-- pwd: 93525 -->   
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
  </phase>
  
    <!-- to.lmt8.681,689: prereq for uncommitted read recording during table copy -->
  <phase name="SETUPGPAR_DB4_UCWRITE" logfile="SETUPGPAR.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>SET</arg>
      <arg>DB4_UCWRITE=YES</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="DBTYPE" value="DB2/400" />
    </options>
    <action>Prepares settings for table copy </action>
  </phase>
  <!-- prereq for uncommitted read recording during table copy -->
  <phase name="SETUPGPAR_SDB_UCWRITE" logfile="SETUPGPAR.LOG" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>SET</arg>
      <arg>SDB_UCWRITE=YES</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="DBTYPE" value="SAPDB" />
    </options>
    <action>Set SDB_UCWRITE for the correct trigger functionality during initial data copy</action>
  </phase>

    <!-- (ms 720) branched out -->
  <submoduleref name="SUBMOD_FDC_RUN" password="QVUMMPCL">
       <!-- pwd: 79122 -->   
    <options>
      <option name="FASTDATACOPY" />
    </options>
  </submoduleref>

  <!-- AG 703 ISU ALIAS PHASES, SR ALIAS ALSO USED FOR FDC. Moved here from MAIN_SHDIMP, was located after SUBMOD_SHDALIASCRE -->
  <submoduleref name="SUBMOD_SHDALIASCRE_CRR" refname="SUBMOD_SHDALIASCRE" password="IIIRBFVW">
       <!-- pwd: 95455 -->   
    <defs>
      <def>SCRIPT_PREFIX=PTCRRAL</def>
      <def>HANDLEALIORG=NO</def>
      <def>HANDLEVIEWS=NO</def>
    </defs>
    <options>
      <or>
        <option name="ITERATIVE_UPG" />
        <option name="FASTDATACOPY" />
      </or>
    </options>
  </submoduleref>

  <submoduleref name="SUBMOD_FDC_RUN2" password="SOYHTLLU">
       <!-- pwd: 97158 -->   
    <options>
      <option name="FASTDATACOPY" />
    </options>
  </submoduleref>
  <!-- update special HDB-entries due to wrong selection in distributor -->
  <phase name="SQLDB_UPDATE_DBDIFF2" logfile="auto" password="IRQAWFOZ">
        <!-- pwd: 64616 -->   
    <args>
      <arg>HDB_UPDATE_DBDIFF2</arg>
      <arg></arg>
    </args>
    <action>Update DBDIFF-entries for CalcViews on HDB</action>
    <options>
       <option name="ST_range" value="730-740" />
       <option name="DBTYPE" value="HDB" />      
    </options>
  </phase>

  <!-- ********************************************************************** -->
  <!-- (jo 700.22) Dump shared memory statistics for shadow system -->
  <phase name="SHMD_STAT_SSIL" password="UADIBHLS">
       <!-- pwd: 27122 -->   
    <args>
      <arg>shadow</arg>
      <arg>SHMD_SSILP.LOG</arg>
      <arg>ENQSTAT_SSIL.LOG</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/dmpspc" />
    </options>
    <action>Dumps shared memory usage of shadow system</action>
  </phase>
  <phase name="STOP_SHDI_FIRST" logfile="STOPSHDI.LOG" password="OJCYETCN">
       <!-- pwd: 87967 -->   
    <args>
      <arg>STOP_SERVICE</arg>
    </args>
    <action>Stops shadow instance</action>
  </phase>
</phaselist>
</module>


<module name="MAIN_SHDIMP" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Shadow Import</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_DTTRANS)</postevent>
      <revokemodule>REV_PREPROC</revokemodule>
      <password>XFUYTYRK</password>
      <!--  pwd: 598  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
        <precedence>MAIN_SHDCRE</precedence>
        <precedence>MAIN_SHDINST</precedence>
        <precedence>MAIN_DTTRANSSHD</precedence>
        <precedence>MAIN_SHADOW</precedence>
        <precedence>MAIN_SHDPREPUT</precedence>
        <precedence>MAIN_SHDRUN</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINShdImport.xml#126 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Shadow Import -->
  <!-- ************************************************************ -->
  <!-- (stm 610.2.01) table space measurements -->
  <phase name="DMPSPC_LAST" logfile="DMPSPC_LAST.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg></arg>
      <arg>DMPSPC_LAST.FRE</arg>
      <arg>DMPSPC_LAST.ALL</arg>
      <arg>table space sizes at STOP_SHDI</arg>
    </args>
    <action>Provides information on freespace in the database</action>
  </phase>
  <!-- WH10: Externe Umsetzung - muss vor dem Loeschen der Aliase passieren -->
  <!-- External conversion of shadow tables -->
  <!-- WH10: Jetzt wird die externe Umsetzung wiederbelebt -->
  <!-- WH10: Generierung der Scripte -->
  <!-- WH10: Rausdumpen der Daten -->
  <phase name="XCNV_SHD_DUMP" logfile="XCNVDUMPSHD.LOG" connect="shadow" elgfile="XCNVDUSHD.ELG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>DUMP</arg>
      <arg>SHADOW</arg>
      <arg>XCNV_SHD</arg>
      <arg>XCNVSHD.SAP</arg>
    </args>
    <options>
      <option name="SECOND_SHD" />
    </options>
    <action>Writes the contents of tables for external conversion to the file system</action>
  </phase>
  <!-- WH10: Loeschen der Daten -->
  <phase name="XCNV_SHD_DEL" logfile="XCNVDELESHD.LOG" connect="shadow" elgfile="XCNVDESHD.ELG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>DEL</arg>
      <arg>SHADOW</arg>
      <arg>XCNV_SHD_DEL</arg>
      <arg>XCNV_DEL</arg>
    </args>
    <options>
      <option name="SECOND_SHD" />
    </options>
    <action>Deletes from the system the contents of tables that have been written to the file system</action>
  </phase>
  <!-- ***************************************************************************************** -->
  <submoduleref name="SUBMOD_SHDALIASDEL" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
  </submoduleref>
  <!-- clean shadow load tables -->
  <phase name="SQLSELEXE_TRUNCSHDLOADS_2" logfile="DROPSHDLOADS2.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>LOADTABLES_SHD</arg>
      <arg>TRUNC_TABLES</arg>
      <arg>SCRCLASSID;SHDNAME</arg>
    </args>
    <options>
      <option name="SECOND_SHD" />
    </options>
    <action>Cleans shadow load tables</action>
  </phase>

  <submodule password="KRGCCBGT">
    <options>
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <phaselist>
      <!-- (vd 620) notify user to call ICNV early! -->
      <!-- (ps 610.102) -->
      <!-- (vd 620.70) after the revokes, because ICNV may rename some of the -->
      <!-- tables in the revoke script (MaxDB) -->
      <phase name="ICNVINIT" logfile="ICNVINIT.LOG" elgfile="ICNVINIT.ELG" password="ATAUUVEP">
	<!-- pwd: 34051 -->   
	<args>
	  <arg>DDICNV.LOG</arg>
	</args>
	<options>
	  <option name="USE_ICNV" />
	</options>
	<action>Checks the volumes of the candidates and </action>
	<action>initializes successful candidates</action>
      </phase>
      <!-- (jo 720) For ICNV with DDL's -->
      <phase name="RUN_RSDDLCNV_CLN" logfile="RSDDLCNVACT.LOG" elgfile="RSDDLCNVCLN.ELG" password="SJICQLMB">
	<!-- pwd: 57708 -->   
	<args>
	  <arg>RSDDLCNV</arg>
	  <arg>SAP_RSDDL_CLN</arg>
	  <arg>IGNORE</arg>
	  <arg>RSCLNICN\.$(SAPSID)</arg>
	  <arg>5</arg>
	  <arg>Prepare for ICNV for DDL's</arg>
	</args>
	<options>
	  <option name="USE_ICNV" />
	  <not><option name="icnv4ddl" value="none" /> </not>
	</options>
      </phase>
      <phase name="ICNVREQ" logfile="ICNVREQP.LOG" elgfile="ICNVREQP.ELG" password="QWFAXPHU">
	<!-- pwd: 97943 -->   
	<args>
	  <arg>DDICNV.LOG</arg>
	  <arg>ICNVCAND.TQL</arg>
	  <arg>ICNVCAND.LOG</arg>
	</args>
	<options>
	  <option name="USE_ICNV" />
	  <not><option name="exemode" value="BATCH" /></not>
	</options>
	<action>Prompts you to start transaction ICNV if there are candidates for the ICNV, </action>
	<action>but ICNV has not yet been started</action>
	<usage>Call transaction ICNVif necessary</usage>
      </phase>
      <!-- (mh 620/4.12) Index precreation -->
      <!-- asynchrone job start -->
      <phase name="RUNASYN_RSINDCRE" logfile="RSINDCRE.LOG" password="SJVPQLMB">
	<!-- pwd: 97353 -->   
	<!-- job namevariantJob text -->
	<args>
	  <arg>RSINDCRE</arg>
	  <arg></arg>
	  <arg>INDEX PRECREATION</arg>
	</args>
	<options>
	  <not><option name="MIGRATE_SECONDDB" /></not>
          <not><option name="ZERODOWNTIME_UPG" /></not>
	</options>
	<action>Starts index pre-creation for some database systems</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- External conversion of shadow tables -->
  <phase name="NTACT_PREMV" logfile="NTMOVPRE.LOG" elgfile="NTMOVPRE.ELG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <!-- (vd 50A.11), DDYTT previously -->
    <args>
      <arg>MV40ANT</arg>
      <arg>NOBUFRESET;DESTSHDNAMETAB</arg>
      <arg>NTMOVPRE.TP0</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Copies nametabs to the shadow tables</action>
  </phase>
  <phase name="SQLDB_MODEFLAG_J" logfile="SQLEXJ.LOG" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>UPDATE_MODEFLAG_TO_J</arg>
      <arg></arg>
    </args>
    <action>Prepare deletions for PARMVNT_SHD</action>
  </phase>

  <!-- (vd 50A.25) -->
  <phase name="PARMVNT_SHD" logfile="MVNTSHD.LOG" elgfile="MVNTSHD.ELG" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>TP_MOVENTABS_SHD</arg>
      <arg>INTDEL;INTACT;NOTOUCH;NOBUFFRESET;SHADOW_ONLY</arg>
      <arg>MF=F,STEP=S,RANGE-TS; MF=A,RANGE-TS; $CONDEVAL($(SECOND_SHD),MF=JXYW,MF=J); MF=B,STEP=S</arg>
      <arg>MVNTSHD.TP0</arg>
    </args>
    <action>Activates nametab entries</action>
  </phase>

  <phase name="SQLRUNTASK_ISU_TRIGGERS" password="WJOGCDWP">
    <!-- pwd: 18134 -->
    <args>
      <arg>ISU-TRIGGERS</arg>
      <arg>DELMODE=COMPLETE</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
      <not><option name="FASTDATACOPY" /></not>
    </options>
    <action>Creates database triggers for ISU</action>
  </phase>

  <submodule password="KRGCCBGT">
    <options>
      <option name="SECOND_SHD" />
    </options>
    <phaselist>
      <submoduleref name="SUBMOD_SHDALIASCRE" password="KABYXBZW">
	<!-- pwd: 47366 -->
	<defs>
	  <!-- (jo 720) There was a drop/create for SAPLIKEY, so reinstall a temporary license -->
	  <def>HANDLELICENSE=YES</def>
	  <def>HANDLEVIEWS=NO</def>
	</defs>
      </submoduleref>

      <!-- WH10: Zurueckladen der Daten aus externer Umsetzung -->
      <phase name="XCNV_SHD_LOAD" logfile="XCNVLOADSHD.LOG" connect="shadow" elgfile="XCNVLOSHD.ELG" password="WFJPKDCF">
	<!-- pwd: 60928 -->   
	<args>
	  <arg>LOAD</arg>
	  <arg>SHADOW</arg>
	  <arg>XCNV_SHD</arg>
	  <arg>XCNVSHD.SAP</arg>
	</args>
	<action>Converts tables externally and writes the contents back to the system</action>
      </phase>

      <!-- ****************************************************************************************** -->
      <submoduleref name="SUBMOD_SHDVIEWCRE" password="CRUUERMR">
	<!-- pwd: 34594 -->   
      </submoduleref>
    </phaselist>
  </submodule>

  <!-- ****************************************************************************************** -->

  <!-- WH10: Statistiken fuer extern umgesetzte Schattentabellen -->
  <phase name="UPDATE_DBSTATS_XCNVSHD" logfile="UPST_SHDSGEN.LOG" password="MVWDHMJL">
       <!-- pwd: 5514 -->   
    <!-- execute sql specified by idsql id to executefile to write the results of execution toprefix for line to readreason for update statics call -->
    <args>
      <arg>SCRCLASSID</arg>
      <arg>UPDSTAT_XCNVSHD</arg>
      <arg>SHDNAME</arg>
      <arg></arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <action>Updates statistics on the load tables</action>
  </phase>

  <submodule password="KRGCCBGT">
    <options>
      <option name="SECOND_SHD" />
    </options>
    <phaselist>
      <!-- WH09: Kopiere PUTTB_SHD_STD nach PUTTB_SHD -->
      <phase name="RUN_RSCPINTS_PUTTBREST_STD" logfile="RSCPPRS.LOG" elgfile="RSCPPRS.ELG" password="YVGUKZWN">
	   <!-- pwd: 68913 -->   
	<args>
	  <arg>RSCPINTS</arg>
	  <arg>SAP_REST_PUT</arg>
	  <arg>NO-IGNORE</arg>
	  <arg>RSCPPRS\.$(SAPSID)</arg>
	  <arg>10</arg>
	  <arg>Restore original PUTTB_SHD</arg>
	</args>
	<action>Restore PUTTB_SHD</action>
      </phase>

      <phase name="READPUTTB_REST" logfile="RDPUTTBREST.LOG" password="IEDAJFBM">
	   <!-- pwd: 40231 -->   
	<args>
	  <arg>READ</arg>
	</args>
	<action>Reads table PUTTB and places it in the file system</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- ************************************************************ -->
  <!-- Copy to shadow (create triggers, transports, run corresponding diff phases and start copy to shadow operation -->
  <!-- ************************************************************ -->
  <submoduleref name="SUBMOD_CP2SHD" password="WCPMDDNE">
       <!-- pwd: 11646 -->   
  </submoduleref>

  <!-- ************************************************************ -->
  <!-- Shadow import -->
  <!-- ************************************************************ -->
  <submoduleref name="SUBMOD_SHDIMP" password="CHOKYROF">
       <!-- pwd: 81640 -->   
  </submoduleref>
  <!-- (cv 731.03 move the next three phases here) -->
  <phase name="PSCRGEN_DROP_SHD_TABLE1" logfile="SQLDRSHD.LOG" elgfile="SQLDRSHD.ELG" password="SUMNHLPW">
       <!-- pwd: 94221 -->   
    <!-- (vd 620.62) system tp on 31I inf too low -->
    <args>
      <arg>GEN</arg>
      <arg>SHD_TABLE</arg>
      <arg>DROP_TABLES=TSHDDR</arg>
      <arg>$CONDEVAL($(MIGRATE_SECONDDB),DROP_SHD_TABLE_MOST_MIG,DROP_SHD_TABLE_MOST)</arg>
      <arg>drop shadow tables not switched</arg>
      <arg>TP_EXECDBSCRIPT_NEW</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <action>Generates scripts for deleting shadow tables</action>
  </phase>
  <!-- delete shadow tables not switched -->
  <!-- (jo) Generated script is executed on second DB, so have proper connect option  -->
  <phase name="PSCRGEN_DROP_TABLE_LAST" logfile="SQLDRSHDLST.LOG"
	 connect="$CONDEVAL($(MIGRATE_SECONDDB),seconddb,standard)"
	 password="EWIWUCUS">
       <!-- pwd: 9911 -->   
    <!-- (vd 620.62) system tp on 31I inf too low -->
    <args>
      <arg>GEN</arg>
      <arg>SHD_TABLE</arg>
      <arg>DROP_TABLES=DROPLADR</arg>
      <arg>DROP_SHD_TABLE_LAST</arg>
      <arg>drop remaining shadow tables</arg>
      <arg>TP_EXECDBSCRIPT_TRIG</arg> <!--  (jo 720) Match SQLSCREXE_DROP_LAST requirement  -->
      <arg>SINGLE_XQL</arg>
      <arg></arg>
    </args>
    <options>
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
    </options>
    <action>Generates scripts for deleting remaining shadow tables</action>
  </phase>
  <!--  (jo 720) update statistics for new + shadow tables using new PUTTB_SHD selector  -->
  <!--  (jo 720) Use phase from Andrey  -->
  <phase name="UPDATE_DBSTATS_NEWSHD" logfile="UPSTNEWSHD.LOG" password="QOIFNPTA">
       <!-- pwd: 33718 -->   
    <args>
      <arg>SCRCLASSID</arg>
      <arg>UPDSTAT_NEWSHD</arg>
      <arg>SHDNAME</arg>
      <arg></arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <action>Update statistics for tables converted with standard dictionary means</action>
  </phase>

  <!-- ************************************************************************* -->
  <!-- WH09 - ab hier wird das System wieder hochgefahren -->
  <!-- ************************************************************************* -->
  <submoduleref name="SUBMOD_SHD2_RUN" password="CRUUERMR">
       <!-- pwd: 34594 -->   
    <options>
      <option name="SECOND_SHD" />
    </options>
  </submoduleref>

  <!--  (jo) Discussion Christiane: We don't need this  -->
  <if test="0">
  <!--  (jo 720) Side remark: This phase puts REFNAME="DOKCLU~" into DDNTT~ and
	there is nothing that restores it explicitly. This is done
	by phase SHADOW_NTACT_REDEL
    -->
  <phase name="SQLDB_DOKTL_REFNAME_SUBST" logfile="DOKTLREFNAMESUBST.LOG" password="OCDEFTTC">
     <!-- pwd: 13107 -->   
    <args>
      <arg>DDNTT_DOKTL_REFNAME_SUBST</arg>
      <arg></arg>
    </args>
    <options>
      <not> <option name="ITERATIVE_UPG" /> </not>
    </options>
    <action>rename DOKCLU</action>
  </phase>
  </if>

  <!-- (jo 720) Needed to have system up at the right time! -->
  <phase name="STARTSAP_RESMIN_LAST" password="SANGVLTY">    <!-- pwd: 63887 -->   
    <args>
      <arg>CENTRAL;START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <options>
      <option name="strategy" value="Resource-minimized" />
    </options>
    <action>Starts production system</action>
  </phase>

  <!-- (jo 720) Must reread this!  -->
  <phase name="READPUTTB_LAST" logfile="RDPUTTBSHD2.LOG" password="QIHMZPPY">
       <!-- pwd: 28996 -->   
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
  </phase>
  <submoduleref name="SUBMOD_SHDDEL2" password="KVYGUBAD">
    <!-- pwd: 66191 -->   
    <defs>
      <def>SHDDELMODE=$CONDEVAL($(ZERODOWNTIME_UPG),ZERODOWNTIME,STANDARD)</def>
    </defs>
    <options>
      <not> <option name="ITERATIVE_UPG" /> </not>
      <not> <option name="MIGRATE_OPTION" value="SLT" /></not>
    </options>
  </submoduleref>
  <submoduleref name="SUBMOD_FATESTS" password="YXPJGZGF">
       <!-- pwd: 55238 -->   
  </submoduleref>
  <phase name="SETSYNC_SHD_FINISHED" password="SNNTILGL">
       <!-- pwd: 18802 -->   
    <args>
      <arg>SHADOWINST</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="JOB_RSISUDROP_INDEXES" logfile="PSISUDROP.LOG" elgfile="PSISUDROP.ELG" password="EHEMENGZ">
       <!-- pwd: 66195 -->   
    <args>
      <arg>RSISUDROP_INDEXES</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSISUDROP_INDEXES\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>DROP SOME SECONDARY INDEXES ON SHADOW TABLES</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
    <action>Drop some secondary indexes of shadow tables</action>
  </phase>
  <phase name="VIEWCHK" logfile="VIEWCHK.LOG" password="GAVULJPI">
       <!-- pwd: 89289 -->   
    <args>
      <arg>NOW</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Finds conflicts between delivered views and customer tables in the SAP name range</action>
  </phase>

  <!-- (jo 720) Check for EU_SWITCH  -->
  <phase name="EU_CHECK" logfile="EUSWCHECK.LOG" password="IIIRBFVW">
       <!-- pwd: 92863 -->   
    <args>
      <arg>SWITCH</arg>
      <arg></arg>
    </args>
    <action>Checks for tables clashing with EU_SWITCH</action>
  </phase>

  <!--  (jo 720) Discussion with Wieland, Steffen and Peter: Moved here from Downtime
	**   and make it /fa/
    -->
  <!-- cv 07/12 new phase to update statistics for RSCPFROM tables  -->
  <phase name="UPDATE_DBSTATS_RSCPFROM" logfile="UPSTRSCPFROM.LOG" password="YLAKEZYB">
       <!-- pwd: 80490 -->   
    <args>
      <arg>SCRCLASSID</arg>
      <arg>UPDSTAT_RSCPFROM</arg>
      <arg>TABNAME</arg>
      <arg></arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/dmpspc" />
    </options>
    <action>Update statistics for RSCPFROM tables</action>
  </phase>

  <!-- (stm 610.2.01) table space measurements -->
  <phase name="DMPSPC_MPT" logfile="DMPSPC_MPT.LOG" password="MDTYRMXF">
       <!-- pwd: 2995 -->   
    <args>
      <arg></arg>
      <arg>DMPSPC_MPT.FRE</arg>
      <arg>DMPSPC_MPT.ALL</arg>
      <arg>table space sizes at MPT</arg>
    </args>
    <action>Provides information on freespace in the database</action>
  </phase>
  <!-- (ps 620-5.67) CRM Phase only -->
  <phase name="JOB_GN_BEF_UPG_CRM40_3" logfile="MWCRM3.LOG" elgfile="MWCRM3.ELG" password="UZSUQHGJ">
       <!-- pwd: 89147 -->   
    <args>
      <arg>GN_BEFORE_UPGRADE_CRM40</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>MWCRM400\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Consistence check</arg>
    </args>
    <options>
      <option name="strategy" value="Downtime-minimized" />
      <option name="ST_range" value="610-*" />
      <option name="startcomponent" value="BBPCRM" />
    </options>
    <action>Performs consistence check</action>
  </phase>
  <!-- (ps 620-4.22) APO Phase only -->
  <phase name="JOB_MC01_CACL_CDP_POST3" logfile="CDPCON3.LOG" elgfile="CDPCON3.ELG" password="WJOGCDWP">
       <!-- pwd: 45107 -->   
    <args>
      <arg>/SAPAPO/MC01_CACL_CDP_CONSIST</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>MC01_CACL_CDP_CONSIST\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Consistence check</arg>
    </args>
    <options>
      <option name="ST_range" value="*-610" />
      <option name="strategy" value="Downtime-minimized" />
      <option name="destcomponent" value="SCM" />
    </options>
    <action>Performs consistence check</action>
  </phase>

  <!-- ****************************************************************************** -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
    <phaselist>
      <submoduleref name="SUBMOD_MIG_SETUP" password="YDDPUZKH">
	<!-- pwd: 70121 -->
      </submoduleref>

      <submoduleref name="SUBMOD_MIG_PREPARE" password="YDDPUZKH">
	<!-- pwd: 70121 -->
      </submoduleref>

      <submoduleref name="SUBMOD_MIG_UPTIME_EXP" password="YDDPUZKH">
	<!-- pwd: 70121 -->
	<options>
	  <option name="MIGRATE_OPTION" value="SERIAL" />
	</options>
      </submoduleref>

      <submoduleref name="SUBMOD_MIG_UPTIME_RUN" password="YDDPUZKH">
	<!-- pwd: 70121 -->
	<options>
	  <not> <option name="MIGRATE_OPTION" value="SERIAL" /></not>
	</options>
      </submoduleref>

      <!-- ****************************************************************************** -->
      <submoduleref name="SUBMOD_MIG_SLT_START" password="YDDPUZKH">
	<!-- pwd: 70121 -->   
	<options>
	  <option name="MIGRATE_OPTION" value="SLT" />
	</options>
      </submoduleref>  
    </phaselist>
  </submodule>
  
  <!-- ****************************************************************************** -->
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_PREUP_FINI_D" password="GBTVWJUR">
       <!-- pwd: 59052 -->   
    <args>
      <arg>PREUPTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="GETSYNC_PREUP_FINI_D" password="QVHZMPCL">
       <!-- pwd: 56325 -->   
    <args>
      <arg>PREUPTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="SETSYNC_PREUP_DT_CONFIRM" password="WMVWJDLQ">
       <!-- pwd: 37086 -->   
    <args>
      <arg>PREUPTIME</arg>
      <arg>DOWNTIME_CONFIRMED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="exemode" value="BATCH" />
    </options>
    <action>Events for sync with Java</action>
  </phase>
  <!-- Check if Stressmaker is active in Original-->
  <phase name="RUN_UPG_STRESSMAKER_CHECK_ORIG" logfile="STRESS_CHK_ORI.LOG" elgfile="STRESS_CHK_ORI.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->   
    <args>
      <arg>RSUPG_STRESS_ACTIVE_CHECK</arg>
      <arg>SAP_STRESS_CO</arg>
      <arg>NO-IGNORE</arg>
      <arg>STRESSMAKER_CHK_ORI\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Check if stress maker is active in original system</arg>
    </args>
    <options>
      <or>
        <option name="ZERODOWNTIME_UPG" />	
	<option name="ITERATIVE_UPG" /> 		
        <option name="MIGRATE_OPTION" value="SLT" />
      </or>
      <option name="feature_switch" value="/fa/stress_maker" />
      <option name="ST_range" value="700-*" />	  
    </options>
    <action>Check if stress maker is active in original system</action>
  </phase>

  <!-- ********************************************************************* -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="MIGRATE_OPTION" value="SERIAL" />
    </options>
    <phaselist>
      <phase name="HOSTCHANGE_MOVE" logfile="HOSTCHANGEMOVE.LOG" password="SUMNHLPW">
	<!-- pwd: 94221 -->
	<args>
	  <arg>REQ_HOSTMOVE;FORK_FILES;SETUP_ON_NEW</arg>
	</args>
      </phase>

      <!--  This one runs only on the *new* host  -->
      <submoduleref name="SUBMOD_MIG_SER_SETUPNEW" password="KRGCCBGT">
        <!-- pwd: 18958 -->
        <options>
	  <option name="HOSTCHANGED"/>
        </options>
      </submoduleref>
    </phaselist>
  </submodule>
</phaselist>
 </module>

   <!-- ******************************************************************* -->
    <module name="MAIN_DTTRANS" type="upgrade" mandatory="yes" reselect="no">
      <description>Transition to Downtime for Downtime-minimized</description>
      <options>
        <option name="strategy" value="Downtime-minimized" />
        <not> <option name="ZERODOWNTIME_UPG"/> </not>
	<!-- DMO/serial: only on original host  -->
	<not><option name="HOSTCHANGED"/></not>
      </options>
      <postevent>MODULE_INIT(MAIN_BRITRANS)</postevent>
      <revokemodule>REV_DTTRANS</revokemodule>
      <password>CRCPLGDF</password>
      <!--  pwd: 6021  -->
      <precedences>
        <precedence>MAIN_INIT</precedence>
        <precedence>MAIN_DTTRANSEUI</precedence>
        <precedence>MAIN_SHDCRE</precedence>
        <precedence>MAIN_SHDINST</precedence>
        <precedence>MAIN_DTTRANSSHD</precedence>
        <precedence>MAIN_SHADOW</precedence>
        <precedence>MAIN_SHDPREPUT</precedence>
        <precedence>MAIN_SHDRUN</precedence>
        <precedence>MAIN_SHDIMP</precedence>
      </precedences>
      <phaselist>
        <submoduleref name="@SUBMOD_DTTRANS" password="AWHKBVTQ">    <!-- pwd: 53084 -->
        </submoduleref>
      </phaselist>
    </module>
    <!-- ******************************************************************* -->
    <module name="MAIN_BRITRANS" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Transition to Bridge</description>
      <options>
        <option name="ZERODOWNTIME_UPG" />
      </options>
      <postevent>MODULE_INIT(MAIN_PROFSTART)</postevent>
      <revokemodule>REV_BRITRANS</revokemodule>
      <password>XFUYTYRK</password>
      <!--  pwd: 598  -->
      <precedences>
        <precedence>MAIN_DTTRANS</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINBriTrans.xml#26 $"> 
  <!-- ************************************************************ -->
  <!-- UPGRADE: Setup Bridge System -->
  <!-- ************************************************************ -->
  <submoduleref name="SUBMOD_BRIDGE_SETUP" password="CYOWKGMQ">
    <!-- pwd: 2600 -->   
  </submoduleref> 
  <!-- ************************************************************ -->
  <!-- UPGRADE: Transition to Bridge -->
  <!-- ************************************************************ -->
  <phase name="RUN_UPG_STRESSMAKER_STOP_BRI_ROLL" logfile="RSUPG_STRESS4UPGRADE.LOG"
	 elgfile="RSUPG_STRESS4UPGRADE.ELG" password="OCDEFTTC">
    <!-- pwd: 74999 -->
    <args>
      <arg>RSUPG_STRESS4UPGRADE</arg>
      <arg>SAP_STRESS_STOP</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_STRESSMAKER_STOP\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Stop stress maker for startrelease greater or equal 700</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/stress_maker" />
      <or>
	<!-- do not run this phase after 740SP08 -->
        <option name="startcomponent" value="SAP_BASIS(740(*-7))" />
        <option name="ST_range" value="700-739" />
      </or>
    </options>
    <action>Stop stress maker for startrelease greater or equal 700</action>
  </phase>

  <phase name="RUN_UPG_STRESSMAKER_DISABLE_RO" logfile="RSUPG_STRESS4UPGRADE.LOG"
	 elgfile="RSUPG_STRESS4UPGRADE.ELG" password="OCDEFTTC">
    <!-- pwd: 74999 -->
    <args>
      <arg>RSUPG_STRESS4UPGRADE</arg>
      <arg>SAP_DISABLE_RO</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_STRESS_DISABLE_RO\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Disable generic stress on all RO tables</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/stress_maker" />
    </options>
    <action>Disable generic stress on all RO tables</action>
  </phase>

  <!-- ****************************************************************************** -->
  <!-- (HK ZDM) - activate subsystem isolation on source system (requested by Christian Lutter) -->
  <phase name="RUN_RLFW_SYSTEMSEP_ON" logfile="RLFWSYSTEMSEPON.LOG"
	 elgfile="RLFWSYSTEMSEPON.ELG" password="WJOGCDWP">
    <!-- pwd: 18134 -->
    <args>
      <arg>RLFW_SYSTEM_SEPARATION</arg>
      <arg>RLFW_SYSTEMSEP_ON</arg>
      <arg>NO-IGNORE</arg>
      <arg>RLFW_SYSTEMSEP_ON\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Activate subsystem isolation</arg>
    </args>
    <action>Activate subsystem isolation</action>
    <options>
      <or>
	    <option name="startcomponent" value="SAP_BASIS(740(5-*))" />
	    <option name="ST_range" value="741-799" />
      </or>
    </options>
  </phase>

  <submoduleref name="SUBMOD_BRITRANS_RESTART" password="KRGCCBGT">
    <!-- pwd: 18958 -->
    <options>
      <option name="BRITRANS" value="RESTART" />
    </options>
  </submoduleref>

<if test="0">
  <submoduleref name="SUBMOD_BRITRANS_RKS" password="KRGCCBGT">
    <!-- pwd: 18958 -->
    <options>
      <option name="BRITRANS" value="RKS" />
    </options>
  </submoduleref>
</if>

  <submoduleref name="SUBMOD_BRITRANS_RECONNECT" password="KRGCCBGT">
    <!-- pwd: 18958 -->
    <options>
      <option name="BRITRANS" value="RECONNECT" />
    </options>
  </submoduleref>

  <phase name="RUN_RSUPGCLIENTLOCK" logfile="CLIENTLOCK.LOG" connect="bridge" elgfile="CLIENTLOCK.ELG" password="SJVPQLMB"> <!-- pwd: 97353 -->
    <args>
      <arg>RSUPGCLIENTLOCK</arg>
      <arg>SAP_CLNT_LOCK</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGCLIENTLOCK\.$(SAPSID)</arg>
      <arg>1</arg>
      <arg>Set the client lock flags for the bridge</arg>
    </args>
    <action>Set the client lock flags for the bridge</action>
  </phase>

  <!-- create CDS Views for bridge system (source system) will be later replaced
       by R3load calls 
        -->
  <phase name="RUN_RUTDDLSCREATE" logfile="RUTDDLSCREATE_PHASE.LOG"
	 connect="bridge" elgfile="RUTDDLSCREATE.ELG" password="SJVPQLMB"> <!-- pwd: 97353 -->
    <args>
      <arg>RUTDDLSCREATE</arg>
      <arg>SAP_CDSCRE</arg>
      <arg>NO-IGNORE</arg>
      <arg>$CONDEVAL($SAPRELCMP($(SAPSTRL),$COMPSTPLV(SAP_BASIS),740,5) ge 0,RUTDDLSCREATE\.$(SAPSID),)</arg>
      <arg>5</arg>
      <arg>Creates CDS Views after the migration</arg>
    </args>
    <options>
      <option name="startcomponent" value="SAP_BASIS(740(2-*))" />
    </options>
    <action>Creates CDS Views after the migration</action>
  </phase>
  <phase name="REQ_USER_ROLLOVER_FINAL" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <args>
      <arg>ReqUserRolloverFinal</arg>
      <arg></arg>
    </args>
    <options>
      <option name="BRITRANS" value="RESTART" />
    </options>
    <action>Request user roll-over to bridge instance</action>
  </phase>
  <phase name="DOWNCONF_BRI" logfile="DOWNCONFBRI.LOG" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <args>
      <arg>START_BRIDGE</arg>
    </args>
    <action></action>
  </phase>
  <!-- Lars: only until SmartSwitch is repeatable -->
  <phase name="RUN_UPG_STRESSMAKER_START_BRI" logfile="RSUPG_STRESS4UPGRADE.LOG" connect="bridge"
	 elgfile="RSUPG_STRESS4UPGRADE.ELG" password="IBWKCFML">
    <!-- pwd: 58871 -->
    <args>
      <arg>RSUPG_STRESS4UPGRADE</arg>
      <arg>SAP_STRESS_STARTBRI</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_STRESSMAKER_STARTBRI\.$(SAPSID)</arg>
      <arg>40</arg>
      <arg>Start stress maker for ZDM</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/stress_maker" />
      <option name="startcomponent" value="SAP_BASIS(740(5-7))" />
    </options>
    <action>Start stress maker for ZDM</action>
  </phase>

  <!-- Check if Stressmaker is active in Bridge after Rollover-->
  <phase name="RUN_UPG_STRESSMAKER_CHECK_BRI_ROLLOVER" logfile="STRESS_CHK_BRI_RO.LOG" connect="bridge"
	 elgfile="STRESS_CHK_BRI_RO.ELG" password="IBWKCFML">
    <!-- pwd: 58871 -->
    <args>
      <arg>RSUPG_STRESS_ACTIVE_CHECK</arg>
      <arg>SAP_STRESS_CBR</arg>
      <arg>NO-IGNORE</arg>
      <arg>STRESSMAKER_CHK_BRI_RO\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Check if stress maker is active in bridge after rollover</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/stress_maker" />
      <or>
	<!-- use this after check is ok again SAP_BASIS(740(5-*)) -->
        <option name="startcomponent" value="SAP_BASIS(740(5-*))" />
        <option name="ST_range" value="741-*" />
      </or>
    </options>
    <action>Check if stress maker is active in bridge after rollover</action>
  </phase>

  <phase name="RUN_RTO_CALLER_LIS_STRESS" logfile="RTO_CALLER.LOG" connect="bridge" 
    elgfile="RTO_CALLER.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_RTO_CALLER</arg> 
      <arg>SAP_RTO_LIS_STRESS</arg>
      <arg></arg>
      <arg>RTO_CAL_LIS_STRESS\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Calling all LIS RTOs methods</arg>
    </args>
    <action>Calling all LIS RTOs methods</action>
    <options>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ZERODOWNTIME_UPG" />
    </options>
  </phase>  
  
  
  
</phaselist>

    </module>
    <!-- ******************************************************************* -->
    <module name="MAIN_PROFSTART" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Downtime I: Set up system for downtime</description>
      <options>
	<or>
	  <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
	  <option name="HOSTCHANGED"/>
	</or>
      </options>
      <postevent>MODULE_INIT(MAIN_SWITCH)</postevent>
      <revokemodule>REV_PROFSTART</revokemodule>
      <password>KHASWBIH</password>
      <!--  pwd: 83743  -->
      <precedences>
        <precedence>MAIN_BRITRANS</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINProfStart.xml#36 $">
  <!-- ************************************************************ -->
  <!--  Profile transition to downtime  -->
  <!-- ************************************************************ -->
  <!-- (jo 720) We might have a remote ASCS and thus the license isn't valid. We
       ** try to install a license after checking that the hardware key is different
       **  to the local one. We ignore errors in case the customer already installed a license.
    -->
  <phase name="INSTTEMPLIC_TRANS" logfile="auto" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>CHECKMSGHWKEY;IGNERR</arg>
    </args>
    <options>
      <option name="ST_range" value="700-*" />
    </options>
    <action>Creates a temporary license for the downtime</action>    
  </phase>

  <!-- (jo 710) Always stop the system to make sure it is down! -->
  <phase name="STOPSAP_TRANS" password="EASFFNXO">
    <!-- pwd: 78049 -->   
    <args>
      <arg>LOCK;ALL;STOP_SERVICE</arg>
    </args>
    <!-- (jo 721) Must not have any option - see IM 521440 2013  -->
    <!-- (hk 721) Bridge is running / Upgrade instance is still down -->
    <options>
      <not><option name="ZERODOWNTIME_UPG"/></not>     
      <!-- DMO/serial: not on new host  -->
      <not><option name="HOSTCHANGED"/></not>
    </options>
    <action>Stops the production system</action>
  </phase>

  <!-- **************************************************************************** -->
  <phase name="KX_CHANGE_SAVEREPL" logfile="KXSAVEREPL.LOG" password="EASFFNXO">
    <!-- pwd: 78049 -->   
    <args>
      <arg>SETOLDREPLICATIONPATH</arg>
    </args>
    <action>Memorizes old replication status of system</action>
  </phase>

  <!-- ******************************************************************************** -->
  <submoduleref name="SUBMOD_PROFSTART1" password="SJVPQLMB">
    <!-- pwd: 97353 -->
  </submoduleref>

  <submodule password="KRGCCBGT">
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <phaselist>
      <phase name="MODDEF_APP" logfile="MODDEF_APP.LOG" password="YQQPHZXU">
	<!-- pwd: 83652 -->   
	<args>
	  <arg>1</arg>
	</args>
	<action>Appends Java parameters to the ALP files</action>
      </phase>
      <phase name="CHANGEPROF_JAPPD1" logfile="CHANGEPROF_JAPP.LOG" password="ATAUUVEP">
	<!-- pwd: 34051 -->   
	<args>
	  <arg>JAVA_ALPXDEF.XML</arg>
	  <arg>ALLPROF</arg>
	  <arg>OPTIONAL;VARDIR</arg>
	</args>
	<action>Modifies profiles as requested by SAPJup</action>
      </phase>
      <phase name="CHANGEPROF_JAPPI1" logfile="CHANGEPROF_JAPP.LOG" password="SJICQLMB">
	<!-- pwd: 57708 -->   
	<args>
	  <arg>JAVA_ALPXPOOL.XML</arg>
	  <arg>ALLPROF</arg>
	  <arg>OPTIONAL;VARDIR</arg>
	</args>
	<action>Modifies profiles as requested by SAPJup</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (jo 720) Change instance number -->
  <submoduleref name="SUBMOD_INSTNR_CHG" password="SJVPQLMB">
    <!-- pwd: 97353 -->   
    <options>
      <option name="CHANGE_INSTNR" />
    </options>
  </submoduleref>

  <submoduleref name="SUBMOD_PROFSTART2" password="SJVPQLMB">
    <!-- pwd: 97353 -->
  </submoduleref>

  <!-- ******************************************************************************** -->
  <!-- (jo 700) Needed for JAVA -->
  <phase name="SETSYNC_PROFILES_CHANGED" password="IRQAWFOZ">
    <!-- pwd: 64616 -->   
    <args>
      <arg>PROFILES</arg>
      <arg>CHANGED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>

  <!-- (ps 700.16) new phase type for synchronization with Java upgrade -->
  <phase name="SETSYNC_DOWN_START_D" password="QOVSNPTA">
    <!-- pwd: 67126 -->   
    <args>
      <arg>DOWNTIME</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
</phaselist>

    </module>
    <!-- ******************************************************************* -->
    <module name="MAIN_SWITCH" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Downtime I: Switch tables and Kernel</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_NEWBAS)</postevent>
      <revokemodule>REV_MAINSWITCH</revokemodule>
      <password>KHASWBIH</password>
      <!--  pwd: 83743  -->
      <precedences>
        <precedence>MAIN_DTTRANS</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINSwitch.xml#185 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Downtime phases I -->
  <!-- ************************************************************ -->

  <!-- ********************************************************************* -->
  <submoduleref name="SUBMOD_MIG_SWITCH_ORG" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <!-- DMO/serial: only on original host  -->
      <not><option name="HOSTCHANGED"/></not>
    </options>
  </submoduleref>

  <!-- ********************************************************************* -->
  <submoduleref name="SUBMOD_MIG_SWITCH_NEW" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </submoduleref>

  <!-- ************************************************************ -->
  <submodule password="KRGCCBGT">
    <options>
      <not><option name="MIGRATE_SECONDDB" /></not>
      <not><option name="ZERODOWNTIME_UPG" /></not>
    </options>
    <phaselist>
      <!--  (jo) see 669770 2014  -->
      <phase name="SQLDB_BTCCTRNS1" password="EASFFNXO">
	<!-- pwd: 78049 -->
	<args>
	  <arg>DESCHEDULE_BATCHJOBS</arg>
	  <arg></arg>
	</args>
	<action>Deschedules batch jobs while system is down</action>
	<options>
          <option name="strategy" value="Downtime-minimized" />
        </options>
      </phase>

      <!-- ************************************************************ -->
      <phase name="STARTSAP_TRANS" password="AWHKBVTQ">
	   <!-- pwd: 53084 -->   
	<args>
	  <arg>START_SERVICE;CENTRAL</arg>
	  <arg>DEVTRACE.LOG</arg>
	</args>
	<action>Starts SAP system</action>
      </phase>

      <submoduleref name="SUBMOD_SWITCH_OLDREL" password="OCDEFTTC">
	   <!-- pwd: 74999 -->   
      </submoduleref>

      <!-- ** Release Shutdown -->
      <!-- ** Basis Conversion -->
      <phase name="UVERS_UP_B" password="WPCMQDAR">
	   <!-- pwd: 89806 -->   
	<args>
	  <arg>B</arg>
	  <arg></arg>
	</args>
	<action>Changes the status in table UVERS</action>
      </phase>

      <!-- ********************************************************************* -->
      <phase name="STOPSAP_XCNV" password="YQQPHZXU">
	   <!-- pwd: 83652 -->   
	<args>
	  <arg>CENTRAL;STOP_SERVICE</arg>
	</args>
	<action>Stops SAP system</action>
      </phase>

      <!-- external conversion - must run on old structures -->
      <phase name="XCNV_DUMP" logfile="XCNVDUMP.LOG" elgfile="XCNVDU.ELG" password="ATAUUVEP">
	   <!-- pwd: 34051 -->   
	<args>
	  <arg>DUMP</arg>
	  <arg></arg>
	  <arg>XCNV_ORG</arg>
	  <arg>XCNV.SAP</arg>
	</args>
	<action>Writes the contents of tables for external conversion to the file system</action>
      </phase>
    </phaselist>
  </submodule>
  
  <!-- ak 05/2014 create trigger to test for accidental updates to smodilog and enhobj -->
  <phase name="SQLDB_SMODITRIGGERDROP"  password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>SMODITRIGGER_DROP</arg>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/smoditrigger" />
      <option name="HASSHADOW" />
      <not><option name="MIGRATE_SECONDDB" /> </not>
      <or>
	<option name="DBTYPE" value="SAPDB" />
	<option name="DBTYPE" value="ORACLE" />
      </or>
    </options>
    <action>create triggers for testing</action>
  </phase>
 

 
  <phase name="XCNV_DEL" logfile="XCNVDELE.LOG" elgfile="XCNVDE.ELG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>DEL</arg>
      <arg></arg>
      <arg>XCNV_ORG_DEL</arg>
      <arg>XCNV_DEL</arg>
    </args>
    <options>
       <not> <option name="ZERODOWNTIME_UPG" /> </not>
    </options>
    <action>Deletes from the system the contents of tables that have been written to the file system</action>
  </phase>

  <!-- delete exchange tabes that will become views -->
  <phase name="VIEW_TABDEL" logfile="TABDEL.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>NOW</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <not><option name="ZERODOWNTIME_UPG" /> </not>
    </options>
    <action>Deletes tables that become views in new release</action>
  </phase>

  <!-- ********************************************************************* -->
  <!--  (jo 720) Drop basis views before EU_SWITCH / ZDM_SWITCH -->
  <phase name="SQLSELEXE_DROPBASVIEW" logfile="SELEXEDRBASVIEW.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>SWITCH_DROPVIEWS</arg>
      <arg>DROP_BASVIEW</arg>
      <arg>SCRCLASSID</arg>
    </args>
    <action>Drop views on basis tables</action>
    <options>
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
  </phase>
  
  <!-- ************************************************************ -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
    <phaselist>
      <!-- (hk + MatthiasG.) Needed to avoid problems with pending views during Smart Switch (wait for DB2 patch) -->
      <phase name="SQLSELEXE_DROP_BRIVIEWS_DB2" logfile="DRPBRIVIEWS.LOG" connect="bridge" password="SANGVLTY">
        <!-- pwd: 63887 -->
        <args>
          <arg>SHADOW_VIEWS</arg>
          <arg>DROP_VIEWS</arg>
          <arg>SCRCLASSID</arg>
        </args>
        <options>
          <option name="DBTYPE" value="DB2-z/OS" />
        </options>
      </phase>
      <!--  (HK ZDM) Smart Switch for ZDM -->
      <phase name="SQLSELEXE_ZDMSWITCH" logfile="SELEXEZDMSWITCH.LOG" password="IRQAWFOZ">
           <!-- pwd: 64616 -->   
        <args>
          <arg>SEL_SMART_SWITCH</arg>
          <arg>SMART_SWITCH</arg>
          <arg></arg>
        </args>
        <action>Smart Switch for ZDM</action>
        <options>
          <option name="ZERODOWNTIME_UPG" />
        </options>
      </phase>
      <!-- ************************************************************ -->
      <submodule password="KRGCCBGT">
        <options>
          <option name="DBTYPE" value="DB2-z/OS" />
        </options>
        <phaselist>
          <!-- (hk + MatthiasG.) Create some Alias to enable R3ldctl call -->
          <phase name="SQLDB_DRCR_BRI_DB2" password="EASFFNXO">
            <!-- pwd: 78049 -->
            <args>
              <arg>ALIAS_DRCR_BRI_DB2</arg>
              <arg></arg>
            </args>
            <action>Create some alias for R3ldctl call</action>
          </phase>
          <!-- (hk + MatthiasG.) Needed to avoid problems with pending views during Smart Switch (wait for DB2 patch) -->
          <phase name="EU_CLONE_CRE_SHDVIEWS_BRI_DB2" logfile="EUCLONECRSHDVIEWDB2.LOG"
               elgfile="EUCLONECRSHDVIEWDB2.ELG" password="SJVPQLMB">
               <!-- pwd: 97353 -->
            <args>
              <arg></arg>
              <arg>SHADOW_VIEWS</arg>
              <arg>shdviews_bri_db2</arg>
              <!--  (jo 720) If we encounter tables, we must convert them to views  -->
              <arg>NOCONTREQFIELD;USE_DROPDEST;MAP:SHDNAME=$$(LIST@BRINAME);ORIGTAB2VIEW;DESTSHADOWORIG;NODURATIONS;BRIDGESUFFIX</arg>
            </args>
            <options>
              <option name="ZERODOWNTIME_UPG" />
              <option name="DBTYPE" value="DB2-z/OS" />
            </options>
          </phase>
          <!-- (hk + MatthiasG.) Drop Alias again -->
          <phase name="SQLDB_DR_BRI_DB2" password="EASFFNXO">
            <!-- pwd: 78049 -->
            <args>
              <arg>ALIAS_DR_BRI_DB2</arg>
              <arg></arg>
            </args>
            <options>
              <option name="DBTYPE" value="DB2-z/OS" />
              <option name="ZERODOWNTIME_UPG" />
            </options>
            <action>Drop Alias again</action>
          </phase>
        </phaselist>
      </submodule>
      <!-- Check if Stressmaker is active in Bridge after Smart Switch-->
      <phase name="RUN_UPG_STRESSMAKER_CHECK_BRI_SMART_SWITCH" logfile="STRESS_CHK_BRI_SW.LOG" connect="bridge" elgfile="STRESS_CHK_BRI_SW.ELG" password="IBWKCFML">
           <!-- pwd: 58871 -->   
        <args>
          <arg>RSUPG_STRESS_ACTIVE_CHECK</arg>
          <arg>SAP_STRESS_CBS</arg>
          <arg>NO-IGNORE</arg>
          <arg>STRESSMAKER_CHK_BRI_SW\.$(SAPSID)</arg>
          <arg>2</arg>
          <arg>Check if stress maker is active in bridge after smart switch</arg>
        </args>
        <options>
        <option name="feature_switch" value="/fa/stress_maker" />
        <or>
            <option name="startcomponent" value="SAP_BASIS(740(5-*))" />   <!-- use this after check is ok again SAP_BASIS(740(5-*)) -->
            <option name="ST_range" value="741-*" />  
        </or>
        </options>
        <action>Check if stress maker is active in bridge after smart switch</action>
      </phase>
    </phaselist>
  </submodule>
  
  <phase name="EU_SWITCH" logfile="EUSWITCH.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->   
    <args>
      <arg>SWITCH</arg>
      <arg>SET_FLAG</arg>
    </args>
    <options>
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
    <action>Switches to new Repository by rename/rename</action>
  </phase>

  <phase name="SQLDB_MSS_MSSPROCSTHROW" password="IRQAWFOZ">
    <!-- pwd: 64616 -->
    <args>
      <arg>MSSPROCSTHROW</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
  </phase>
  
  <!-- ********************************************************************* -->
  <submoduleref name="SUBMOD_LC4BRI_EXEC" password="AZBNIVIR">
       <!-- pwd: 58707 -->   
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
  </submoduleref>
  
  <!-- ***************************************************************************** -->
  <!-- ***************************************************************************** -->
  <phase name="XCNV_DEL_ZDM" logfile="XCNVDELE.LOG" elgfile="XCNVDE.ELG" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <args>
      <arg>DEL</arg>
      <arg></arg>
      <arg>XCNV_ORG_DEL</arg>
      <arg>XCNV_DEL</arg>
    </args>
    <options>
       <option name="ZERODOWNTIME_UPG" />
    </options>
    <action>Deletes from the system the contents of tables that have been written to the file system</action>
  </phase>
  
  <!-- (wh jo 720) Moved after* EU_SWITCH and removed 'SHADOW_ONLY' option to
       **  make sure we touch the original loads (touch actually happens in REPOSRC).
    -->
  <phase name="PARMVNT_XCNV" logfile="MVNTXCNV.LOG" elgfile="MVNTXCNV.ELG" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>TP_MOVENTABS_SHD</arg>
  <!-- arg>$CONDEVAL($(ZERODOWNTIME_UPG),,INTDEL;)INTACT;$CONDEVAL($(SGEN_MODE) != none,TOUCH,NOTOUCH);NOBUFFRESET</arg -->
      <arg>$CONDEVAL($(ZERODOWNTIME_UPG),,INTDEL;)INTACT;$CONDEVAL($IS_SGENMODE(none),NOTOUCH,TOUCH);NOBUFFRESET</arg>
      <arg>$CONDEVAL($(MIGRATE_SECONDDB),MF=A;,) MF=F,STEP=X,RANGE-TS; MF=C,STEP=X</arg>
      <arg>XTERN_CNV.TP0</arg>
    </args>
    <action>Activates nametab entries for external conversions</action>
  </phase>

  <!-- ***************************************************************************** -->
  <phase name="XCNV_LOAD" logfile="XCNVLOAD.LOG" elgfile="XCNVLO.ELG" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <args>
      <arg>LOAD</arg>
      <arg></arg>
      <arg>XCNV_ORG</arg>
      <arg>XCNV.SAP</arg>
    </args>
    <action>Converts tables externally and writes the contents back to the system</action>
  </phase>
  <!-- ***************************************************************************** -->

  <phase name="SQLSELEXE_TRUNCLOAD" logfile="LOADTRUNC.LOG" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>LOADTABLES</arg>
      <arg>TRUNC_TABLES</arg>
      <arg>SCRCLASSID</arg>
    </args>
    <options>
      <option name="sgen_mode" value="none" />
    </options>
    <action>Cleans load tables</action>
  </phase>
   
  <!-- (vd 610.2.18) run in parallel -->
  <phase name="MVNTAB_VIEW" logfile="MVNTVIEW.LOG" elgfile="MVNTVIEW.ELG" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>PARALLEL;NOBUFRESET;$CONDEVAL($IS_SGENMODE(none),NOTOUCH,TOUCH);CHECK_MF</arg>
      <arg>P</arg>
      <arg></arg>
      <arg>MVNTVIEW.TP0</arg>
    </args>
  </phase>
  <!-- (cv 731.02) switch phase off for EHPI, only necessary in upgrade case -->
  <!-- (hk 721) always rewrite nametabs - requested for VMC tables (IM 1903555 2013)  -->
  <phase name="NTACT_RWR" logfile="NTRWR40.LOG" elgfile="NTRWR40.ELG" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>RWR40ANT</arg>
      <arg>NOBUFRESET;TTONLY=TT</arg>
      <arg>NTRWR40.TP0</arg>
    </args>
    <action>Adapts switched nametab entries for database objects to the target system</action>
  </phase>
  <!-- (vd 46A.11) turn session manager off -->
  <phase name="SQLDB_SMOFF" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>SESSION_MANAGER_OFF</arg>
      <arg></arg>
    </args>
    <action>Switches off the Session Manager for the upgrade</action>
  </phase>

  <!-- ***************************************************************************** -->
  <submoduleref name="SUBMOD_SWITCH_KERNEL" password="KABYXBZW">
       <!-- pwd: 47366 -->   
    <options>
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
  </submoduleref>

  <!-- ***************************************************************************** -->
  <!-- (vd 610.17) this is done by tp in PARMVNT_XCNV cU("ALTER_DLG"), -->
  <!-- (mh 620/4.27) update PUTTB-WCONTENT for known codepage tables -->
  <!-- in 620/4: 'SHADOW_IMPORT_BAS' -->
  <phase name="SQLDB_BAS_TCP" logfile="SQLDB_BAS_TCP.LOG" password="WFJPKDCF">
       <!-- pwd: 60928 -->   
    <args>
      <arg>SHADOW_IMPORT_TRIG</arg>
      <arg></arg>
    </args>
    <action>Mark some codepage tables for import in the next phase</action>
  </phase>
  <phase name="UPDATE_DBSTATS_DB2_TABUIMP_BAS" password="YDDPUZKH">     <!-- pwd: 70121 -->
    <args>
      <arg>FILE</arg>
      <arg>bin</arg>
      <arg>DB2RUNPH.LST</arg>
      <arg>TABUIMP_BAS=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
        <option name="DBTYPE" value="DB2-z/OS" />
    </options>
  </phase>
  <phase name="TABUIMP_BAS" elgfile="TABUIMP.ELG" password="MVWDHMJL">
       <!-- pwd: 5514 -->   
    <!-- (af 620.38) -->
    <args>
      <arg>BASIMP.BUF</arg>
      <arg>TABUIMP.TP0</arg>
      <arg></arg>
      <arg>buffertest=I;nochkimpdp</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Imports (a small number of) table entries needed to start the system with the new SAP kernel</action>
  </phase>
  <!-- (vd 620.24) DB6 update on DBSTATC, Part I (BW only) -->
  <!-- (vd 640.14) use 2 different names for logs -->
  <phase name="SQLDB_UPDDBSTA" logfile="SSEDBSTA.LOG" password="YVGUKZWN">
       <!-- pwd: 68913 -->   
    <args>
      <arg>UPDATE_DBSTA</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
      <option name="destcomponent" value="SAP_BW" />
    </options>
    <action>Updates DBSTATC</action>
  </phase>
  <!-- (fhw 640.01) DB6 update on DBSTATC, Part II (for all products) -->
  <!-- (vd 640.14) use 2 different names for logs -->
  <phase name="SQLDB_UPDDBSTA_2" logfile="SSEDBST2.LOG" password="IEDAJFBM">
       <!-- pwd: 40231 -->   
    <args>
      <arg>UPDATE_DBSTA_2</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB6" />
    </options>
    <action>Updates DBSTATC</action>
  </phase>
  <!-- (stm 610.2.01) table space measurements -->
  <phase name="DMPSPC_SET" logfile="DMPSPC_SET.LOG" password="WCPMDDNE">
       <!-- pwd: 11646 -->   
    <args>
      <arg></arg>
      <arg>DMPSPC_SET.FRE</arg>
      <arg>DMPSPC_SET.ALL</arg>
          <arg>table space sizes at SET</arg>
    </args>
    <action>Provides information on free space in the database</action>
  </phase>
  <!-- ae ehpi update SVERS before starting system -->
  <phase name="SQLDB_UPDATE_SVERS" logfile="UPDSVERS.LOG" password="CHOKYROF">
       <!-- pwd: 81640 -->   
    <args>
      <arg>UPDATE_SVERS</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Write destination release in SVERS</action>
  </phase>
  <!-- (ps 710-1.55) Use generated script instead of fixed one -->
  <phase name="SQLDB_D1GENIN" logfile="D1GENIN.LOG" password="SUMNHLPW">
       <!-- pwd: 94221 -->   
    <args>
      <arg>D1GENINSERT</arg>
      <arg></arg>
    </args>
    <options>
      <option name="realdestvers" value="702-709,730-*" />
    </options>
    <action>Prevents anticipating generation</action>
  </phase>
</phaselist>
</module>
 
  <!-- ******************************************************************* -->
    <module name="MAIN_NEWBAS" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Downtime II: Conversion, Main Import, XPRAs</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(MAIN_TRANSEXEC)</postevent>
      <revokemodule>REV_MAINNEWBAS</revokemodule>
      <password>QPTTYPYJ</password>
      <!--  pwd: 80889  -->
      <precedences>
        <precedence>MAIN_SWITCH</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINNewBas.xml#324 $">
  <!-- ************************************************************ -->
  <!-- UPGRADE: Downtime phases II -->
  <!-- ************************************************************ -->
  <!-- (jo 720) We might have a remote ASCS and thus the license isn't valid.
       We try to install a license after checking that the hardware key
       is different to the local one. We ignore errors in case the customer already installed a license.
    -->
  <phase name="INSTTEMPLIC_NBAS" logfile="INSTTEMPLICNB.LOG" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <args>
      <arg>CHECKMSGHWKEY;IGNERR</arg>
    </args>
    <action>Creates a temporary license for the downtime</action>
  </phase>

  <phase name="SQLDB_CLEANSECSTORE" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <args>
      <arg>CLEAN_SECSTORE</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Cleans secstore</action>
  </phase>

  <!--  (jo) see 669770 2014  -->
  <phase name="SQLDB_BTCCTRNS1_MIG" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <args>
      <arg>DESCHEDULE_BATCHJOBS</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Deschedules batch jobs while system is down</action>
  </phase>

  <!-- (jo + ag 720) Service was not started after phase KX_SWITCH on Windows, so make sure it is done now. -->
  <!-- start destination release system -->
  <phase name="STARTSAP_NBAS" password="AWHKBVTQ">
    <!-- pwd: 53084 -->
    <args>
      <arg>$CONDEVAL($(ZERODOWNTIME_UPG),LOCK;,)CENTRAL;START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts SAP system</action>
  </phase>

  <!-- PUTTB_SHD Shadow Name was adapted during uptime already, read it now from target database-->
  <phase name="READPUTTB_MIG" logfile="RDPUTTMIG.LOG" password="WFJPKDCF">
    <!-- pwd: 60928 -->
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="DBTYPE_1ST" value="DB2/400" />
    </options>
  </phase>

  <submodule password="KRGCCBGT">
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
    <phaselist>
      <phase name="RFCTRUST_RELATION_CREATE" logfile="RFCTRUSTRELCRE.LOG" connect="bridge" password="SJICQLMB">
        <!-- pwd: 57708 -->
        <args>
         <arg>RELATION_CREATE</arg>
        </args>
        <action>Create relation for trusted RFC</action>
        <options>
            <option name="feature_switch" value="rfc_trusted_system" />
        </options>
      </phase>

      <phase name="RFCDEST_CREATE_U2B" logfile="CRRFCDESTU2B.LOG" password="SJICQLMB">
        <!-- pwd: 57708 -->
        <args>
          <arg>CREATE_NOPWD</arg>
          <arg>UPG2BRI</arg>
        </args>
        <action>Creates RFC connection SAP_UPGRADE_BRI_SYSTEM</action>
      </phase>

      <phase name="RFCDEST_CREATE_B2U" logfile="CRRFCDESTB2U.LOG" connect="bridge" password="SJICQLMB">
        <!-- pwd: 57708 -->
        <args>
          <arg>CREATE_NOPWD</arg>
          <arg>BRI2UPG</arg>
        </args>
        <action>Creates RFC connection SAP_UPGRADE_UPG_SYSTEM</action>
      </phase>

      <submodule password="KRGCCBGT">
        <options>
		  <option name="ZERODOWNTIME_UPG" />
          <or>
            <option name="destcomponent" value="SAP_BASIS(740(5-*))" />
            <option name="realdestvers" value="741-799" />
          </or>
        </options>
        <phaselist>
          <phase name="RUN_RLFW_SYSTEMSEP_CHK" logfile="RLFWSYSTEMSEPCHK.LOG" elgfile="RLFWSYSTEMSEPCHK.ELG" password="WJOGCDWP">
            <!-- pwd: 18134 -->
            <args>
              <arg>RLFW_SYSTEM_SEPARATION</arg>
              <arg>RLFW_SYSTEMSEP_CHK</arg>
              <arg>NO-IGNORE</arg>
              <arg>RLFW_SYSTEMSEP_CHK\.$(SAPSID)</arg>
              <arg>10</arg>
              <arg>Check subsystem isolation</arg>
            </args>
            <action>Check subsystem isolation</action>
          </phase>
          <phase name="RUN_RLFW_SYSTEMSEP_TEST" logfile="RLFWSYSTEMSEPTEST.LOG" elgfile="RLFWSYSTEMSEPTEST.ELG" password="WJOGCDWP">
            <!-- pwd: 18134 -->
            <args>
              <arg>RLFW_TEST_SUBSYSTEM_ISOLATION</arg>
              <arg>RLFW_SYSTEMSEP_TEST</arg>
              <arg>NO-IGNORE</arg>
              <arg>RLFW_SYSTEMSEP_TEST\.$(SAPSID)</arg>
              <arg>10</arg>
              <arg>Test subsystem isolation</arg>
            </args>
            <options>
              <option name="feature_switch" value="/fa/upgint" />
              <option name="feature_switch" value="/fa/systemseperationtest" />
            </options>
            <action>Test subsystem isolation</action>
          </phase>
        </phaselist>
      </submodule>
    </phaselist>
  </submodule>

  <!-- (jo 710) Moved after* STARTSAP since we need running system -->
  <phase name="UVERS_UP_S" password="OCDEFTTC">
    <!-- pwd: 74999 -->
    <args>
      <arg>S</arg>
      <arg></arg>
    </args>
    <action>Changes the status in table UVERS</action>
  </phase>

  <!-- (sr) Replay for ZDM -->
  <submoduleref name="SUBMOD_LC4BRI_REPLAY" password="AZBNIVIR">
    <!-- pwd: 58707 -->
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
  </submoduleref>

  <!-- ********************************************************************** -->
  <submoduleref name="SUBMOD_SWITCH_OLDREL" password="WPCMQDAR">
    <!-- pwd: 89806 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </submoduleref>

  <!-- ********************************************************************** -->
  <phase name="SETSYNC_NEWABAP_START" password="YQQPHZXU">
    <!-- pwd: 83652 -->
    <!-- (jo 720) Since it is a setter, have it always -->
    <args>
      <arg>ABAP</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="JOB_RSUPGCUA_PROD" logfile="PSUPGCUA.LOG" elgfile="PSUPGCUA.ELG" password="ATAUUVEP">
    <!-- pwd: 34051 -->
    <args>
      <arg>RSUPGCUAGEN111</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGCUAGEN111\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>CUA GEN</arg>
    </args>
    <options>
      <option name="ST_range" value="*-709" />
    </options>
    <action>Performs specific actions</action>
  </phase>

  <!-- ********************************************************************** -->
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <phase name="JOB_RSWBOUP1" logfile="PSWBOUP1.LOG" elgfile="PSWBOUP1.ELG" password="SJICQLMB">
        <!-- pwd: 57708 -->
        <args>
          <arg>RSWBOUP1</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSWBOUP1\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>CTS MIGRATION PART 1</arg>
        </args>
        <action>Initializes and adjusts tables for the Workbench Organizer</action>
      </phase>
      <!-- (af 700.02) -->
      <!-- deletion of old CVERS_REF add-on entries -->
      <phase name="JOB_RSUPGAO1" logfile="RSUPGAO1.LOG" elgfile="RSUPGAO1.ELG" password="QWFAXPHU">
        <!-- pwd: 97943 -->
        <args>
          <arg>RSUPGAO1</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSUPGAO1\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CVERS_REF DELETION</arg>
        </args>
        <action>Deletes old CVERS_REF entries for upgraded add-ons</action>
      </phase>
      <!-- (af 700) re-activate non-basis BAdIs that have been deactivated in phase JOB_RSUPGBAD -->
      <phase name="RUN_RSUPGBADACT" logfile="RSUPGBADACT.LOG" elgfile="RSUPGBADACT.ELG" password="SJVPQLMB">
        <!-- pwd: 97353 -->
        <args>
          <arg>RSUPGBADACT</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSUPGBADACT\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Re-activate non-basis BAdI objects</arg>
        </args>
        <action>Re-activates non-basis BAdI objects that have been deactivated in phase JOB_RSUPGBAD</action>
      </phase>
      <phase name="JOB_RDDNEWPP" logfile="RDDNEWPP.LOG" elgfile="RDDNEWPP.ELG" password="YAWZNZVG">
        <!-- pwd: 79932 -->
        <args>
          <arg>RDDNEWPP</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg></arg>
          <arg>5</arg>
          <arg>RDDIMPDP SCHEDULING</arg>
        </args>
        <action>Reschedules RDDIMPDP</action>
      </phase>
      <!-- (vd 620.21) -->
      <phase name="JOB_MSSSPEXE" logfile="PMSSSPEX.LOG" elgfile="PMSSSPEX.ELG" password="IRQAWFOZ">
        <!-- pwd: 64616 -->
        <args>
          <arg>MSSSPEXE</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg></arg>
          <arg>5</arg>
          <arg>MSSQL SPECIFIC ACTIONS</arg>
        </args>
        <options>
          <option name="DBTYPE" value="MSSQL" />
        </options>
        <action>Performs specific actions</action>
      </phase>

      <!-- (ms + cv) if 740 SP12 is delivered with PREPUT we have to adapt the options or the call of RUTCNVFUNCCRE -->
      <phase name="RUN_RUTCNVFUNCCRE" logfile="RUTCNVFUNCCRE.LOG" elgfile="RUTCNVFUNCCRE.ELG" password="SJVPQLMB">
        <!-- pwd: 97353 -->
        <args>
          <arg>RUTCNVFUNCCRE</arg>
          <arg>SAP_FUNCCRE</arg>
          <arg>NO-IGNORE</arg>
          <arg>RUTCNVFUNCCRE\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Create DB-functions</arg>
        </args>
        <options>
          <option name="destcomponent" value="SAP_BASIS(740(8-*))"/>
          <or>
            <option name="startcomponent" value="SAP_BASIS(740(*-7))"/>
            <option name="startcomponent" value="SAP_BASIS(*-731)"/>
          </or>
        </options>
        <action>Create necessary DB-functions for DD SQL-views</action>
      </phase>

      <!-- (bm SP10) unicode migration post processing of pool tables in DMO -->
      <phase name="JOB_UMG_POOL_TABLE_POST" logfile="UMG_POOL_TABLE_POST_UC.LOG" elgfile="auto" password="WFJPKDCF">
        <!-- pwd: 60928 -->
        <args>
          <arg>UMG_POOL_TABLE_UPG</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>UMG_POOL_TABLE_POST_UC\.$(SAPSID)</arg>
          <arg>3</arg>
          <arg>Postprocessing of pool table extension for unicode migration</arg>
        </args>
        <options>
          <option name="UCMIG_INTEGRATED" />
          <option name="MIGRATE_SECONDDB" />
        </options>
        <action>Postprocessing of pool table extension for unicode migration</action>
      </phase>
    </phaselist>
  </submodule>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- (ae) call a modified version of RSCPFROM for target release 702 -->
      <!-- (jo 720) Requested by Christiane: To enable SAPup for upgrade target "730",
       we need to fallback to old RSCPFROM_EHP
       -->
      <!-- mh 620/3 skip copying of E071K keys -->
      <phase name="RUN_RSCPFROM_EHP" logfile="PSCPFROME.LOG" elgfile="RSCPFROM.ELG" password="QOVSNPTA">
        <!-- pwd: 67126 -->
        <args>
          <arg>RSCPFROM_EHP</arg>
          <arg>SAP_CPFROMKE</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSCPFROM_EHP\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Copy selected tables from shadow</arg>
        </args>
        <options>
          <or>
            <option name="realdestvers" value="*-730" />
            <option name="realdestvers" value="800-899" />
          </or>
          <option name="MODE" value="EXPORT" />
        </options>
        <action>Copies entries from shadow tables to original tables</action>
      </phase>
      <phase name="RUN_RSCPFROM_CRR" logfile="PSCPFROMCDT.LOG" elgfile="RSCPFROMDT.ELG" password="IKETXFFO">
        <!-- pwd: 19932 -->
        <args>
          <arg>RSCPFROM_CRR</arg>
          <arg>SAP_CPFROMCRR_DT</arg>
          <arg>NO-IGNORE;REMOVELOGS=RSCPFROM_CRR_COPYFROMSHD*\.$(SAPSID)</arg>
          <arg>RSCPFROM_CRR_DT\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Copy selected tables from shadow</arg>
        </args>
        <options>
          <or>
            <option name="realdestvers" value="731-799" />
            <option name="MODE" value="CLONE" />
          </or>
        </options>
        <action>Copies entries from shadow tables to original tables</action>
      </phase>
      <!-- WH09: Copy Pooltables from Shadow -->
      <phase name="RUN_RSCPINTS_POOL2ORG" logfile="RSCPP2O.LOG" elgfile="RSCPP2O.ELG" password="IIVEBFVW">
        <!-- pwd: 66178 -->
        <args>
          <arg>RSCPINTS</arg>
          <arg>SAP_POOL2ORG</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSCPP2O\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Copy Pool from Shadow</arg>
        </args>
        <options>
          <option name="SECOND_SHD" />
        </options>
        <action>Copy Pool from Shadow</action>
      </phase>
    </phaselist>
  </submodule>

  <!--  (jo SP9) Moved *after* switch  -->
  <phase name="SHADOW_NTACT_REDEL" logfile="NTSHDDEL.LOG" elgfile="NTSHDDEL.ELG"
     password="SJVPQLMB"> <!-- pwd: 97353 -->
    <args>
      <arg>DELSHANT</arg>
      <arg>LOGICAL_ALSO;NO_SHADOW_ONLY</arg>
      <arg>NTSHDOP.TP0</arg>
    </args>
    <action>Deletes shadow table nametabs</action>
  </phase>

  <!-- to.700.508: update DB4 statistic tables -->
  <phase name="SCRIPT_CHK_DB4STAT" logfile="DB4STAT_CHK.LOG" password="AFCGWVMT">
    <!-- pwd: 33621 -->
    <args>
      <arg>DB4TABLE_STAT.XQL</arg>
      <arg>DB4TABLE_STAT.LOG</arg>
      <arg>TABNAME_LONG, TABSIZE =</arg>
      <arg>FALSE</arg>
      <arg>GTFR_DBSTATTDB4.XQL</arg>
      <arg>TFR_DBSTATTDB4.LOG</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB2/400" />
      <option name="ST_range" value="*-640" />
    </options>
    <action>Transfers statistic information from old format</action>
  </phase>
  <phase name="JOB_RSTABXTT" logfile="PSTABXTT.LOG" elgfile="PSTABXTT.ELG" password="AMBAVVVE">
    <!-- pwd: 12335 -->
    <args>
      <arg>RSTABXTT</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSDB.XTT\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>DDXTT TABLSIZE FILLING</arg>
    </args>
    <action>Generates control entries for parallel conversion</action>
  </phase>
  <!-- (cv 700.11) delete DDXTT-entries for clusters in ICNV, due to Levke and custmessage 350588/2008 -->
  <phase name="SQLDB_PHYSCLU_ICNV" logfile="SQLDB_PHYSCLU_ICNV.LOG" password="WJOGCDWP">
    <!-- pwd: 18134 -->
    <args>
      <arg>PHYSCLU_ICNV</arg>
      <arg></arg>
    </args>
    <options>
      <option name="USE_ICNV" />
      <option name="MODE" value="EXPORT" />
      <option name="strategy" value="Downtime-minimized" />
    </options>
    <action>Delete inactive nametab of clusters in ICNV</action>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <!-- (no icnv) cU("JOB_RSSWICNV"), -->
      <!-- (ps 610.102) -->
      <phase name="JOB_RSSWICNV" logfile="PSSWICNV.LOG" elgfile="PSSWICNV.ELG" password="KABYXBZW">
        <!-- pwd: 47366 -->
        <args>
          <arg>RSSWICNV</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSICNSWT\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>ICNV SWITCH PREPARATION</arg>
        </args>
        <options>
          <option name="USE_ICNV" />
          <option name="strategy" value="Downtime-minimized" />
        </options>
        <action>Analyzes and deletes table entries</action>
      </phase>
      <!-- (ps 640-1.43) new phase see H.D. Geyer -->
      <phase name="JOB_RSXMB_DDCNVEXIT" logfile="PSXMBDDCNV.LOG" elgfile="PSXMBDDCNV.ELG" password="WFJPKDCF">
        <!-- pwd: 60928 -->
        <args>
          <arg>RSXMB_MANDT_CLIENT_DDCNVEXIT</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSXMB_DDCNVEXIT\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>DDCNVEXIT PREPARATION</arg>
        </args>
        <options>
          <option name="XI_ADDON_ONLY" />
        </options>
        <action>Creates entries for table DDCNVEXIT</action>
      </phase>
    </phaselist>
  </submodule>
  <!-- (ps 710-1.02) new phase see F.Beunings -->
  <if test="0">
    <phase name="JOB_RSAI_DDCNVEXIT" logfile="PSAIDDCNV.LOG" elgfile="PSAIDDCNV.ELG" password="MVWDHMJL">
      <!-- pwd: 5514 -->
      <args>
        <arg>RSAI_UPGR_CLIENT_DDCNVEXIT</arg>
        <arg></arg>
        <arg>NO-IGNORE</arg>
        <arg>RSAI_DDCNVEXIT\.$(SAPSID)</arg>
        <arg>10</arg>
        <arg>DDCNVEXIT PREPARATION</arg>
      </args>
      <options>
        <option name="ST_range" value="640-*" />
      </options>
      <action>Creates entries for table DDCNVEXIT</action>
    </phase>
  </if>
  <!-- (mh 620/4.12) index pre-creation -->
  <!-- (cv 740) move here after phase RSSWICNV due to CM 4922/2013 -->
  <phase name="JOB_RSINDCHK" logfile="RSINDCHK.LOG" elgfile="RSINDCHK.ELG" password="SEFKNLNI">
    <!-- pwd: 32478 -->
    <args>
      <arg>RSINDCHK</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSINDCHK\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>INDEX PRE-CREATION CHECK</arg>
    </args>
    <options>
      <option name="strategy" value="Downtime-minimized" />
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
    <action>Check, if index pre-creation was succesful</action>
  </phase>

  <phase name="SQLDB_DROP_OLDTABS" logfile="SQL_DROP_OLDTABS.LOG" elgfile="SQL_DROP_OLDTABS.ELG" password="IKETXFFO">
    <!-- pwd: 19932 -->
    <args>
      <arg>CLEAR_OLD_TABS</arg>
      <arg></arg>
    </args>
    <action>Drop some old tables</action>
  </phase>

  <!-- ms + ft (09-09-2014) prevent creation of CDS Views, statements are created in distributer run of
       phase JOB_RSINDCHK undesiredly -->
  <phase name="SQLDB_CDS_PREVENT_CRE" logfile="SQL_CDS_PREVENT_CRE.LOG" elgfile="SQL_CDS_PREVENT_CRE.ELG" password="IKETXFFO">
    <!-- pwd: 19932 -->
    <args>
      <arg>CDS_PREVENT_CREATION</arg>
      <arg></arg>
    </args>
    <action>Prevent creation of CDS Views</action>
    <options>
      <option name="destcomponent" value="SAP_BASIS(740(5-*),741-*)" />
    </options>
  </phase>
 
  <!-- (cv + ms SP8) Physical Clusters for deletion must have modeflag 'Y' instead of 'X', and containing logical clusters modeflag 'X' instead of 'U' -->
  <phase name="SQLSELEXE_UPDCLU" logfile="SQLUPDCLU.LOG" elgfile="SQLUPDCLU.ELG" password="IKETXFFO">
    <!-- pwd: 19932 -->
    <args>
      <arg>SELECT_DDXTT_CLUDEL</arg>
      <arg>UPDATE_DDXTT_CLUDEL</arg>
      <arg></arg>
    </args>
    <action>updates modeflags for cluster tables to be deleted</action>
    <options>
      <option name="ST_range" value="*-740" />
    </options>
  </phase>
  <!-- (mh 620-3.04) (mh 620/4.12) process modeflag W (view deletions) before PCON -->
  <phase name="PARMVNT_DROPVIEW" logfile="MVNTDROPVIEW.LOG" elgfile="MVNTDROPVIEW.ELG" password="YVGUKZWN">
    <!-- pwd: 68913 -->
    <args>
      <arg>TP_MOVENTABS</arg>
      <!-- arg>INTDEL;INTACT;$CONDEVAL($(SGEN_MODE) != none,TOUCH,NOTOUCH);NOBUFFRESET</arg -->
      <arg>INTDEL;INTACT;$CONDEVAL($IS_SGENMODE(none),NOTOUCH,TOUCH);NOBUFFRESET</arg>
      <arg>MF=W</arg>
      <arg>PARCONV.TP0</arg>
    </args>
    <action>Drop views before PARCONV</action>
  </phase>

  <!--  (jo 721) Generalize coding  -->
  <!-- (vd 620.73) SAPDB drop views listed in TATAF to avoid dead lock in next phase -->
  <phase name="SQLSELEXE_PCONDRVIEW_UPG" password="SJICQLMB">    <!-- pwd: 57708 -->
    <args>
      <arg>SEL_DROPVIEWS</arg>
      <arg>DROP_VIEWS</arg>
      <arg></arg>
    </args>
    <options>
      <or>
        <option name="DBTYPE" value="SAPDB" />
        <option name="DBTYPE" value="DB2-z/OS" />
      </or>
    </options>
    <action>Drop views before PARCONV.</action>
  </phase>

  <!--  (hk + cv) Drop shadow conversion tables before PARCONV_UPG (ISU only) -->
  <phase name="SQLSELEXE_DROPCONVPTTAB" logfile="DROPCONVPTTAB.LOG" password="CHOKYROF">
    <!-- pwd: 81640 -->
    <args>
      <arg>CONVPTTAB</arg>
      <arg>DROP_CONVPTTAB</arg>
      <arg>SCRCLASSID;SHDNAME</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
    <action>Drop shadow conversion tables</action>
  </phase>
  <!-- (cv + jo) Must check that modeflags F/A/U/X are gone  -->
  <!-- (cv + ms) Must sync buffers for Java to connect to ABAP -->
  <phase name="PARCONV_UPG_DS" logfile="PARCONV.LOG" buffersync="true" elgfile="PARCONV.ELG" password="SUMNHLPW">
    <!-- pwd: 94221 -->
    <args>
      <arg>$CONDEVAL($(MIGRATE_SECONDDB),RUN_ACT;,)$CONDEVAL($(ZERODOWNTIME_UPG),,RUN_DEL;)RUN_DDL</arg>
      <arg>$CONDEVAL($(MIGRATE_SECONDDB),A,)FU$CONDEVAL($(ZERODOWNTIME_UPG),,X)</arg>
      <arg>PARCONV.TP0</arg>
      <arg>PARCONV.TLG</arg>
    </args>
    <action>Converts application tables and activates their nametab entries</action>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
  </phase>
  <phase name="UPDATE_DBSTATS_DB2_PARCONV_UPG" password="YDDPUZKH">     <!-- pwd: 70121 -->
    <args>
      <arg>FILE</arg>
      <arg>bin</arg>
      <arg>DB2RUNPH.LST</arg>
      <arg>PARCONV_UPG=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
      <option name="DBTYPE" value="DB2-z/OS" />
    </options>
  </phase>
  <phase name="PARCONV_UPG" logfile="PARCONV.LOG" elgfile="PARCONV.ELG" password="SUMNHLPW">
    <!-- pwd: 94221 -->
    <args>
      <arg>$CONDEVAL($(MIGRATE_SECONDDB),RUN_ACT;,)$CONDEVAL($(ZERODOWNTIME_UPG),,RUN_DEL;)RUN_DDL</arg>
      <arg>$CONDEVAL($(MIGRATE_SECONDDB),A,)FU$CONDEVAL($(ZERODOWNTIME_UPG),,X)</arg>
      <arg>PARCONV.TP0</arg>
      <arg>PARCONV.TLG</arg>
    </args>
    <action>Converts application tables and activates their nametab entries</action>
    <options>
      <not><option name="HASREQ" value="J2EE" /></not>
    </options>
  </phase>
  <!-- (jo 700.22) Dump shared memory statistics after PCON -->
  <phase name="SHMD_STAT_PCON" password="EWIWUCUS">
    <!-- pwd: 9911 -->
    <args>
      <arg></arg>
      <arg>SHMD_PCON.LOG</arg>
      <arg>ENQSTAT_PCON.LOG</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/dmpspc" />
    </options>
    <action>Determines shared memory usage</action>
  </phase>

  <!-- (cv+ft) 2014/01 - moved here to get rid off STARTSAP_NLUPG, a bit risky but worth it -->
  <phase name="JOB_DBDIF_UPG" logfile="PADDBDIF.LOG" elgfile="PADDBDIF.ELG" password="SNNTILGL">
    <!-- pwd: 18802 -->
    <args>
      <arg>RADDBDIF</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RADDBDIF\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>DATABASE CLEANUP</arg>
    </args>
    <action>Cleans up table DBDIFF in the database</action>
  </phase>

  <phase name="GETSYNC_SECMIG_FINI" password="CRUUERMR">
    <!-- pwd: 34594 -->
    <args>
      <arg>SECURITYMIG</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- invalidate ABAP loads which have been generated in the meantime -->
  <!-- (jo 630.10) TABIMUPG.TPP contains putstep '4' (stop R/3) without '3' (start R/3).
       Intention was to stop R/3 system. This does not work (tp adds putstep '3'
       automagically), so we have to do it manually. -->
  <phase name="STOPSAP_IUPG_TABIM" password="OCDEFTTC">
    <!-- pwd: 13107 -->
    <args>
      <arg>CENTRAL;STOP_SERVICE</arg>
    </args>
    <action>Stops SAP system</action>
  </phase>
  <phase name="MVNTAB_UPG" logfile="PMVNTUPG.LOG" elgfile="PMVNTUPG.ELG" password="SANGVLTY">
    <!-- pwd: 63887 -->
    <!-- do modeflag A again -->
    <!-- check if PCON and PMVNTAB did a complete job -->
    <!--  (jo 720) Check all modeflags are gone - this is former phase SCRIPT_TST_XTT  -->
    <!--  (hk ZDM) Deletion is done at Postprocessing -->
    <args>
      <arg>PARALLEL;NOBUFRESET;$CONDEVAL($(ZERODOWNTIME_UPG),CHECK_MF,CHECK_MF_ALL)</arg>
      <arg>$CONDEVAL($(ZERODOWNTIME_UPG),VA,XVA)</arg>
      <arg></arg>
      <arg>PMVNTUPG.TP0</arg>
    </args>
    <action>Converts application views and activates remaining nametab entries</action>
  </phase>
  <!-- (jo 720) Substitute old "LOADCRE" phase  -->
  <phase name="SQLSELEXE_TRUNCLOAD" logfile="LOADTRUNC.LOG" password="QIHMZPPY">
    <!-- pwd: 28996 -->
    <args>
      <arg>LOADTABLES</arg>
      <arg>TRUNC_TABLES</arg>
      <arg>SCRCLASSID</arg>
    </args>
    <options>
      <option name="sgen_mode" value="none" />
    </options>
    <action>Truncates ABAP load tables</action>
  </phase>

  <!-- (mh 620.4/10) update PUTTB-WCONTENT for all tables, where trigger fired -->
  <phase name="SQLDB_SHDI_TRIG" logfile="SHADOW_IMPORT_TRIG.LOG" password="EHEMENGZ">
    <!-- pwd: 66195 -->
    <args>
      <arg>SHADOW_IMPORT_TRIG</arg>
      <arg></arg>
    </args>
    <options>
      <not>
        <option name="feature_switch" value="/shadow/import_trig" />
      </not>
    </options>
    <action>Mark all table where trigger fired to be imported again</action>
  </phase>

  <!-- (hk zdm) Recreate Live Clone Views  -->
  <phase name="EU_CLONE_CRE_LCVIEWS" logfile="EUCLONECRLCVIEW.LOG" elgfile="EUCLONECRLCVIEW.ELG" password="SJVPQLMB">
    <!-- pwd: 97353 -->
    <args>
      <arg></arg>
      <arg>SWITCH_LCVIEWS</arg>
      <arg>lcviews</arg>
      <arg>NOCONTREQFIELD;USE_DROPDEST;NODURATIONS</arg>
	</args>
	<options>
       <option name="ZERODOWNTIME_UPG" />
	</options>
  </phase>

  <!-- ae EHPI clean up load tables -->
  <phase name="SQLSELEXE_TRUNCLOAD_TABIM" logfile="LOADTRUNCTBIM.LOG" password="IIIRBFVW">
    <!-- pwd: 92863 -->
    <args>
      <arg>LOADTABLES</arg>
      <arg>TRUNC_TABLES</arg>
      <arg>SCRCLASSID</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="sgen_mode" value="none" />
    </options>
    <action>Cleans load tables</action>
  </phase>

  <phase name="TABIM_UPG" autorepeat="1" elgfile="TABIMUPG.ELG" password="YLAKEZYB">
    <!-- pwd: 80490 -->
    <!-- (vd 620.45) cU("ADOIMUPG.BUF"), -->
    <args>
      <arg>TABIMUPG.BUF</arg>
      <arg>TABIMUPG.TP0</arg>
      <arg>XPRASUPG.BUF</arg>
      <arg>parallelgroups;buffertest=I</arg>
    </args>
    <action>Imports entries into control tables</action>
  </phase>
  <!-- (jo 710) Moved after TABIM_UPG -->
  <!-- Consistency Check -->
  <phase name="SUCCCHK_SVERS" password="MDTYRMXF">
    <!-- pwd: 2995 -->
    <args>
      <arg>CHECK_DESTVERS</arg>
    </args>
    <action>Checks table SVERS to see whether the new SAP release was created successfully</action>
  </phase>

  <!-- (vd 630.15) get list of tables to be updated (list from PREPARE - WCONTENT=Q) -->
  <!--  (jo 720) Rewritten...  -->
  <phase name="FS_ACTION_IMPSUB" logfile="FSACTSUB.LOG" password="WJOGCDWP">
    <!-- pwd: 45107 -->
    <args>
      <arg>TABIMSTAT.DAT</arg>
      <arg>TABIMUPST.DAT</arg>
      <arg>SHADOW_TABLES</arg>
      <arg>INFILELABEL=NAME=</arg>
    </args>
    <action>Get list of tables to update statistics for</action>
  </phase>
  <phase name="UPDATE_DBSTATS_IMP" logfile="UPST_SHDCLONE.LOG" password="YDDPUZKH">
    <!-- pwd: 70121 -->
    <!-- use file with table names not used with FILE option file nameprefix of lines to read reason for update statics call -->
    <args>
      <arg>FILE</arg>
      <arg></arg>
      <arg>TABIMUPST.DAT</arg>
      <arg>NAME=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <action>Update statistics for tables converted with standard dictionary means</action>
  </phase>
  <phase name="UPDATE_DBSTATS_DDCNV" logfile="UPST_SHDCLONE.LOG" password="GRNLQJWF">
    <!-- pwd: 25431 -->
    <!-- use file with table namesnot used with FILE option file nameprefix of lines to read reason for update statics call -->
    <args>
      <arg>FILE</arg>
      <arg></arg>
      <arg>XCNV_TABLES.LST</arg>
      <arg>NAME=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <action>Update statistics for tables converted with standard dictionary means</action>
  </phase>

  <phase name="STARTSAP_TBUPG" password="QVHZMPCL">
    <!-- pwd: 56325 -->
    <args>
      <arg>CENTRAL;START_SERVICE;STOP_BEFORE_START</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts SAP system</action>
  </phase>

  <!-- (ps 710-7.43) Use generated script instead of fixed one, (ak 07/2014) moved to here -->
  <phase name="SETUPGPAR_SNOTEIN" logfile="SETUPGPAR.LOG" password="QOIFNPTA">
    <!-- pwd: 33718 -->
    <args>
      <arg>SET</arg>
      <arg>SNOTE_UPG_ENABLED=X</arg>
    </args>
    <action>Sets parameters in UPGPARAM</action>
  </phase>

  <phase name="RUN_RTO_CHECK_CRE_LCVIEWS" logfile="auto" elgfile="auto" password="IIIRBFVW">
    <!-- pwd: 92863 -->
	<args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>CHECK_LC_VIEWS</arg>
      <arg></arg>
      <arg>CHECK_CRE_LCVIEWS\.$(SAPSID)</arg>
      <arg>1</arg>
      <arg>Checks recreated LC views</arg>
    </args>

    <options>
      <option name="ZERODOWNTIME_UPG" />
	  <option name="feature_switch" value="/fa/stress_maker" />
    </options>
       <action>Checks recreated LC views of RTO cl_upg_rto_view_on_lc_table</action>
  </phase>

  <!-- (cv+ft) 2014/01 - moved here to get rid off STARTSAP_NLUPG -->
  <!-- FIXME: This needs a patch from Kerstin  -->
  <if test="0">
    <!--  (jo) Depooling in parallel  -->
    <phase name="PARRUN_RUTPOADAPT" logfile="RUTPOADAPT_PHASE.LOG"
       elgfile="RUTPOADAPT.ELG" password="SJVPQLMB"> <!-- pwd: 97353 -->
      <args>
        <arg>NTRANGE@LIST:all</arg>
        <arg>RUTPOADAPT</arg>
        <arg>SAP_PPOOL</arg>
        <arg></arg>
        <arg>RUTPOADAPT.$(SAPSID)</arg>
        <arg>Converts pools to transparent tables</arg>
      </args>
      <options>
        <option name="MIGRATE_SECONDDB" />
        <option name="realdestvers" value="740-*" />
      </options>
      <action>Does depooling</action>
    </phase>
  </if>

  <phase name="RUN_RUTPOADAPT" logfile="RUTPOADAPT_PHASE.LOG" elgfile="RUTPOADAPT.ELG" password="SJVPQLMB"> <!-- pwd: 97353 -->
    <args>
      <arg>RUTPOADAPT</arg>
      <arg>SAP_POOL</arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTPOADAPT\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Converts pools to transparent tables</arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="realdestvers" value="740-*" />
    </options>
    <action>Does depooling</action>
  </phase>

  <phase name="RUN_RUTDDLSCREATE" logfile="RUTDDLSCREATE_PHASE.LOG" elgfile="RUTDDLSCREATE.ELG" password="SJVPQLMB"> <!-- pwd: 97353 -->
    <args>
      <arg>RUTDDLSCREATE</arg>
      <arg>SAP_CDSCRE</arg>
      <arg>NO-IGNORE</arg>
      <arg>$CONDEVAL($SAPRELCMP($(SAPDERL),$COMPDESTPLV(SAP_BASIS),740,5) ge 0,RUTDDLSCREATE\.$(SAPSID),)</arg>
      <arg>5</arg>
      <arg>Creates CDS Views</arg>
    </args>
    <options>
      <option name="destcomponent" value="SAP_BASIS(740(2-*),741-*)" />
    </options>
    <action>Creates CDS Views</action>
  </phase>

  <!-- (jo 700/2) Be paranoid and run this -->
  <phase name="JOB_RSUPGCUA_TBUPG" logfile="PSUPGCUA.LOG" elgfile="PSUPGCUA.ELG" password="WMVWJDLQ">
    <!-- pwd: 37086 -->
    <args>
      <arg>RSUPGCUAGEN111</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGCUAGEN111\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>CUA GEN</arg>
    </args>
    <options>
      <option name="ST_range" value="*-700" />
    </options>
    <action>Performs specific actions</action>
  </phase>

  <!-- (jo 720) 2813953 2011, taken from old changelist 1113726
       (lb 710.1) Early removal of NT objects without DD reference to avoid
       ambiguous references to typegroups. Otherwise reports run
       in this section of the upgrade (TABIM_POST, XPRA etc) can
       abort with syntax errors, only needed for upgrades without 2nd shd sys
    -->
  <phase name="JOB_RDDNTPUR_NT" logfile="PDDNTPURNT.LOG" elgfile="PDDNTPURNT.ELG" password="CZZKVGRZ">
    <!-- pwd: 6418 -->
    <args>
      <arg>RDDNTPUR_XPRA_PRE</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RDDNTPUR_NT\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>EARLY NAMETAB CLEANUP</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="realdestvers" value="702,730" />
    </options>
    <action>Early cleanup of nametabs</action>
  </phase>
  <!-- (hk 731) IM 966189 2010 - move phase between TABIM_UPG and TABIM_POST as suggested by hjl -->
  <phase name="JOB_RSI18N_UPGUCLANG" logfile="UPGUCLANG.LOG" elgfile="UPGUCLANG.ELG" password="IAYJRFHC">
    <!-- pwd: 17253 -->
    <args>
      <arg>RSI18N_UPGUCLANG</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSI18N_UPGUCLANG\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>UNICODE LANG</arg>
    </args>
    <options>
      <option name="ST_range" value="620-*" />
      <option name="realdestvers" value="731-*" />
      <option name="UNICODE_only" />
    </options>
    <action>Updates unicode languages</action>
  </phase>

  <!-- (mh 620.85) Import of additional requests, that could not be imported in PREPARE, because the
       transport tables are too small at startrelease (mh620/4-18) moved after TABIM_UPG but only main
       import Buffer TABUPOST contains object lists, where shadow import is not wanted -> impact on RSCPFROM
    -->
  <phase name="TABIM_POST_UPG" elgfile="TABUPOST.ELG" password="YOHALZNC">
    <!-- pwd: 57484 -->
    <args>
      <arg>TABUPOST.BUF</arg>
      <arg>TABUPOST.TP0</arg>
      <arg></arg>
      <arg>buffertest=I</arg>
    </args>
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Import of additional transport requests</action>
  </phase>
  <phase name="TABIM_POST_CLONE" elgfile="TABUPOST.ELG" password="YHIGMZER">
    <!-- pwd: 70598 -->
    <args>
      <arg></arg>
      <arg>TABUPOST.TP0</arg>
      <arg></arg>
      <arg>dummybuffer;buffertest=I</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Import of additional transport requests</action>
  </phase>

  <!-- switch framework (tableset dependent) -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="CUST_HAS_SFW_OBJ" />
      <option name="CUST_SFW_TABSET" value="1" />
    </options>
    <phaselist>
      <phase name="RUN_RSSFWPRINT1_OLD" logfile="RSSFWPRINT.LOG" elgfile="RSSFWPRINT.ELG" password="MBCOOXWZ">
        <!-- pwd: 73324 -->
        <args>
          <arg>RSSFWPRINT</arg>
          <arg>SFWPRINTOLD</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSSFWPRINT\.$(SAPSID)</arg>
          <arg>2</arg>
          <arg>Print content of old SFW tables to logfile</arg>
        </args>
        <action>Print content of old SFW tables to logfile</action>
      </phase>
      <!--<phase name="SQLDB_SFW_COPY_OLD" logfile="SFW_COPY.LOG" password="MEJEVXLA">-->
      <!-- pwd: 68057 -->
      <!--<args>
      <arg>SFW_COPY_OLD</arg>
      <arg></arg>
      </args>
      <action>Copy content of old SFW tables to backup tables</action>
    </phase>-->
      <phase name="RESCSFWOLD" logfile="RESC_SFW.LOG" password="MEJEVXLA">
        <!-- pwd: 68057 -->
        <action>Copy content of old SFW tables to backup tables</action>
      </phase>
    </phaselist>
  </submodule>

  <submodule password="KRGCCBGT">
    <options>
      <option name="CUST_HAS_SFW_OBJ" />
      <option name="CUST_SFW_TABSET" value="2" />
    </options>
    <phaselist>
      <phase name="RUN_RSSFWPRINT1_NEW" logfile="RSSFWPRINT.LOG" elgfile="RSSFWPRINT.ELG" password="YAWZNZVG">
        <!-- pwd: 96861 -->
        <args>
          <arg>RSSFWPRINT</arg>
          <arg>SFWPRINTNEW</arg>
          <arg>NO-IGNORE</arg>
          <arg>RSSFWPRINT\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Print content of new SFW tables to logfile</arg>
        </args>
        <action>Print content of new SFW tables to logfile</action>
      </phase>
      <!--<phase name="SQLDB_SFW_COPY_NEW" logfile="SFW_COPY.LOG" password="WHFRGDMX">-->
      <!-- pwd: 23394 -->
      <!--<args>
          <arg>SFW_COPY_NEW</arg>
          <arg></arg>
        </args>
        <action>Copy content of new SFW tables to backup tables</action>
      </phase>-->
      <phase name="RESCSFWNEW" logfile="RESC_SFW.LOG" password="MEJEVXLA">
        <!-- pwd: 68057 -->
        <action>Copy content of new SFW tables to backup tables</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (jo 700.08) Have some more details after TABIM phases -->
  <phase name="DMPSPC_TAB" logfile="DMPSPC_TAB.LOG" password="GYZSPJFQ">
    <!-- pwd: 19004 -->
    <args>
      <arg></arg>
      <arg>DMPSPC_TAB.FRE</arg>
      <arg>DMPSPC_TAB.ALL</arg>
      <arg>table space sizes after TABIM</arg>
    </args>
    <action>Provides information on free space in the database</action>
  </phase>
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <phase name="JOB_RSWBOUP2" logfile="PSWBOUP2.LOG" elgfile="PSWBOUP2.ELG" password="OKVHWIYK">
        <!-- pwd: 9968 -->
        <args>
          <arg>RSWBOUP2</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSWBOUP2\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>CTS MIGRATION PART 2</arg>
        </args>
        <action>Initializes and adjusts tables for the Workbench Organizer</action>
      </phase>
      <!-- no ADO on 610 any longer cU("ADOIM_UPG"), -->
      <!-- (af 620/241103) check of DDIC Enhancement category in current system -->
      <phase name="RUN_RSUPGDEC_UPG" logfile="RSUPGDEC.LOG" elgfile="RSUPGDEC.ELG" password="UOOJZHDO">
        <!-- pwd: 48000 -->
        <args>
          <arg>RSUPGDEC</arg>
          <arg>SAP_CURR</arg>
          <arg>IGNORE</arg>
          <arg>RSUPGDEC\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>Check of DDIC Enhancement Category</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
        </options>
        <action>Checks if current structure extensions collide with the DDIC enhancement category of the target release</action>
        <usage>Adjust include or consider help from SAPsee &lt;b&gt;SAP Note 493387&lt;/b&gt;</usage>
      </phase>
      <!-- (mh 620-3.04) start background watchdog -->
      <phase name="JOB_BATCHCHECK_XPRA" logfile="RSUPGBWD.LOG" elgfile="RSUPGBWD.ELG" password="YGXSBZZI">
        <!-- pwd: 92511 -->
        <args>
          <arg>RSUPGBWD</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSUPGBWD\.$(SAPSID)</arg>
          <arg>3</arg>
          <arg>Batch execution checker</arg>
        </args>
        <action>Starts the batchjob execution checker</action>
      </phase>
    </phaselist>
  </submodule>

  <!--  (jo 720) Use new phase type  -->
  <phase name="SQLSELEXE_LOCKFLAGSETXPRA" logfile="LOCKFLAGSET_XPRA.LOG" password="IBWKCFML">
    <!-- pwd: 58871 -->
    <args>
      <arg>CCI,CCP</arg>
      <arg>LOCKFLAGSET_XPRA</arg>
      <arg>DIFFEXPNAMES</arg>
    </args>
    <action>Switch on flag for XPRA execution</action>
  </phase>
  <phase name="LIST_LOAD_CP" logfile="LISTLOADCP.LOG" password="EXLPYNIN">
    <!-- pwd: 83154 -->
    <args>
      <arg>COPY</arg>
      <arg>REGEN.LST</arg>
      <arg></arg>
    </args>
    <action>Copies list of programs to work directory</action>
  </phase>
  <if test="0">
    <!-- (hk 720) -->
    <phase name="NANOTES_PREP" logfile="NANOTESPREP.LOG" password="AZBNIVIR">
      <!-- pwd: 58707 -->
      <args>
        <arg>PREP</arg>
        <arg>NANOTES.LST</arg>
        <arg></arg>
      </args>
      <options>
        <option name="proddestvers" value="720-*" />
      </options>
      <action>Implement notes via call of Note Assistant</action>
    </phase>
    <!-- (hk 720) -->
    <phase name="NANOTES_SHD" logfile="NANOTESSHD.LOG" password="ADGEAVCB">
      <!-- pwd: 64513 -->
      <args>
        <arg>SHD,SKIP_SHD_LOCK</arg>
        <arg>NANOTES.LST</arg>
        <arg>NANOTES.DMP</arg>
      </args>
      <options>
        <option name="proddestvers" value="720-*" />
      </options>
      <action>Implement notes via call of Note Assistant</action>
    </phase>
  </if>
  <!-- (hk 720) -->
  <phase name="NANOTES_DOWN" logfile="NANOTESDOWN.LOG" password="KJWUSBSZ">
    <!-- pwd: 76017 -->
    <args>
      <arg>DOWN</arg>
      <arg>NANOTES.DMP</arg>
      <arg></arg>
    </args>
    <options>
      <option name="proddestvers" value="720-*" />
    </options>
    <action>Implement notes via call of Note Assistant</action>
  </phase>
  <!-- ************************************ -->
  <!-- (jo 720) The same for ByDesign -->
  <!-- (af 700) 2006/08/30 -->
  <phase name="JOB_RSUPGAIMEXE" logfile="RSUPGAIMEXE.LOG" elgfile="RSUPGAIMEXE.ELG" password="GXBREJAH">
    <!-- pwd: 39197 -->
    <args>
      <arg>RSUPGAIMEXE</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSUPGAIMEXE\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Execute AIMs in advance</arg>
    </args>
    <action>Executes AIMs in advance in order to avoid errors in XPRA phase</action>
  </phase>


  <!-- ******************************************************************** -->
  <phase name="HDB_ABAP_POST_LOAD_EXEC" logfile="ABAPPLOADEXEC.LOG" password="EASFFNXO" connect="seconddb">
    <!-- pwd: 78049 -->
    <args>
      <arg>HDBSLLIB_ABAPPLOADEXE.LOG</arg>
    </args>
    <options>
      <option name="DBTYPE_2ND" value="HDB" />
    </options>
    <action>ABAP Post Load Execution</action>
  </phase>

  <!-- (ag SP10) hana content activation and schema mapping -->
  <phase name="HDB_SCHEMAMAPPING" logfile="HDBSCHEMAMAPPING.LOG" password="EASFFNXO" connect="seconddb">
    <!-- pwd: 78049 -->
    <args>
      <arg>HDBSLLIB_SCHEMAMAP.LOG</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE_2ND" value="HDB" />
    </options>
    <action>Hana Schema Mapping</action>
  </phase>

  <!-- (ag SP10) hana content activation and schema mapping -->
  <phase name="HDB_ADD_PRIVS2SYSREPO" logfile="HDBADDPRIVS2SYSREPO.LOG" password="EASFFNXO" connect="seconddb">
    <!-- pwd: 78049 -->
    <args>
      <arg>HDBSLLIB_ADDPRIVS2S.LOG</arg>
    </args>
    <options>
      <option name="DBTYPE_2ND" value="HDB" />
    </options>
    <action>Hana Schema Mapping</action>
  </phase>

  <if test="0">
    <!-- (ag/ak SP10) hana content activation -->
    <phase name="JOB_RUTACTDBPROCPROXY_PRE" logfile="ACTPROXPRE.LOG" elgfile="ACTPROXPRE.ELG" password="YGXSBZZI">
      <!-- pwd: 92511 -->
      <args>
        <arg>RUTACTDBPROCPROXY</arg>
        <arg></arg>
        <arg>IGNORE</arg>
        <arg>RUTACTDBPROCPROXY\.$(SAPSID)</arg>
        <arg>3</arg>
        <arg>Hana Proxy Activation</arg>
      </args>
      <options>
        <option name="DBTYPE_2ND" value="HDB" />
        <or>
          <option name="destcomponent" value="SAP_BASIS(740(2-*))" />
          <option name="realdestvers" value="741-799" />
        </or>
      </options>
      <action>Activates Hana Content</action>
    </phase>
  </if>

  <!-- (ag/ak SP10) hana content activation -->
  <phase name="JOB_RS_DMO_HDB_CONTENT_ACTIVATE" logfile="HDBCONTACT.LOG" elgfile="HDBCONTACT.ELG" password="YGXSBZZI">
    <!-- pwd: 92511 -->
    <args>
      <arg>RS_DMO_HDB_CONTENT_ACTIVATE</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>DMOHDBCNTACT\.$(SAPSID)</arg>
      <arg>3</arg>
      <arg>Hana Content Activation</arg>
    </args>
    <options>
      <option name="DBTYPE_2ND" value="HDB" />
    </options>
    <action>Activates Hana Content</action>
  </phase>

  <!-- ************************************************************************ -->
  <!-- (jo 720) Also use new AIM merge in downtime if there was no second shadow!  -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="AIM_MERGE" />
      <not>
        <option name="SECOND_SHD" />
      </not>
    </options>
    <phaselist>
      <phase name="CONVBUFFER_AIMMRG_B2L" logfile="CNVBFAIMB2L.LOG" password="AGNUHVRC">
        <!-- pwd: 67508 -->
        <args>
          <arg>BUFFER2LIST</arg>
          <arg>STEPS;SYNCMARKS</arg>
          <arg>TABIMUPG.BUF</arg>
          <arg>XPRASUPG.LST</arg>
        </args>
        <action></action>
      </phase>
      <phase name="RUN_RSAIMMERGE_UPG" logfile="RSAIMMRGSHD.LOG" elgfile="RSAIMMRGSHD.ELG" password="CMRCBRNY">
        <!-- pwd: 65164 -->
        <args>
          <arg>RSAIMMERGE_UPG_SHD</arg>
          <arg>SAP_AIM_MRGSHD</arg>
          <arg>NO-IGNORE</arg>
          <arg>MRUPGAIM\.$(SAPSID)</arg>
          <arg>20</arg>
          <arg></arg>
        </args>
      </phase>
      <phase name="CONVBUFFER_AIMMRG_L2B" logfile="CNVBFAIML2B.LOG" password="FEVSGIGD">
        <!-- pwd: 656 -->
        <args>
          <arg>LIST2BUFFER</arg>
          <arg>CREATECOFILE</arg>
          <arg>XPRASUPGMOD.LST</arg>
          <arg>XPRASUPGMOD.BUF</arg>
        </args>
        <action></action>
      </phase>

      <!-- (jo 720) Moved after RUN_RSAIMMERGE_UPG! -->
      <!-- (sm 720) Run UPDATE_DBSTATS_AIMMERGE_SHD in 2nd Shadow instead of UPDATE_DBSTATS_AIMMERGE -->
      <phase name="UPDATE_DBSTATS_AIMMERGE_SHD2" logfile="UPST_SHDCLONE.LOG" password="OBSQUTOT">
        <!-- pwd: 37629 -->
        <!-- use direct list of tables  -->
        <args>
          <arg>LIST</arg>
          <arg>AIMTRKORR_SHD</arg>
          <arg></arg>
          <arg></arg>
          <arg>ONLINE_AFTER_IMPORT</arg>
        </args>
        <action>Update statistics for table AIMTRKORR</action>
      </phase>
    </phaselist>
  </submodule>
  <!-- ************************************************************************ -->
  <phase name="MSS_DELETEPERFDATA_UPG" logfile="MSS_DELETEPERFDATA_UPG.LOG" password="QTYKQPST">
    <!-- pwd: 28294 -->
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>drop performance data tables</action>
  </phase>
  <!-- ************************************************************************ -->
  <phase name="RUN_RTO_WRITE_ALL" logfile="auto" connect="bridge" elgfile="auto" password="IIIRBFVW">
    <!-- pwd: 92863 -->
	<args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>CHECK_WRITE_ALL</arg>
      <arg></arg>
      <arg>CHECK_WRITE_ALL\.$(SAPSID)</arg>
      <arg>1</arg>
      <arg>Checks if everything is writable</arg>
    </args>
    <options>
      <option name="ZERODOWNTIME_UPG" />
      <option name="feature_switch" value="/fa/stress_maker" />
    </options>
       <action>Checks if everything is writable</action>
  </phase>
  <phase name="RUN_RTO_CALLER_RUN_BEFORE_AIM" logfile="RTO_CALLER.LOG" elgfile="RTO_CALLER.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_RTO_CALLER</arg> 
      <arg>SAP_RTO_RUNBEFOREAIM</arg>
      <arg></arg>
      <arg>RTO_CAL_RUNBEFOREAIM\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Calling all AIM RTOs methods to run applications before AIM execution</arg>
    </args>
    <action>Calling all AIM RTOs methods to run applications before AIM execution</action>
    <options>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ZERODOWNTIME_UPG" />
    </options>
  </phase>   <phase name="RUN_ZDM_AIM_TRACE_START" logfile="ZDM_AIM_TRACE.LOG" elgfile="ZDM_AIM_TRACE.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->
    <args>
      <arg>RSZDM_CHECK_ILLACCESS_ST05</arg>
      <arg>SAP_TRACE_START</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZDM_AIM_TRACE_START\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Start ST05 Trace for ZDM AIM execution</arg>
    </args>
    <options>
	  <option name="ZERODOWNTIME_UPG" />
      <not><option name="feature_switch" value="/zdm/aimtrace" /></not>
      <or>
          <option name="destcomponent" value="SAP_BASIS(740(9-*))" />
          <option name="destcomponent" value="SAP_BASIS(741-*)" />
      </or>
    </options>
    <action>Start ST05 Trace for ZDM AIM execution</action>
  </phase>

  <phase name="XPRAS_AIMMRG" autorepeat="1" elgfile="XPRASUPG.ELG" password="CRHHERMR" checkuvers="true">
    <!-- pwd: 56581 -->
    <args>
      <arg>XPRASUPGMOD.BUF</arg>
      <arg>XPRASUPG.TP0</arg>
      <arg>AFTXPRAS.BUF</arg>
      <arg></arg>
    </args>
    <options>
      <option name="AIM_MERGE" />
    </options>
    <action>&lt;p&gt;Executes XPRAs&lt;/p&gt;&lt;p&gt;If errors occur, repeats phase automatically&lt;/p&gt;</action>
  </phase>

  <phase name="RUN_ZDM_AIM_TRACE_STOP" logfile="ZDM_AIM_TRACE.LOG" elgfile="ZDM_AIM_TRACE.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->
    <args>
      <arg>RSZDM_CHECK_ILLACCESS_ST05</arg>
      <arg>SAP_TRACE_STOP</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZDM_AIM_TRACE_STOP\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Stop ST05 Trace for ZDM AIM execution</arg>
    </args>
    <options>
	  <option name="ZERODOWNTIME_UPG" />
	  <not><option name="feature_switch" value="/zdm/aimtrace" /></not>
      <or>
          <option name="destcomponent" value="SAP_BASIS(740(9-*))" />
          <option name="destcomponent" value="SAP_BASIS(741-*)" />
      </or>
    </options>
    <action>Stop ST05 Trace for ZDM AIM execution</action>
  </phase>

   <phase name="RUN_ZDM_AIM_TRACE_CHECK" logfile="ZDM_AIM_TRACE.LOG" elgfile="ZDM_AIM_TRACE.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->
    <args>
      <arg>RSZDM_CHECK_ILLACCESS_ST05</arg>
      <arg>SAP_TRACE_CHECK</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZDM_AIM_TRACE_CHECK\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Evaluate ST05 Trace for ZDM AIM execution</arg>
    </args>
    <options>
	  <option name="ZERODOWNTIME_UPG" />
	  <not><option name="feature_switch" value="/fa/zdm_aim_check_internal" /></not>
	  <not><option name="feature_switch" value="/zdm/aimtrace" /></not>
      <or>
          <option name="destcomponent" value="SAP_BASIS(740(9-*))" />
          <option name="destcomponent" value="SAP_BASIS(741-*)" />
      </or>
    </options>
    <action>Evaluate ST05 Trace for ZDM AIM execution</action>
  </phase>

  <phase name="RUN_ZDM_AIM_TRACE_CHECK_INT" logfile="ZDM_AIM_TRACE.LOG" elgfile="ZDM_AIM_TRACE.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->
    <args>
      <arg>RSZDM_CHECK_ILLACCESS_ST05</arg>
      <arg>SAP_TRACE_CHECK_INTERNAL</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZDM_AIM_TRACE_CHECK\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Evaluate ST05 Trace for ZDM AIM execution</arg>
    </args>
    <options>
	  <option name="ZERODOWNTIME_UPG" />
	  <option name="feature_switch" value="/fa/zdm_aim_check_internal" />
	  <not><option name="feature_switch" value="/zdm/aimtrace" /></not>
	  <or>
	    <option name="startcomponent" value="SAP_BASIS(740(9-*))" />
	    <option name="ST_range" value="741-799" />
      </or>
    </options>
    <action>Evaluate ST05 Trace for ZDM AIM execution</action>
  </phase>

    <phase name="RUN_ZDM_AIM_TRACE_CHECK_SEQ" logfile="ZDM_AIM_TRACE.LOG" elgfile="ZDM_AIM_TRACE.ELG" password="IBWKCFML">
       <!-- pwd: 58871 -->
    <args>
      <arg>RSZDM_CHECK_ILLACCESS_ST05</arg>
      <arg>SAP_TRACE_CHECK_SEQ</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZDM_AIM_TRACE_CHECK_SEQ\.$(SAPSID)</arg>
      <arg>2</arg>
      <arg>Evaluate sequential ST05 Trace</arg>
    </args>
    <options>
	  <option name="ZERODOWNTIME_UPG" />
	  <option name="feature_switch" value="/zdm/aimtrace" />
    </options>
    <action>Evaluate sequential ST05 Trace</action>
    </phase>
	
  <phase name="RUN_RTO_CALLER_CHECK_AFTER_AIM" connect="shadow" logfile="RTO_CALLER.LOG" elgfile="RTO_CALLER.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_RTO_CALLER</arg> 
      <arg>SAP_RTO_CHECKAFTERAIM</arg>
      <arg></arg>
      <arg>RTO_CAL_CHECKAFTERAIM\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Calling all AIM RTOs methods to check objects after AIM execution</arg>
    </args>
    <action>Calling all AIM RTOs methods to check objects after AIM execution</action>
    <options>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ZERODOWNTIME_UPG" />
    </options>
  </phase>  

  <phase name="RUN_RTO_CALLER_RUN_AFTER_AIM" logfile="RTO_CALLER.LOG" elgfile="RTO_CALLER.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RSUPG_RTO_CALLER</arg> 
      <arg>SAP_RTO_RUNAFTERAIM</arg>
      <arg></arg>
      <arg>RTO_CAL_RUNAFTERAIM\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Calling all AIM RTOs methods to run applications after AIM execution</arg>
    </args>
    <action>Calling all AIM RTOs methods to run applications after AIM execution</action>
    <options>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ZERODOWNTIME_UPG" />
    </options>
  </phase>  
  <!-- ************************************************************************ -->
  <submodule password="KRGCCBGT">
    <options>
      <not><option name="AIM_MERGE" /></not>
    </options>
    <phaselist>
      <!-- command file import for all addon's and support packages -->
      <phase name="TR_SETSYNC" logfile="SETSYNC.LOG" elgfile="SETSYNC.ELG" password="IQSZLFJQ">
        <!-- pwd: 66000 -->
        <!-- (jo 710) For IM 957477 2009: This one has "nbufform = 1" always -->
        <args>
          <arg>PREPARE_CMDIMPORT</arg>
          <arg>TP_IMPORT</arg>
          <arg>EXDBNEW.TP0</arg>
          <arg>XPRASUPG.BUF</arg>
        </args>
        <action>Sets required syncmarks</action>
      </phase>

      <phase name="UPDATE_DBSTATS_DB2_XPRAS_UPG" password="YDDPUZKH">     <!-- pwd: 70121 -->
        <args>
          <arg>FILE</arg>
          <arg>bin</arg>
          <arg>DB2RUNPH.LST</arg>
          <arg>XPRAS_UPG=</arg>
          <arg>ONLINE_AFTER_IMPORT</arg>
        </args>
        <options>
          <option name="DBTYPE" value="DB2-z/OS" />
        </options>
      </phase>

      <phase name="XPRAS_UPG" autorepeat="1" elgfile="XPRASUPG.ELG" password="YOHALZNC" checkuvers="true">
        <!-- pwd: 84619 -->
        <args>
          <arg>XPRASUPG.BUF</arg>
          <arg>XPRASUPG.TP0</arg>
          <arg>AFTXPRAS.BUF</arg>
          <arg></arg>
        </args>
        <action>&lt;p&gt;Executes XPRAs&lt;/p&gt;&lt;p&gt;If errors occur, repeats phase automatically&lt;/p&gt;</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (ag/ak SP10) hana content activation -->
  <phase name="JOB_RUTACTDBPROCPROXY_POST" logfile="ACTPROXPOST.LOG" elgfile="ACTPROXPOST.ELG" password="YGXSBZZI">
    <!-- pwd: 92511 -->
    <args>
      <arg>RUTACTDBPROCPROXY</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RUTACTDBPROCPROXY\.$(SAPSID)</arg>
      <arg>3</arg>
      <arg>Hana Proxy Activation</arg>
    </args>
    <options>
      <option name="DBTYPE_2ND" value="HDB" />
      <or>
        <option name="destcomponent" value="SAP_BASIS(740(2-*))" />
        <option name="realdestvers" value="741-799" />
      </or>
    </options>
    <action>Activates Hana Content</action>
  </phase>

  <!-- ************************************************************************ -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="HASTRTYPE" value="TR_CUSTOMER" />
    </options>
    <phaselist>
      <phase name="TABIM_UPG_CUST" autorepeat="1" elgfile="TABIMUPG.ELG" password="EPOUONUT">
        <!-- pwd: 10019 -->
        <args>
          <arg>TABIMUPG_CUST.BUF</arg>
          <arg>TABIMUPG_CUST.TP0</arg>
          <arg>XPRASUPG_CUST.BUF</arg>
          <arg>buffertest=I;custclient;parallelgroups;checkaccimport</arg>
        </args>
        <action>Imports entries into control tables</action>
      </phase>

      <!-- (sm 720) AIMMERGER for customer transports -->
      <phase name="XPRAS_AIMMRG_CUST" autorepeat="1" elgfile="XPRASUPG.ELG"
         password="SLEEMLWT" checkuvers="true">
        <!-- pwd: 72419 -->
        <args>
          <arg>XPRASCUSTMOD.BUF</arg>
          <arg>XPRASUPG.TP0</arg>
          <arg>AFTXPRASCUST.BUF</arg>
          <arg>parallelgroups;checkaccimport</arg>
        </args>
        <options>
          <option name="AIM_MERGE" />
          <option name="feature_switch" value="/cust/aim_merge" />
        </options>
        <action>&lt;p&gt;Executes XPRAs from customer transports&lt;/p&gt;&lt;p&gt;If errors occur, repeats phase automatically&lt;/p&gt;</action>
      </phase>

      <!-- SQL commands for switch framework -->
      <submodule password="KRGCCBGT">
        <options>
          <option name="CUST_HAS_SFW_OBJ" />
          <option name="feature_switch" value="/sfw/old_tableset" />
        </options>
        <phaselist>
          <phase name="RUN_RSSFWPRINT2_OLD" logfile="RSSFWPRINT.LOG" elgfile="RSSFWPRINT.ELG" password="QXDBIPMD">
            <!-- pwd: 18224 -->
            <args>
              <arg>RSSFWPRINT</arg>
              <arg>SFWPRINTOLD</arg>
              <arg>NO-IGNORE</arg>
              <arg>RSSFWPRINT\.$(SAPSID)</arg>
              <arg>5</arg>
              <arg></arg>
            </args>
            <action>Prints content of old SFW tables to logfile</action>
          </phase>

          <phase name="SQLDB_SFW_RESTORE_OLD" logfile="SFW_RESTORE.LOG" password="ORMGOTQH">
            <!-- pwd: 85323 -->
            <args>
              <arg>SFW_RESTORE_OLD</arg>
              <arg></arg>
            </args>
            <action>Restores content of old SFW tables from backup tables</action>
          </phase>
        </phaselist>
      </submodule>

      <submodule password="KRGCCBGT">
        <options>
          <option name="CUST_HAS_SFW_OBJ" />
          <not>
            <option name="feature_switch" value="/sfw/old_tableset" />
          </not>
        </options>
        <phaselist>
          <phase name="RUN_RSSFWPRINT2_NEW" logfile="RSSFWPRINT.LOG" elgfile="RSSFWPRINT.ELG" password="OKNMPTHW">
            <!-- pwd: 80455 -->
            <args>
              <arg>RSSFWPRINT</arg>
              <arg>SFWPRINTNEW</arg>
              <arg>NO-IGNORE</arg>
              <arg>RSSFWPRINT\.$(SAPSID)</arg>
              <arg>5</arg>
              <arg>Print content of new SFW tables to logfile</arg>
            </args>
            <action>Print content of new SFW tables to logfile</action>
          </phase>

          <phase name="SQLDB_SFW_RESTORE_NEW" logfile="SFW_RESTORE.LOG" password="GLMSCJSD">
            <!-- pwd: 75708 -->
            <args>
              <arg>SFW_RESTORE_NEW</arg>
              <arg></arg>
            </args>
            <action>Restore content of new SFW tables from backup tables</action>
          </phase>
        </phaselist>
      </submodule>

      <phase name="XPRAS_UPG_CUST" autorepeat="1" elgfile="XPRASUPG.ELG" password="QDRHWPQF" checkuvers="true">
       <!-- pwd: 53779 -->
       <args>
         <arg>XPRASUPG_CUST.BUF</arg>
         <arg>XPRASUPG_CUST.TP0</arg>
         <arg>AFTXPRAS_CUST.BUF</arg>
         <arg>custclient;parallelgroups;checkaccimport</arg>
       </args>
       <options>
         <not>
           <and>
             <option name="AIM_MERGE" />
             <option name="feature_switch" value="/cust/aim_merge" />
           </and>
         </not>
       </options>
     </phase>
    </phaselist>
  </submodule>

  <phase name="RUN_UPG_RTO_COLLISION_HANDLING_PRD" logfile="auto" elgfile="auto" connect="bridge" password="YDDPUZKH">
       <!-- pwd: 70121 -->
    <args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>SAP_RTO_CH_PRD</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPG_RTO_COLL_HAND_PRD\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Simulates productive run for collision handling test</arg>
    </args>
    <options>
      <option name="ZERODOWNTIME_UPG" />
      <option name="feature_switch" value="/fa/stress_maker" />
      <option name="feature_switch" value="/fa/collision_handling_test" />
    </options>
    <action>Simulates productive run for collision handling test</action>
  </phase>

  <phase name="RUN_UPG_RTO_COLLISION_HANDLING_FIN_ISU" logfile="auto" elgfile="auto" password="YDDPUZKH">
       <!-- pwd: 70121 -->
    <args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>SAP_RTO_CH_FIN</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPG_RTO_COLL_HAND_FIN\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Verifies final entries of collision handling test</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="feature_switch" value="/fa/stress_maker" />
      <option name="feature_switch" value="/fa/collision_handling_test" />
      <option name="ST_range" value="700-*" />
    </options>
    <action>Verifies final entries of collision handling test</action>
  </phase>

  <!-- ******************************************************************** -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="ZERODOWNTIME_UPG" />
      <option name="feature_switch" value="DDICGENAIM" />
    </options>
    <phaselist>
    <!-- requested by Lars Biewald -->
    <phase name="RUN_RTO_DDIC_AIM_MODIFY" logfile="RTO_DDIC_AIM_MODIFY.LOG" elgfile="RTO_DDIC_AIM_MODIFY.ELG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>RSUPG_RUN_TASK_ONCE</arg>
      <arg>DDIC_AIM_MODIFY</arg>
      <arg></arg>
      <arg>RTO_DDIC_AIM_MODIFY\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Create inactive nametabs to test DDIC generating AIMs</arg>
    </args>
      <action>Create inactive nametabs to test DDIC generating AIMs</action>
	  <options>
	    <option name="feature_switch" value="/fa/stress_maker" />
      <or>
        <option name="destcomponent" value="SAP_BASIS(740(8-*))" />
        <option name="destcomponent" value="SAP_BASIS(741-*)" />
      </or>
      </options>
    </phase>
	 <phase name="DDICGENAIM_CHK" logfile="DDICGENAIMCHK.LOG" password="OKNMPTHW">
        <!-- pwd: 80455 -->
        <action>Check for DDIC generating AIMs</action>
      </phase>
      <submoduleref name="SUBMOD_DDICGENAIM" password="SJVPQLMB">
        <!-- pwd: 97353 -->
        <options>
          <option name="DDICGENAIM" />
        </options>
      </submoduleref>
    </phaselist>
  </submodule>
  <!-- ************************************************************************ -->
  <!-- (jo 700.08) Have some more details after XPRA phases -->
  <phase name="DMPSPC_XPR" logfile="DMPSPC_XPR.LOG" password="ECBUBNHG">
    <!-- pwd: 93525 -->
    <args>
      <arg></arg>
      <arg>DMPSPC_XPR.FRE</arg>
      <arg>DMPSPC_XPR.ALL</arg>
      <arg>table space sizes after XPRAS</arg>
    </args>
    <action>Provides information on free space in the database</action>
  </phase>
  <!-- (jo 700.22) Dump shared memory statistics after PCON -->
  <phase name="SHMD_STAT_XPRA" password="QVUMMPCL">
    <!-- pwd: 79122 -->
    <args>
      <arg></arg>
      <arg>SHMD_XPRA.LOG</arg>
      <arg>ENQSTAT_XPRA.LOG</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/dmpspc" />
    </options>
    <action>Determines shared memory usage</action>
  </phase>
 
  <phase name="PSCRGEN_DROP_TABLE_LAST" logfile="SQLDRSHDLST.LOG" password="EWIWUCUS">
       <!-- pwd: 9911 -->   
    <args>
      <arg>GEN</arg>
      <arg>SHD_TABLE</arg>
      <arg>DROP_TABLES=DROPLADR</arg>
      <arg>DROP_SHD_TABLE_LAST</arg>
      <arg>drop remaining shadow tables</arg>
      <arg>TP_EXECDBSCRIPT_TRIG</arg> <!--  (jo 720) Match SQLSCREXE_DROP_LAST requirement  -->
      <arg>SINGLE_XQL</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MIGRATE_OPTION" value="SERIAL" />
    </options>
    <action>Generates scripts for deleting remaining shadow tables</action>
  </phase>
 
  <!-- delete remaining shadow tables -->
  <!-- mh 620/3 now moved after XPRAs -->
  <phase name="SCEXEC_DROP_LAST" password="IIIRBFVW">
    <!-- pwd: 95455 -->
    <args>
      <arg>DROPLADR.CLT</arg>
      <arg>SQLDRLADR.LOG</arg>
      <arg></arg>
    </args>
    <action>Deletes remaining shadow tables</action>
  </phase>
  <!-- Modification Export SPDD -->
  <phase name="RUN_UPGRESETREPFLAG_SPDD" logfile="RRPFSPDD.LOG" elgfile="RRPFSPDD.ELG" password="SOYHTLLU">
    <!-- pwd: 97158 -->
    <args>
      <arg>UPG_RESETREPFLAG</arg>
      <arg>SPDD</arg>
      <arg>CHECKEXISTS</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>Reseting repair flag of objects in SPDD request</arg>
    </args>
    <action>Reset repair flag of objects in SPDD request</action>
    <options>
      <and>
        <option name="realdestvers" value="*-730" />
        <option name="condition" value="'$(SPDDTRANSPORT)' != ''" />
      </and>
    </options>
  </phase>
  <phase name="UEXP_SPDD" logfile="UEXPSPDD.LOG" elgfile="UEXPSPDD.ELG" password="UADIBHLS">
    <!-- pwd: 27122 -->
    <args>
      <arg>SPDD</arg>
      <arg></arg>
    </args>
    <options>
      <option name="realdestvers" value="*-730" />
    </options>
    <action>Exports any adjusted ABAP Dictionary objects, if necessary</action>
  </phase>
  <!-- (ps 710-7.43) Use generated script instead of fixed one -->
  <phase name="SETUPGPAR_SNOTEOUT" logfile="SETUPGPAR.LOG" password="OJCYETCN">
    <!-- pwd: 87967 -->
    <args>
      <arg>DEL</arg>
      <arg>SNOTE_UPG_ENABLED</arg>
    </args>
    <action>Sets parameters in UPGPARAM</action>
  </phase>

  <!-- ******************************************************************** -->
  <submoduleref name="SUBMOD_UPSTAT" password="SSQLLLFE">
    <!-- pwd: 56029 -->
  </submoduleref>

  <!-- ******************************************************************** -->
  <phase name="SQLDB_DEL_SAP_APO" password="CYGBDRVC">
    <!-- pwd: 26628 -->
    <args>
      <arg>DELETE_CVERS_SAP_APO</arg>
      <arg></arg>
    </args>
    <options>
      <option name="ST_range" value="*-610" />
      <option name="destcomponent" value="SCM" />
    </options>
    <action>deletes SAP-APO from CVERS</action>
  </phase>

  <!-- (bm SP10) Execute Unicode Conversion post step reports in DMO -->
  <phase name="JOB_UMG_ADD_POST_STEP" logfile="UMG_ADD_POST_STEP.LOG" elgfile="UMG_ADD_POST_STEP.ELG" password="YVGUKZWN">
    <!-- pwd: 68913 -->
    <args>
      <arg>UMG_ADD_POST_STEP_FOR_DMO</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>UMG_POST_STEP_DMO\.$(SAPSID)</arg>
      <arg>3</arg>
      <arg>Post step reports for Unicode Conversion</arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Execute Unicode Conversion post step reports in DMO</action>
  </phase>

  <!-- (vd 46D.04) set Workplace flag, if worklace system -->
  <!-- cU("SET_PRODUCT"), removed (vd 620.49) -->
  <!-- (vd 610.2.15) JOB_RADCREMNT -->
  <phase name="JOB_RADCREMNT" logfile="PADCREMNT.LOG" elgfile="PADCREMNT.ELG" password="KLSWOBCR">
    <!-- pwd: 63026 -->
    <args>
      <arg>RADCREMNT</arg>
      <arg>ALL</arg>
      <arg>NO-IGNORE</arg>
      <arg>CREMNTPRT\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Fill DBLENGTH2</arg>
    </args>
    <options>
      <option name="ST_range" value="*-46Z" />
    </options>
    <action>Changes the maintenance flag for tables and initializes the flag for views</action>
  </phase>
  <phase name="JOB_DBPROD_UPG" logfile="PSDBPROD.LOG" elgfile="PSDBPROD.ELG" password="QZZDEPWV">
    <!-- pwd: 20542 -->
    <args>
      <arg>RSDBPROD</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSDBPROD\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>DB PROD START PREPARE</arg>
    </args>
    <action>Performs database-specific operations before restarting production operation of the system</action>
  </phase>
  <!-- ************************************************************************ -->
  <phase name="SUCCCHK_PROD" password="GHUOKJYT">
    <!-- pwd: 18998 -->
    <args>
      <arg>CHECK_SIDBUFFER;CHECK_CVERS</arg>
    </args>
    <action>Checks prerequisites for production operation</action>
  </phase>
  <!-- ************************************************************************ -->
  <submodule password="KRGCCBGT" execparallel="true">
    <phaselist>
      <phase name="JOB_RSDLDSEQ" logfile="PSDLDSEQ.LOG" elgfile="PSDLDSEQ.ELG" password="IWTSZFNS">
        <!-- pwd: 18575 -->
        <args>
          <arg>RSDLDSEQ</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>RSDLDSEQ\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>DELETION OF OLD SCREEN SEQUENCE POOLS</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
        </options>
        <action>Cleans up screen sequence control</action>
      </phase>
      <phase name="JOB_RSUCUPGR" logfile="RSUCUPGR.LOG" elgfile="RSUCUPGR.ELG" password="OIMSAIOS">
        <!-- pwd: 4402 -->
        <args>
          <arg>RSUCUPGR</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSUCUPGR\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>CLEAN-UP UM4 OBJECTS</arg>
        </args>
        <options>
          <option name="ST_range" value="46C-46Z" />
        </options>
        <action>UCCNV: Cleans up UM4 objects</action>
      </phase>
      <phase name="JOB_SPPSAPGUI" logfile="PSPPSAPGUI.LOG" elgfile="PSPPSAPGUI.ELG" password="ZPQKFUHQ">
        <!-- pwd: 514 -->
        <args>
          <arg>RSUPGSPPSAPGUI</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSUPGSPPSAPGUI\.$(SAPSID)</arg>
          <arg>5</arg>
          <arg>GUI handling for SCM</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
          <option name="destcomponent" value="SCM(510)" />
        </options>
        <action>UCCNV: Cleans up nametab</action>
      </phase>
      <phase name="JOB_RDDNTPUR" logfile="PDDNTPUR.LOG" elgfile="PDDNTPUR.ELG" password="SBLHGLYH">
        <!-- pwd: 19232 -->
        <args>
          <arg>RDDNTPUR</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RDDNTPUR\.$(SAPSID)</arg>
          <arg>15</arg>
          <arg>NAMETAB CLEANUP</arg>
        </args>
        <options>
          <option name="MODE" value="EXPORT" />
        </options>
        <action>Cleans up nametab</action>
      </phase>

      <!-- cv, due to IM 1967155/2013 -->
      <!-- ft, moved to after JOB_RDDNTPUR_NT due to nametab issue -->
      <phase name="JOB_RSUPG_DBDIFF" logfile="PUPGDBDIFF.LOG" elgfile="PUPGDBDIFF.ELG" password="SNNTILGL">
        <!-- pwd: 18802 -->
        <args>
          <arg>RSUPG_DBDIFF</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RSUPG_DBDIFF\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>DATABASE CLEANUP</arg>
        </args>
        <options>
          <option name="DBTYPE" value="HDB" />
        </options>
        <action>Cleans up table DBDIFF in the database</action>
      </phase>
    </phaselist>
  </submodule>

  <submodule password="KRGCCBGT">
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="DBTYPE_2ND" value="HDB" />
      <option name="WITH_LIVECACHE" />
      <option name="lcwithhana_mode" value="LCwithHANA" />
      <not><option name="MODE" value="EXPORT" /></not>
    </options>
    <phaselist>
      <phase name="REQ_LCMIGDOWLOAD" password="QOVSNPTA">
        <!-- pwd: 67126 -->
        <args>
          <arg>ReqLCMigDownload</arg>
          <arg>UNLOCKSYS;NODARKMODE</arg>
        </args>
        <options>
          <option name="apolc_mode" value="none" />
        </options>
        <action>Prompts to save the SAP liveCache</action>
      </phase>
      <phase name="JOB_APO_DWNUPL_SECTION_A" logfile="auto" elgfile="auto" password="IKETXFFO">
        <!-- pwd: 19932 -->
        <args>
          <arg>/SAPAPO/OM_DWNUPL_SECTION_A</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>SAPAPO_OM_DWNUPL_SECTION_A\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>APO-DOWNLOAD-UPLOAD-SECTION-A</arg>
        </args>
        <options>
          <option name="apolc_mode" value="run" />
        </options>
        <action>Tests prerequisites for migration of SAP liveCache</action>
      </phase>
      <phase name="JOB_APO_DWNUPL_SECTION_B" logfile="auto" elgfile="auto" password="IKETXFFO">
        <!-- pwd: 19932 -->
        <args>
          <arg>/SAPAPO/OM_DWNUPL_SECTION_B</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>SAPAPO_OM_DWNUPL_SECTION_B\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>APO-DOWNLOAD-UPLOAD-SECTION-B</arg>
        </args>
        <options>
          <option name="apolc_mode" value="run" />
        </options>
        <action>Downloads all transactional data from SAP liveCache</action>
      </phase>
      <phase name="SQLDB_DELDBCONLC" password="IRQAWFOZ">
        <!-- pwd: 64616 -->
        <args>
          <arg>DELETE_LC_ENTRIES</arg>
          <arg></arg>
        </args>
        <action>Deletes DBCON entries for SAP liveCache</action>
      </phase>
      <phase name="HDB_INSERT_LC_DBCON_ENTRIES" password="GBTVWJUR">
        <!-- pwd: 59052 -->
        <action>Creates DBCON entires for SAP liveCache on SAP HANA</action>
      </phase>
      <phase name="HDB_LC_PREPARE" password="GBTVWJUR">
        <!-- pwd: 59052 -->
        <action>Prepares SAP HANA for migration of SAP liveCache</action>
      </phase>
      <phase name="STOPSAP_LCMIG" password="IIVEBFVW">
        <!-- pwd: 66178 -->
        <args>
          <arg>CENTRAL;STOP_SERVICE</arg>
        </args>
        <action>Stops the SAP system</action>
      </phase>
      <phase name="STARTSAP_LCMIG" password="QVHZMPCL">
        <!-- pwd: 56325 -->
        <args>
          <arg>CENTRAL;START_SERVICE;STOP_BEFORE_START</arg>
          <arg>DEVTRACE.LOG</arg>
        </args>
        <action>Starts SAP system</action>
      </phase>
      <phase name="REQ_LCMIGUPLOAD" password="QOVSNPTA">
        <!-- pwd: 67126 -->
        <args>
          <arg>ReqLCMigUpload</arg>
          <arg>UNLOCKSYS;NODARKMODE</arg>
        </args>
        <options>
          <option name="apolc_mode" value="none" />
        </options>
        <action>Prompts to restore the SAP liveCache</action>
      </phase>
      <phase name="JOB_APO_DWNUPL_SECTION_C" logfile="auto" elgfile="auto" password="IKETXFFO">
        <!-- pwd: 19932 -->
        <args>
          <arg>/SAPAPO/OM_DWNUPL_SECTION_C</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>SAPAPO_OM_DWNUPL_SECTION_C\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>APO-DOWNLOAD-UPLOAD-SECTION-C</arg>
        </args>
        <options>
		<option name="apolc_mode" value="run" />
        </options>
        <action>Uploads all master and transactional data into livecache</action>
      </phase>
    </phaselist>
  </submodule>
  <!-- turn session manager on -->
  <!-- (ps 620-4.01) -->
  <submodule password="KRGCCBGT">
    <options>
      <not><option name="MIGRATE_SECONDDB" /></not>
      <not><option name="lcwithhana_mode" value="LCwithHANA" /></not>
      <option name="MODE" value="EXPORT" />
      <option name="WITH_LIVECACHE" />
    </options>
    <phaselist>
      <phase name="REQ_LCUPG1" password="SCWVRLDQ">
        <!-- pwd: 58384 -->
        <args>
          <arg>ReqAPOUpgradeLC</arg>
          <arg>NODARKMODE</arg>
        </args>
      </phase>
      <!-- (jo 710) Automatization of live cache -->
      <phase name="JOB_APO_UPGR_SECTION_C" elgfile="APOUPGRSECC.ELG" password="GHPWRYPH">
        <!-- pwd: 7462 -->
        <args>
          <arg>/SAPAPO/OM_UPGR_SECTION_C</arg>
          <arg></arg>
          <arg>NO-IGNORE</arg>
          <arg>SAPAPO_OM_UPGRADE_SECTION_C\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>APO-UPGR-SECTION-C</arg>
        </args>
        <options>
          <not><option name="apolc_mode" value="none" /></not>
        </options>
        <action>Downloads all transactional data from livecache</action>
      </phase>
    </phaselist>
  </submodule>

  <phase name="SQLDB_SMON" password="AFPTWVMT">
    <!-- pwd: 31317 -->
    <args>
      <arg>SESSION_MANAGER_ON</arg>
      <arg></arg>
    </args>
    <action>Switches the Session Manager back on</action>
  </phase>
  <!--  (jo + ag) Renamed and switch one again for all scenarios  -->
  <phase name="STOPSAP_FINAL" password="WTUQIDUB">
    <!-- pwd: 73463 -->
    <args>
      <arg>CENTRAL;STOP_SERVICE</arg>
    </args>
    <options>
      <not> <option name="ZERODOWNTIME_UPG"/> </not>
    </options>
    <action>Final stop before system is reconfigured for uptime</action>
  </phase>
</phaselist>
</module>
 
  <!-- ******************************************************************* -->
    <module name="MAIN_TRANSEXEC" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Downtime for transport mode</description>
      <options>
        <not><option name="HASSHADOW" /></not>
      </options>
      <postevent>MODULE_INIT(MAIN_PROFEND)</postevent>
      <!-- no revoke module hence no reset possible  -->
      <password>KHASWBIH</password>
      <!--  pwd: 83743  -->
      <precedences>
        <precedence>MAIN_NEWBAS</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINTransExec.xml#113 $">
  <!-- ************************************************************************ -->
  <!-- ******************************************************************** -->
  <!-- ***************************************************************************** -->
  <submoduleref name="SUBMOD_PROFCONVSTRUCT" password="QCGTLPLW">
       <!-- pwd: 13817 -->
  </submoduleref>

  <!--  (jo 720) System is down, so first do kernel switch  -->
  <phase name="KX_SWITCH_TRANS" logfile="KX_SWITCH.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg>ToolVers.xml</arg>
      <arg>CLEANIPC;CENTRAL;SERVICE_CHECK</arg>
    </args>
    <action>Switches SAP kernel</action>
  </phase>

  <!-- (jo 720) Increase processes for activator  -->
  <phase name="CHANGEPROF_TRANS" logfile="CHGPRFTRNS.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>ALPTRANS.XML</arg>
      <arg>INSTANCEPROF</arg>
      <arg></arg>
    </args>
    <action>Increases processes for downtime</action>
  </phase>

  <!-- ************************************************************************ -->
  <!-- *************          PREPUT           ******************************** -->
  <!-- ************************************************************************ -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="HASANYPUTSTEP(PREPUT.BUF)" value="AI" />
    </options>
    <phaselist>
      <phase name="PREPREPUT_738" logfile="PREPREPUT.LOG" elgfile="PREPREPUT.ELG" password="MXKKWXCP">
        <!-- pwd: 44559 -->
        <args>
          <arg>RADTBCON.SAP</arg>
          <arg></arg>
        </args>
        <options>
          <option name="ST_range" value="700-703" />
          <option name="destcomponent" value="SAP_BASIS(740(0-1))" /> <!-- 740 SP 0-1 -->
          <not><option name="MODE" value="EXPORT" /></not>
        </options>
      </phase>

      <phase name="PREPREPUT_740" logfile="PREPREPUT.LOG" elgfile="PREPREPUT.ELG" password="WPCMQDAR">
           <!-- pwd: 89806 -->
        <args>
          <arg>R000036.D75</arg>
          <arg></arg>
        </args>
        <options>
          <or>
            <option name="ST_range" value="700-703" /> <!-- Start 700-731 -->
            <option name="startcomponent" value="SAP_BASIS(740(0-1))" /> <!-- Start 740 SP0-1 -->
          </or>
          <option name="realdestvers" value="740-799" /> <!-- 740-799 -->
          <not><option name="destcomponent" value="SAP_BASIS(740(0-1))" /></not> <!-- not 740 SP 0-1 -->
          <not><option name="MODE" value="EXPORT" /></not>
        </options>
      </phase>

      <phase name="PREPREPUT_742" logfile="PREPREPUT.LOG" elgfile="PREPREPUT.ELG" password="WPCMQDAR">
           <!-- pwd: 89806 -->
        <args>
          <arg>R000080.PP8</arg>
          <arg></arg>
        </args>
        <options>
          <or>
            <option name="ST_range" value="700-703" /> <!-- Start 700-731 -->
            <option name="startcomponent" value="SAP_BASIS(740(0-7))" /> <!-- Start 740 SP0-7 -->
          </or>
          <option name="realdestvers" value="740-799" /> <!-- 740-799 -->
          <not><option name="destcomponent" value="SAP_BASIS(740(0-7))" /></not> <!-- not 740 SP 0-7 -->
          <not><option name="MODE" value="EXPORT" /></not>
        </options>
      </phase>

      <!-- (jo 720) preput recovery needs to run always!!  -->
      <phase name="CMDFILE_PREPUT" elgfile="CMDFILEPRE.ELG" password="OCDEFTTC">
	   <!-- pwd: 74999 -->
	<args>
	  <arg>PREPUT.BUF</arg>
	  <arg>CMDFILE.TP0</arg>
	  <arg>PREDDIC.BUF</arg>
	  <arg></arg>
	</args>
	<action>Command file import for PREPUT</action>
      </phase>

      <phase name="STARTSAP_TRPREACT" password="WPCMQDAR">
	   <!-- pwd: 89806 -->
	<args>
	  <arg>START_SERVICE;CENTRAL</arg>
	  <arg>DEVTRACE.LOG</arg>
	</args>
	<action>Starts SAP system</action>
      </phase>

      <!--  (jo 720) Save preput for later recovery  -->
      <phase name="PREPUTRECOVER" logfile="PREPUTRECOVER.LOG" password="YQQPHZXU">
	   <!-- pwd: 83652 -->
	<args>
	  <arg>PREPUT.BUF</arg>
	  <arg>SAPK???EPP</arg>
	  <arg></arg> <!-- Substitute last character with 'U'  -->
	  <arg>TR_PREPUTRECOVER</arg>
	  <arg></arg>
	</args>
	<action>Save transport objects from preput for later recovery</action>
      </phase>

      <!-- *************************  Activation + DIST for PREPUT  ************************* -->
      <submodule password="KRGCCBGT">
	<options>
	  <option name="HASANYPUTSTEP(PREPUT.BUF)" value="A" />
	</options>
	<phaselist>
	  <!-- DDIC Import of PREPUT -->
	  <phase name="DDIC_TRPRE" buffersync="true" elgfile="DDICPRE.ELG" password="ATAUUVEP">
	       <!-- pwd: 34051 -->
	    <args>
	      <arg>PREDDIC.BUF</arg>
	      <arg>DDICUPG.TP0</arg>
	      <arg>PREACT.BUF</arg>
	      <arg></arg>
	    </args>
	    <action>Imports the dictionary objects of the PREPUT</action>
	    <action>if necessary</action>
	  </phase>
	  <!-- Activation -->
	  <phase name="PREACT_TRANS" elgfile="ACTPRE.ELG" password="SJICQLMB">
	       <!-- pwd: 57708 -->
	    <args>
	      <arg>PREACT.BUF</arg>
	      <arg>ACTUPG.TP0</arg>
	      <arg>AFTERPREACT.BUF</arg>
	      <arg></arg>
	    </args>
	    <action>Activates ABAP Dictionary objects of PREPUT</action>
	  </phase>
	  <!-- parallel distribution in shadow system -->
	  <phase name="PARDISTPRE_TRANS" logfile="PARDSHDPRE.LOG" elgfile="PARDTRNSPRE.ELG" password="QWFAXPHU">
	       <!-- pwd: 97943 -->
	    <args>
	      <arg>20</arg>
	      <arg>10</arg>
	      <arg>10</arg>
	      <arg></arg>
	    </args>
	    <action>Starts distributor</action>
	  </phase>
          <!--  (cv 10/13) External conversion  -->
          <phase name="XCNVPRE_TRGENLST" logfile="XCNVPRETRGEN.LOG" elgfile="XCNVPRETRGEN.ELG" password="YVGUKZWN">
               <!-- pwd: 68913 -->
            <args>
              <arg>GENLIST</arg>
              <arg></arg>
              <arg>XCNV_TRANS</arg>
              <arg>XCNVPRETRANS.LST</arg>
            </args>
            <action>Finds tables which have to be externally converted</action>
          </phase>

          <phase name="XCNVPRE_TRMODXTT" logfile="XCNVPRETRMOD.LOG" elgfile="XCNVPRETRMOD.ELG" password="IEDAJFBM">
               <!-- pwd: 40231 -->
            <args>
              <arg>MODXTT</arg>
              <arg>LISTFILE</arg>
              <arg>XCNVPRETRANS.LST</arg>
              <arg>XCNV_MODXTT</arg>
            </args>
            <action>Marks tables for distributor which are externally converted</action>
          </phase>

          <phase name="PARDISTPRE_TRXCNV" logfile="PARDSTPRETRANSX.LOG" elgfile="PARDSTPRETRANSX.ELG" password="WCPMDDNE">
               <!-- pwd: 11646 -->
            <args>
              <arg>20</arg>
              <arg>10</arg>
              <arg>10</arg>
	      <arg></arg>
            </args>
            <action>Re-runs distribution for tables externally converted</action>
          </phase>
          <phase name="XCNVPRE_TRDUMP" logfile="XCNVPRETRDUMP.LOG" elgfile="XCNVPRETRDUMP.ELG" password="SUMNHLPW">
               <!-- pwd: 94221 -->
            <args>
              <arg>DUMP</arg>
              <arg>LISTFILE</arg>
              <arg>XCNVPRETRANS.LST</arg>
              <arg>XCNVPRETRANS.SAP</arg>
            </args>
            <action>Dumps tables which are to be externally converted</action>
          </phase>

          <phase name="XCNVPRE_TRDEL" logfile="XCNVPRETRDEL.LOG" elgfile="XCNVPRETRDEL.ELG" password="EWIWUCUS">
               <!-- pwd: 9911 -->
            <args>
              <arg>DEL</arg>
              <arg>LISTFILE</arg>
              <arg>XCNVPRETRANS.LST</arg>
              <arg>XCNV_DEL</arg>
            </args>
            <action>Deletes from pool/clusters tables which are externally converted</action>
          </phase>

	  <phase name="STOPSAP_TRPREMVNT" password="SJVPQLMB">
	       <!-- pwd: 97353 -->
	    <args>
	      <arg>CENTRAL</arg>
	    </args>
	    <action>Stop system for move nametab</action>
	  </phase>
	  <phase name="PARMVNT_TRPRE" logfile="MVNTTRPRE.LOG" elgfile="MVNTTRANSPRE.ELG" password="YAWZNZVG">
	       <!-- pwd: 79932 -->
	    <args>
	      <arg>TP_MOVENTABS</arg>
	      <arg>INTDEL;INTACT;TOUCH;NOBUFFRESET</arg>
	      <arg>MF=F,RANGE-TS; MF=A,RANGE-TS; MF=J; MF=B</arg>
	      <arg>PARCONV.TP0</arg>
	    </args>
	    <action>Activates nametab entries</action>
	  </phase>

          <phase name="XCNVPRE_TRLOAD" logfile="XCNVPRETRLOAD.LOG" elgfile="XCNVPRETRLOAD.ELG" password="SANGVLTY">
               <!-- pwd: 63887 -->
            <args>
              <arg>LOAD</arg>
              <arg>LISTFILE</arg>
              <arg>XCNVPRETRANS.LST</arg>
              <arg>XCNVPRETRANS.SAP</arg>
            </args>
            <action>Reloads tables which are externally converted</action>
          </phase>

	  <phase name="MVNTAB_VIEW_TRPRE" logfile="MVNTVIEWPRE.LOG" elgfile="MVNTVIEWPRE.ELG" password="IRQAWFOZ">
	       <!-- pwd: 64616 -->
	    <args>
	      <arg>PARALLEL;NEWTOOLS;NOBUFRESET;CHECK_MF</arg>
	      <arg>V</arg>
	      <arg></arg>
	      <arg>MVNTVIEW.TP0</arg>
	    </args>
	  </phase>

	  <phase name="TABIM_TRANS_PRE_A" elgfile="TABIMTRNSPRE.ELG" password="QOVSNPTA">
	       <!-- pwd: 67126 -->
	    <args>
	      <arg>AFTERPREACT.BUF</arg>
	      <arg>TABIMUPG.TP0</arg>
	      <arg></arg>
	      <arg></arg>
	    </args>
	    <action>Imports PREPUT main import data</action>
	  </phase>
	</phaselist>
      </submodule>

      <!-- *************************  Simple main import PREPUT  ************************* -->
      <submodule password="KRGCCBGT">
	<options>
	  <not><option name="HASANYPUTSTEP(PREPUT.BUF)" value="A" /></not>
	</options>
	<phaselist>
	  <phase name="STOPSAP_TRPRE_NOA" password="IKETXFFO">
	       <!-- pwd: 19932 -->
	    <args>
	      <arg>CENTRAL</arg>
	    </args>
	    <action>Stop system for main import of preput</action>
	  </phase>

	  <phase name="TABIM_TRANS_PRE_NOA" elgfile="TABIMTRNSPRE.ELG" password="IIVEBFVW">
	       <!-- pwd: 66178 -->
	    <args>
	      <arg>PREDDIC.BUF</arg>
	      <arg>TABIMUPG.TP0</arg>
	      <arg></arg>
	      <arg></arg>
	    </args>
	    <action>Imports PREPUT main import data</action>
	  </phase>
	</phaselist>
      </submodule>
    </phaselist>
  </submodule>

  <!-- ************************************************************************ -->
  <!-- ************************************************************************ -->
  <!-- (jo 720) DDIC Import while system is down  -->

  <phase name="TR_STORE2BUFFER_TRANS" password="EASFFNXO"> <!-- pwd: 78049 -->
    <args>
      <arg>APPTRNSBUF.TP0</arg>
      <arg>SHDINC.BUF</arg>
      <arg></arg>
    </args>
  </phase>

  <phase name="DDIC_TRANS" autorepeat="1" elgfile="DDICUPG.ELG" password="SEFKNLNI">
       <!-- pwd: 32478 -->
    <args>
      <arg>SHDINC.BUF</arg>
      <arg>DDICUPG.TP0</arg>
      <arg>ACTUPG.BUF</arg>
      <arg>parallelgroups</arg>
    </args>
  </phase>

  <!-- (jo 720) IM 2176966 2012 Remark: Cleanup is done in SQLDB_D1GENCLEAN in SAPupMAINProfEnd.xml -->
  <phase name="SQLDB_D1GENIN_TRNS" logfile="D1GENIN.LOG" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg>D1GENINSERT</arg>
      <arg></arg>
    </args>
    <options>
      <option name="ST_range" value="702-709,730-*" />
    </options>
    <action>Prevents anticipating generation</action>
  </phase>

  <!-- ************************************************************************ -->
  <phase name="STARTSAP_TRACT_PREPUT" password="AMBAVVVE">
       <!-- pwd: 12335 -->
    <args>
      <arg>KEEP_SERVICE;CENTRAL</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts SAP system</action>
    <options>
      <option name="HASANYPUTSTEP(PREPUT.BUF)" value="A" />
    </options>
  </phase>

  <phase name="STARTSAP_TRACT" password="WJOGCDWP">
       <!-- pwd: 18134 -->
    <args>
      <arg>START_SERVICE;CENTRAL</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts SAP system</action>
    <options>
      <not><option name="HASANYPUTSTEP(PREPUT.BUF)" value="A" /></not>
    </options>
  </phase>

 <!-- cv: needed for 740-SP1 delivery and higher as preparation step for the DDIC_XPRAs -->
  <phase name="JOB_RSDELIVERY740" logfile="PSDELIV740.LOG" elgfile="PSDELIV740.ELG" password="SUMNHLPW">
       <!-- pwd: 94221 -->
    <args>
      <arg>RSDELIVERY740</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSDELIVERY740\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>CHECK DELIVERY OF TABLES AND INDEXES IN 740</arg>
    </args>
    <options>
      <option name="realdestvers" value="740-799" />
      <option name="ST_range" value="*-739" />
    </options>
    <action>Creates a list of indexes and tables delivered with 740</action>
  </phase>

  <!-- cv 10/13 -->
  <phase name="RUN_RUTPREDEPVIEWS4DEL" logfile="auto" elgfile="auto" password="IBWKCFML">
       <!-- pwd: 58952 -->
    <args>
      <arg>RUTPREDEPVIEWS4DEL</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTPREDEPVIEWS4DEL\.$(SAPSID)</arg>
      <arg>0</arg>
      <arg>Prepare deletions of some views of SAP_FIN</arg>
    </args>
    <options>
      <not> <option name="startcomponent" value="SAP_FIN(700-*)" /> </not>
      <option name="destcomponent" value="SAP_FIN(700-*)" />
    </options>
    <action>Prepare deletions of some views of SAP_FIN</action>
  </phase>

  <!-- sm SUM SP12 Must run in transport mode before ACT_TRANS -->
  <phase name="RUN_RSUMOD10_SPDD_TRANS" logfile="AMODSPDD.LOG" elgfile="AMODSPDD.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>RSUMOD10</arg>
      <arg>SAP_UPG_SPDD</arg>
      <arg>NO-IGNORE</arg>
      <arg>AMODPROT\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>MOD CLASSIFICATION ERRORS</arg>
    </args>
    <action>SPDD preparation: Classify modified objects</action>
  </phase>

  <!-- Activation -->
  <phase name="SQLDB_SET_TIMESTAMP_E070" logfile="SET_TIMESTAMP_E070.LOG" password="ADGEAVCB">
       <!-- pwd: 64513 -->
    <args>
      <arg>SET_TIMESTAMP_E070</arg>
      <arg></arg>
    </args>
    <options>
    	<not><option name="MODE" value="EXPORT" /></not>
    </options>
    <action>Sets E070 Timestamp</action>
  </phase>
  <phase name="ACT_TRANS" autorepeat="$ISENABLED($ENVVAL(/dev/act_autorepeat))" unlockonerror="true" elgfile="ACTUPG.ELG" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <args>
      <arg>ACTUPG.BUF</arg>
      <arg>ACTUPG.TP0</arg>
      <arg>TABIMTRNS.BUF</arg>
      <arg></arg>
    </args>
    <action>Activates ABAP Dictionary customer objects</action>
    <usage>If necessaryadjust ABAP Dictionary objects using transaction SPDD</usage>
  </phase>

  <submoduleref name="SUBMOD_PREP_DDIC_740" password="WFJPKDCF">
       <!-- pwd: 60928 -->
    <defs>
      <def>CONNECTTYPE=standard</def>
    </defs>
    <options>
      <option name="realdestvers" value="740-799" />
      <option name="ST_range" value="*-739" />
    </options>
  </submoduleref>

  <!-- parallel distribution -->
  <phase name="PARDIST_TRANS" logfile="PARDSTTRANS.LOG" elgfile="PARDSTTRANS.ELG" password="MVWDHMJL">
       <!-- pwd: 5514 -->
    <args>
      <arg>20</arg>
      <arg>10</arg>
      <arg>10</arg>
	  <arg></arg>
    </args>
    <action>Runs distribution of table changes</action>
  </phase>

  <!-- cv 09/13 -->
  <phase name="RUN_RUTRN2VIEW_TRANS" logfile="auto" elgfile="auto" password="IBWKCFML">
       <!-- pwd: 58952 -->
    <args>
      <arg>RUTCOMPLETERN2VIEW</arg>
      <arg>SAP_RENAME</arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTCOMPLETERN2VIEW\.$(SAPSID)</arg>
      <arg>0</arg>
      <arg>Prepare rename statements for some tables of SAP_FIN</arg>
    </args>
    <options>
      <not> <option name="startcomponent" value="SAP_FIN(700-*)" /> </not>
      <option name="destcomponent" value="SAP_FIN(700-*)" />
      <option name="DBTYPE" value="HDB" />
    </options>
    <action>Prepare rename statements for some tables of SAP_FIN</action>
  </phase>

  <!--  (jo 720) External conversion  -->
  <phase name="XCNV_TRGENLST" logfile="XCNVTRGEN.LOG" elgfile="XCNVTRGEN.ELG" password="YVGUKZWN">
       <!-- pwd: 68913 -->
    <args>
      <arg>GENLIST</arg>
      <arg></arg>
      <arg>XCNV_TRANS</arg>
      <arg>XCNVTRANS.LST</arg>
    </args>
    <action>Finds tables which have to be externally converted</action>
  </phase>

  <phase name="XCNV_TRMODXTT" logfile="XCNVTRMOD.LOG" elgfile="XCNVTRMOD.ELG" password="IEDAJFBM">
       <!-- pwd: 40231 -->
    <args>
      <arg>MODXTT</arg>
      <arg>LISTFILE</arg>
      <arg>XCNVTRANS.LST</arg>
      <arg>XCNV_MODXTT</arg>
    </args>
    <action>Marks tables for distributor which are externally converted</action>
  </phase>

  <phase name="PARDIST_TRXCNV" logfile="PARDSTTRANSX.LOG" elgfile="PARDSTTRANSX.ELG" password="WCPMDDNE">
       <!-- pwd: 11646 -->
    <args>
      <arg>20</arg>
      <arg>10</arg>
      <arg>10</arg>
	  <arg></arg>
    </args>
    <action>Re-runs distribution for tables externally converted</action>
  </phase>

  <!-- ************************************************************************ -->
  <!--  (jo 720) Is needed by report 'RSMFCONV'   -->
  <phase name="UVERS_UP_STRANS" password="CHOKYROF">
       <!-- pwd: 81640 -->
    <args>
      <arg>S</arg>
      <arg></arg>
    </args>
    <action>Changes the status in table UVERS</action>
  </phase>

  <phase name="PARCONV_TRANS" logfile="PARCONV.LOG" elgfile="PARCONV.ELG" password="QOIFNPTA">
       <!-- pwd: 33718 -->
    <args>
      <!-- (jo 720) Real move nametab comes later in 'PARMVNT_TRANS', so no 'RUN_DDL' here!  -->
      <!-- (cv, jo, hjl, ft 2014-02) Never ever run RUN_DDL here, otherwise data of XCNV tables is LOST FOREVER! -->
      <!-- (ft 2014-03) do not execute deletions, see incident 234272 2014 -->
      <arg></arg>
      <arg>U</arg>
      <arg>PARCONV.TP0</arg>
      <arg>PARCONV.TLG</arg>
    </args>
    <action>Converts application tables and activates their nametab entries</action>
  </phase>

  <!-- ************************************************************************ -->
  <!-- ************************************************************************ -->
  <phase name="STOPSAP_TRMVNT" password="CRUUERMR">
       <!-- pwd: 34594 -->
    <args>
      <arg>CENTRAL</arg>
    </args>
    <action>Stop system for move nametab</action>
  </phase>

  <!-- (cv, jo, hjl, ft 2014-02) Move XCNV here so that system is down, data is not changed anymore -->
  <phase name="XCNV_TRDUMP" logfile="XCNVTRDUMP.LOG" elgfile="XCNVTRDUMP.ELG" password="SUMNHLPW">
       <!-- pwd: 94221 -->
    <args>
      <arg>DUMP</arg>
      <arg>LISTFILE</arg>
      <arg>XCNVTRANS.LST</arg>
      <arg>XCNVTRANS.SAP</arg>
    </args>
    <action>Dumps tables which are to be externally converted</action>
  </phase>

  <phase name="XCNV_TRDEL" logfile="XCNVTRDEL.LOG" elgfile="XCNVTRDEL.ELG" password="EWIWUCUS">
       <!-- pwd: 9911 -->
    <args>
      <arg>DEL</arg>
      <arg>LISTFILE</arg>
      <arg>XCNVTRANS.LST</arg>
      <arg>XCNV_DEL</arg>
    </args>
    <action>Deletes from pool/clusters tables which are externally converted</action>
  </phase>

  <!--  (jo 721) This must not run before PARCONV_TRANS because it drops views like "TRDIR"
	which make the system unusable. The very purpose of this phase is to get rid of
	views while the MODEFLAG='F' are executed on the underlying tables.
    -->
  <phase name="SQLSELEXE_PMVNTVIEW_TRANS" password="SJICQLMB">    <!-- pwd: 57708 -->
    <args>
      <arg>SEL_DROPVIEWS</arg>
      <arg>DROP_VIEWS</arg>
      <arg></arg>
    </args>
    <options>
      <or>
	<option name="DBTYPE" value="SAPDB" />
	<option name="DBTYPE" value="DB2-z/OS" />
      </or>
    </options>
    <action>Drop views before PARCONV.</action>
  </phase>

    <!-- ms + ft (09-09-2014) prevent creation of CDS Views, will be done in phase RUTDDLSCREATE-->
  <phase name="SQLDB_CDS_PREVENT_CRE_TRANS" logfile="SQL_CDS_PREVENT_CRE.LOG" elgfile="SQL_CDS_PREVENT_CRE.ELG" password="IKETXFFO">
    <!-- pwd: 19932 -->
    <args>
      <arg>CDS_PREVENT_CREATION</arg>
      <arg></arg>
    </args>
    <action>Prevent creation of CDS Views</action>
    <options>
      <option name="destcomponent" value="SAP_BASIS(740(5-*))" />
    </options>
  </phase>

  <!--  (jo 720) Must do all relevant modeflags usually done by shadow moventab phases  -->
  <phase name="PARMVNT_TRANS" logfile="MVNTTRANS.LOG" elgfile="MVNTTRANS.ELG" password="OCDEFTTC">
       <!-- pwd: 13107 -->
    <args>
      <arg>TP_MOVENTABS</arg>
      <arg>INTDEL;INTACT;TOUCH;NOBUFFRESET</arg>
      <arg>MF=X,RANGE-TS; MF=A,RANGE-TS; MF=F,RANGE-TS</arg>
      <arg>PARCONV.TP0</arg>
    </args>
    <action>Activates nametab entries</action>
  </phase>

  <phase name="XCNV_TRLOAD" logfile="XCNVTRLOAD.LOG" elgfile="XCNVTRLOAD.ELG" password="SANGVLTY">
       <!-- pwd: 63887 -->
    <args>
      <arg>LOAD</arg>
      <arg>LISTFILE</arg>
      <arg>XCNVTRANS.LST</arg>
      <arg>XCNVTRANS.SAP</arg>
    </args>
    <action>Reloads tables which are externally converted</action>
  </phase>

  <!-- ************************************************************************ -->
  <!-- ************************************************************************ -->
  <phase name="SQLDB_MARKBASVIEW" logfile="SQLDBMARKBASVIEW.LOG" password="QIHMZPPY">
       <!-- pwd: 28996 -->
    <args>
      <arg>MARK_BASIS_VIEW</arg>
      <arg></arg>
    </args>
    <action>Finds basis view that need to become active first</action>
  </phase>

  <phase name="MVNTAB_TRVIEW" logfile="MVNTVIEW.LOG" elgfile="MVNTVIEW.ELG" password="KVYGUBAD">
       <!-- pwd: 66191 -->
    <args>
      <arg>PARALLEL;NOBUFRESET;CHECK_MF</arg>
      <arg>P</arg>
      <arg></arg>
      <arg>MVNTVIEW.TP0</arg>
    </args>
  </phase>

  <!-- ************************************************************************ -->
  <!-- (jo 720) FIXME: What needed for?? Maybe to do the rest  -->
  <!--  (jo 720) Check all modeflags are gone - this is former phase SCRIPT_TST_XTT  -->
  <phase name="MVNTAB_TRANS" logfile="PMVNTTRANS.LOG" elgfile="PMVNTUPG.ELG" password="YXPJGZGF">
       <!-- pwd: 55238 -->
    <args>
      <arg>PARALLEL;NOBUFRESET;CHECK_MF_ALL</arg>
      <arg>ALL</arg>
      <arg></arg>
      <arg>PMVNTUPG.TP0</arg>
    </args>
    <action>Converts application views and activates remaining nametab entries</action>
  </phase>

  <phase name="TABIM_TRANS" autorepeat="1" elgfile="TABIMTRNS.ELG" password="SNNTILGL">
       <!-- pwd: 18802 -->
    <args>
      <arg>TABIMTRNS.BUF</arg>
      <arg>TABIMTRNS.TP0</arg>
      <arg>$CONDEVAL($SAPRELCMP($(SAPDERL),740) ge 0,XPRASUPGAIMMRG.BUF, $SAPRELCMP($(SAPDERL),731) ge 0,XPRASUPGAIMMRG.BUF, XPRASUPG.BUF)</arg>
      <arg>parallelgroups;buffertest=I</arg>
    </args>
    <action>Imports entries into control tables</action>
  </phase>

  <!-- ************************************************************************ -->
  <phase name="STARTSAP_TRXPRA" password="EHEMENGZ">
       <!-- pwd: 66195 -->
    <args>
      <arg>CENTRAL;START_SERVICE;STOP_BEFORE_START</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts SAP system</action>
  </phase>
  
  <!-- ak SUM SP11/12 enable SNOTE for transport mode as well -->
  <phase name="SETUPGPAR_SNOTEIN" logfile="SETUPGPAR.LOG" password="QOIFNPTA">
    <!-- pwd: 33718 -->
    <args>
      <arg>SET</arg>
      <arg>SNOTE_UPG_ENABLED=X</arg>
    </args>
    <action>Sets parameters in UPGPARAM</action>
  </phase>

  <!-- cv 05/14 -->
  <!-- cv & ms 09+10/14: moved directly before RUTDDLSCREATE because of IM 725760 2014 and 729493 2014 -->
  <phase name="RUN_RUTCNVFUNCCRE_TRANS" logfile="RUTCNVFUNCCRE.LOG" elgfile="RUTCNVFUNCCRE.ELG" password="SJVPQLMB">
    <!-- pwd: 97353 -->
    <args>
      <arg>RUTCNVFUNCCRE</arg>
      <arg>SAP_FUNCCRE</arg>
      <arg>NO-IGNORE</arg>
      <arg>RUTCNVFUNCCRE\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Create DB-functions</arg>
    </args>
    <action>Create necessary DB-functions for DD SQL-views</action>
    <!-- (ms + cv) if 740 SP12 is delivered with PREPUT we have to adapt the options or the call of RUTCNVFUNCCRE -->
    <options>
      <option name="destcomponent" value="SAP_BASIS(740(8-*))"/>
      <or>
        <option name="startcomponent" value="SAP_BASIS(740(*-7))"/>
        <option name="startcomponent" value="SAP_BASIS(*-731)"/>
      </or>
    </options>
  </phase>

  <phase name="RUN_RUTDDLSCREATE_TRANS" logfile="RUTDDLSCREATE_PHASE.LOG" elgfile="RUTDDLSCREATE.ELG" password="SJVPQLMB"> <!-- pwd: 97353 -->
    <args>
      <arg>RUTDDLSCREATE</arg>
      <arg>SAP_CDSCRE</arg>
      <arg>NO-IGNORE</arg>
      <arg>$CONDEVAL($SAPRELCMP($(SAPDERL),$COMPDESTPLV(SAP_BASIS),740,5) ge 0,RUTDDLSCREATE\.$(SAPSID),)</arg>
      <arg>5</arg>
      <arg>Creates CDS Views</arg>
    </args>
    <options>
      <option name="destcomponent" value="SAP_BASIS(740(2-*))" />
    </options>
    <action>Creates CDS Views</action>
  </phase>
  
  <phase name="JOB_RSUPGAIMEXE" logfile="RSUPGAIMEXE.LOG" elgfile="RSUPGAIMEXE.ELG" password="GAVULJPI">
       <!-- pwd: 89289 -->
    <args>
      <arg>RSUPGAIMEXE</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSUPGAIMEXE\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Execute AIMs in advance</arg>
    </args>
	<options>
      <option name="realdestvers" value="700" />
    </options>
    <action>Executes AIMs in advance in order to avoid errors in XPRA phase</action>
  </phase>
  <!-- ************************************************************************ -->
  <phase name="MSS_DELETEPERFDATA_TRANS" logfile="MSS_DELETEPERFDATA_TRANS.LOG" password="IIIRBFVW">
       <!-- pwd: 92863 -->
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>drop performance data tables</action>
  </phase>
  <!-- ************************************************************************ -->
  <phase name="MSS_FIXMSSPROCS_TRANS" logfile="MSS_FIXMSSPROCS_TRANS.LOG" password="YLAKEZYB">
       <!-- pwd: 80490 -->
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>fix errors in target MSSPROCS</action>
  </phase>
  <!-- ************************************************************************ -->

  <!-- (sm 720) Also use new AIM merge in transport mode for target releases >=731 -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="AIM_MERGE" />
      <option name="destcomponent" value="SAP_BASIS(731-799)" />
    </options>
    <phaselist>
      <phase name="CONVBUFFER_AIMMRG_B2L" logfile="CNVBFAIMB2L.LOG" password="AGNUHVRC">
        <!-- pwd: 67508 -->
        <args>
          <arg>BUFFER2LIST</arg>
          <arg>STEPS;SYNCMARKS</arg>
          <arg>XPRASUPGAIMMRG.BUF</arg>
          <arg>XPRASUPG.LST</arg>
        </args>
        <action></action>
      </phase>
      <phase name="RUN_RSAIMMERGE_TRANS" logfile="RSAIMMRGTRANS.LOG" elgfile="RSAIMMRGTRANS.ELG" password="CMRCBRNY">
        <!-- pwd: 65164 -->
        <args>
          <arg>RSAIMMERGE_UPG_SHD</arg>
          <arg>SAP_AIM_MRGTRA</arg>
          <arg>NO-IGNORE</arg>
          <arg>MRUPGAIM\.$(SAPSID)</arg>
          <arg>20</arg>
          <arg></arg>
        </args>
      </phase>
      <phase name="CONVBUFFER_AIMMRG_L2B" logfile="CNVBFAIML2B.LOG" password="FEVSGIGD">
        <!-- pwd: 656 -->
        <args>
          <arg>LIST2BUFFER</arg>
          <arg>CREATECOFILE</arg>
          <arg>XPRASUPGMOD.LST</arg>
          <arg>XPRASUPG.BUF</arg>
        </args>
        <action></action>
      </phase>
    </phaselist>
  </submodule>

  <phase name="XPRAS_TRANS" autorepeat="1" elgfile="XPRASUPG.ELG" password="MDTYRMXF">
       <!-- pwd: 2995 -->
    <args>
      <arg>XPRASUPG.BUF</arg>
      <arg>XPRASUPG.TP0</arg>
      <arg>AFTXPRAS.BUF</arg>
      <arg></arg>
    </args>
    <action>Executes XPRAs&lt;/p&gt;&lt;p&gt;If errors occur, repeats phase automatically&lt;/p&gt;</action>
  </phase>

  <!-- disable SNOTE again in transport mode -->
  <phase name="SETUPGPAR_SNOTEOUT" logfile="SETUPGPAR.LOG" password="OJCYETCN">
    <!-- pwd: 87967 -->
    <args>
      <arg>DEL</arg>
      <arg>SNOTE_UPG_ENABLED</arg>
    </args>
    <action>Sets parameters in UPGPARAM</action>
  </phase>

  <phase name="SQLDB_MSS_MSSPROCSTHROW" password="IRQAWFOZ">
    <!-- pwd: 64616 -->
    <args>
      <arg>MSSPROCSTHROW</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
  </phase>

  <!-- ******************************************************************** -->
  <submoduleref name="SUBMOD_UPSTAT" password="UZSUQHGJ">
       <!-- pwd: 89147 -->
  </submoduleref>

  <!-- ************************************************************************ -->
  <phase name="STOPSAP_TRANSFINI" password="WJOGCDWP">
       <!-- pwd: 45107 -->
    <args>
      <arg>CENTRAL;STOP_SERVICE</arg>
    </args>
    <action>Stop system</action>
  </phase>

</phaselist>
</module>

   <!-- ******************************************************************* -->

    <module name="MAIN_PROFEND" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Downtime end: Set up system for uptime</description>
      <options>
        <not> <option name="ZERODOWNTIME_UPG"/> </not>
      </options>
      <postevent>MODULE_INIT(MAIN_UPTRANS)</postevent>
      <revokemodule>REV_MAINPROFEND</revokemodule>

      <password>KHASWBIH</password>
      <!--  pwd: 83743  -->
      <precedences>
        <precedence>MAIN_DTTRANS</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINProfEnd.xml#27 $">
  <!-- ************************************************************************ -->

  <!-- (jo 710) Moved here and changed as discussed with Ivan Ivanov CSN 4264968 2006 -->
  <phase name="GETSYNC_MODPROF_STARTED" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>MODPROF</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Wait for SAPJup event</action>
  </phase>
        
  <!-- to.SUM8.708: drop/create system catalog views to ensure they are complete also after
                    a potentially passed OS upgrade -->
   <phase name="DB4_REFRESH_CATALOG_VIEWS" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <options>      
      <option name="DBTYPE" value="DB2/400" />
    </options>
    <action>Drops and recreates system catalog views</action>
  </phase>   
  
  <!-- (ae 710) MSS only -->
  <phase name="MSSQL_SCHEMA_CNG" logfile="auto" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <options>
      <option name="MODE" value="EXPORT" />
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>Convert MSS database schema from dbo to sapsid</action>
  </phase>
  <phase name="MSACL_INST" logfile="auto" password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <action>Installs ms_acl_info file according note 821875</action>
  </phase>
  <!-- (ps 700.88) -->
  <phase name="FRP_INST" logfile="auto" password="OCDEFTTC">
       <!-- pwd: 74999 -->   
    <!-- (jo 720) This phase may run always since it only unpacks if the archive is known -->
    <action>Unpacks the FRP to the kernel directory</action>
  </phase>
  <!-- (jo 710) This must be done before* the MODPROF=STARTED sync point, see IM 2280106 2008 -->
  <phase name="WINSRV_INPOST" logfile="auto" password="WPCMQDAR">
       <!-- pwd: 89806 -->   
    <args>
      <arg>uninstall</arg>
      <arg>std</arg>
      <arg>start</arg>
    </args>
    <options>
      <option name="OSTYPE" value="Windows" />
      <option name="CHANGE_INSTNR" />
    </options>
    <action>Uninstalls service of temporary instance</action>
  </phase>
  <!-- (jo 710) Moved back to this point after lengthy discussion with Ivan Ivanov, see
       ** also IM 2309399: SAPJup will create the service and later one deinstall it.
       ** It will then* fire MODPROF=FINISHED. This is where we pick up and deinstall
       ** the temporary service, modify the profiles and finally install the original
       ** service again.
    -->
                 
  <!-- (jo 710) Put back for 701 -->
  <phase name="SETSYNC_MODPROF_STARTED" password="YQQPHZXU">
       <!-- pwd: 83652 -->   
    <args>
      <arg>MODPROF</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (jo 710) Put back for 701 -->
  <phase name="GETSYNC_MODPROF_FINI" password="ATAUUVEP">
       <!-- pwd: 34051 -->   
    <args>
      <arg>MODPROF</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Wait for SAPJup event</action>
  </phase>
  <!-- (jo 720) Change instance number back -->
  <submoduleref name="SUBMOD_INSTNR_REV" password="SJICQLMB">
       <!-- pwd: 57708 -->   
    <options>
      <option name="CHANGE_INSTNR" />
    </options>
  </submoduleref>
  <!-- ************************************************************************ -->
  <phase name="UPDATE_DBSTATS_DB2_MODPROFP_UPG" password="YDDPUZKH">     <!-- pwd: 70121 -->
    <args>
      <arg>FILE</arg>
      <arg>bin</arg>
      <arg>DB2RUNPH.LST</arg>
      <arg>MODPROFP_UPG=</arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
        <option name="DBTYPE" value="DB2-z/OS" />
    </options>
  </phase>
  
  <!-- (hk 721) Only restore profiles, as the modification takes place after profile merge action -->
  <phase name="MODPROF_PUPG_RESTORE" logfile="auto" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <args>
      <arg></arg>
      <arg>ALLPROF</arg>
      <arg>RESTORE;PROFSTATE_RESET</arg>
    </args>
    <action>Restore profiles</action>
  </phase>
  
  <!-- (jo + hk 720) Moved this to immediately *after* MODPROF_PUPG and *before* java stuff
       ** Background: Java changes profiles below which might introduce contradictions
       **  between start and instance profile. So after having restored the profiles
       **  in 'MODPROF_PUPG' we now merge it as long as we can be sure they still
       **  match.
    -->
  <!-- (jo 710) Merges start profile into instance profile -->
  <!-- (jo) First restore the start profile name and then merge it again -->
  <phase name="MERGEPROF_PUPG" logfile="auto" password="SJVPQLMB">
       <!-- pwd: 97353 -->   
    <args>
      <arg>RESTORE_STARTPROFNAME;MERGE_BACKUP;REMOVE_STARTPROFILE</arg>
    </args>
    <options>
      <option name="MERGESTARTPROF" />
    </options>
    <action>Merges the start profile into the instance profile and removes the start profile</action>
  </phase>

  <!-- (hk 721) modify profiles after MERGEPROF to get rid of unwanted settings from STARTPROF backup -->
  <phase name="MODPROFP_UPG" logfile="auto" password="QWFAXPHU">
       <!-- pwd: 97943 -->   
    <args>
      <arg>ALPXPROD.XML</arg>
      <arg>ALLPROF</arg>
      <arg></arg>
    </args>
    <action>Modifies profiles for productive usage</action>
  </phase>

  <!-- ******************************************************************************** -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <phaselist>
      <phase name="MODDEF_APP2" logfile="MODDEF_APP.LOG" password="YAWZNZVG">
	   <!-- pwd: 79932 -->   
	<args>
	  <arg>2</arg>
	</args>
	<action>Appends Java parameters to the ALP files</action>
      </phase>
      <phase name="CHANGEPROF_JAPPD2" logfile="CHANGEPROF_JAPP.LOG" password="IRQAWFOZ">
	   <!-- pwd: 64616 -->   
	<args>
	  <arg>JAVA_ALPXDEF.XML</arg>
	  <arg>ALLPROF</arg>
	  <arg>OPTIONAL;VARDIR</arg>
	</args>
	<action>Modifies profiles as requested by SAPJup</action>
      </phase>
      <phase name="CHANGEPROF_JAPPI2" logfile="CHANGEPROF_JAPP.LOG" password="QOVSNPTA">
	   <!-- pwd: 67126 -->   
	<args>
	  <arg>JAVA_ALPXP.XML</arg>
	  <arg>ALLPROF</arg>
	  <arg>OPTIONAL;VARDIR</arg>
	</args>
	<action>Modifies profiles as requested by SAPJup</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- ******************************************************************************** -->
  <!-- (ps 710-3.11) use xml file for modifying start profile in HA scenario -->
  <!-- (ag 703) removed CHANGEPROF_HA_END, also start profiles have been restored, no manual deletion necessary -->
  <!-- (ps 710-4.11) use xml file for modifying start profile in HA scenario -->
  <phase name="CHANGEPROF_ALL_END" logfile="auto" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>ALPALLEND.XML</arg>
      <arg>STARTPROF</arg>
      <arg></arg>
    </args>
    <options>
      <option name="proddestvers" value="702-*" />
    </options>
    <action>deletes rslgcoll and rslgsend to central instance for the uptime</action>
  </phase>
  <!-- (jo 710) Generate 'sapcpe' call into profile
       Also changes DIR_EXECUTABLE and DIR_CT_RUN.
       (jo 720) Must also set DIR_EXECUTABLE + DIR_CT_RUN in instance profile! (IM 1639511 2011)
    -->
  <phase name="CHANGEPROF_PUPG" logfile="auto" password="IIVEBFVW">
       <!-- pwd: 66178 -->   
    <args>
      <arg>ALPCPE.XML</arg>
      <arg>STARTPROF;INSTANCEPROF</arg>
      <arg></arg>
    </args>
    <options>
      <option name="CONVKRN2SAPCPE" />
    </options>
    <action>Adds 'sapcpe' to profile</action>
  </phase>

  <!--  (jo) Fix for IM -->
  <phase name="CHANGEPROF_PMIG" logfile="CHGPRFPMIG.LOG" password="GAVULJPI">
    <!-- pwd: 89289 -->
    <args>
      <arg>ALPMIG2NDDB.XML</arg>
      <arg>ALLPROF</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </phase>

  <!-- (jo 720) Must come after CHANGEPROF_PUPG which deletes old 'sapcpe' entries -->
  <!-- (ag 730) jvm stuff will be handled by java upgrade in according JAVA_ALPCPE.XML -->
  <phase name="CHANGEPROF_JCPE" logfile="auto" password="SEFKNLNI">
       <!-- pwd: 32478 -->   
    <args>
      <arg>JAVA_ALPCPE.XML</arg>
      <arg>STARTPROF</arg>
      <arg>OPTIONAL;MIGDIR</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Modifies profiles as requested by SAPJup</action>
  </phase>
  <!-- (jo 710) Set gpv_newkernpath separately -->
  <phase name="KX_CHANGE_KRNPATH_PUPG" logfile="auto" password="AFCGWVMT">
       <!-- pwd: 33621 -->   
    <args>
      <arg>GETNEWKERNPATH</arg>
    </args>
    <action>Gets new kernel path</action>
  </phase>
  <!-- (jo 710) Generate database specific entries -->
  <!-- (hk 740) need to process instance before start profile -->
  <phase name="CHANGEPROF_DBPUPG" logfile="auto" password="AMBAVVVE">
       <!-- pwd: 12335 -->   
    <args>
      <arg>ALPDBDEP.XML</arg>
      <arg>INSTANCEPROF;STARTPROF</arg>
      <arg></arg>
    </args>
    <action>Adds database specific entries to profile</action>
  </phase>
  <!-- (jo 710) Moved AFTER MOD_INSTNR_POST / see IM 1664397 2007 -->
  <phase name="IGS_INST" logfile="auto" password="WJOGCDWP">
       <!-- pwd: 18134 -->   
    <args>
      <arg>NEW</arg>
    </args>
    <action>Unpacks the IGS to the kernel directory</action>
  </phase>
  <!-- (jo 710) Generate IGS start entry -->
  <!-- (jo 720) IM 1378079 2010: We merged the start profile from the backup, so we have to redo this! -->
  <!-- (hk SP3) IM  182941 2012: check IGS entry at original profile -->
  <phase name="CHANGEPROF_IGS" logfile="auto" password="KABYXBZW">
       <!-- pwd: 47366 -->   
    <args>
      <arg>ALPIGS.XML</arg>
      <arg>STARTPROF</arg>
      <arg></arg>
    </args>
    <action>Adjust IGS start entry at the profile</action>
  </phase>

  <!-- (jo 710) There is no KX_SWITCH phase following, so set kernel path -->
  <phase name="KX_CHANGE_PUPG" logfile="auto" password="YVGUKZWN">
       <!-- pwd: 68913 -->   
    <args>
      <arg>SETKERNPATH;REPLICATE</arg>
    </args>
    <action>Sets new kernel path and replicates the kernel</action>
  </phase>
  <!-- (jo 710) Requested by Ivan + Nikolay - only for NW 711 EHPI! -->
  <phase name="CHANGEPROF_J2EE" logfile="auto" password="IEDAJFBM">
       <!-- pwd: 40231 -->   
    <args>
      <arg>JAVA_ALPXP.XML</arg>
      <arg>INSTANCEPROF</arg>
      <arg>VARDIR</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
      <option name="ST_range" value="710-719" />
    </options>
    <action>Adds entries as requested by Java</action>
  </phase>

  <phase name="MOD_PFPAR_UPG" logfile="MODPFPAR.LOG" password="CHOKYROF">
       <!-- pwd: 81640 -->   
    <args>
      <arg></arg>
    </args>
    <action>Calls sappfpar for checking modified profile</action>
    <usage>if the next start failswe remember ...</usage>
  </phase>

  <!-- (jo 710) Now cleanup old kernel directory -->
  <submoduleref name="SUBMOD_INSTNR_CLEAN" password="QCGTLPLW">
    <!-- pwd: 13817 -->   
    <options>
      <option name="CHANGE_INSTNR" />
    </options>
  </submoduleref>

  <!-- (ag 703) end of move SEC_REG_INST and CHANGEPROF_CTC -->
  <!-- ************************************************************************ -->
  <!-- (jo 710) Moved here and changed as discussed with Ivan Ivanov CSN 4264968 2006 -->
  <phase name="SETSYNC_MODPROF_FINI" password="CRUUERMR">
       <!-- pwd: 34594 -->   
    <!-- (jo 710) IM 463203 2009 Also enable for 70X as requested by Ivan -->
    <args>
      <arg>MODPROF</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>

  <!-- ************************************************************************ -->
  <phase name="SETSYNC_POSTUP_START" password="OCDEFTTC">
       <!-- pwd: 13107 -->   
    <args>
      <arg>POSTUPTIME</arg>
      <arg>STARTED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="SETSYNC_LOCK_FINI" password="SANGVLTY">
       <!-- pwd: 63887 -->   
    <args>
      <arg>LOCK</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="SETSYNC_DOWN_FINI" password="QIHMZPPY">
       <!-- pwd: 28996 -->   
    <args>
      <arg>DOWNTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <phase name="GETSYNC_DOWN_FINI" password="KVYGUBAD">
       <!-- pwd: 66191 -->   
    <args>
      <arg>DOWNTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- ************************************************************************ -->
  <phase name="MODPROF_DIAG" logfile="MODPROF_DIAG.LOG" ignorable="true" password="YXPJGZGF">
       <!-- pwd: 55238 -->   
    <args>
      <arg>ALPXPROD.XML</arg>
      <arg>ALLPROF</arg>
      <arg>DIAGINST</arg>
    </args>
    <action>Update dialog instance profiles</action>
  </phase>
  <phase name="MODPROF_DUALDIAGDEF" logfile="MODPROF_DIAG.LOG" ignorable="true" password="SNNTILGL">
       <!-- pwd: 18802 -->   
    <args>
      <arg>JAVA_ALPXDEF.XML</arg>
      <arg>DEFAULTPROF</arg>
      <arg>DUALDIAGINST;OPTIONAL;VARDIR</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Update dialog instance default profiles</action>
  </phase>
  <phase name="MODPROF_DUALDIAGINST" logfile="MODPROF_DIAG.LOG" ignorable="true" password="EHEMENGZ">
       <!-- pwd: 66195 -->   
    <args>
      <arg>JAVA_ALPXP.XML</arg>
      <arg>INSTANCEPROF</arg>
      <arg>DUALDIAGINST;OPTIONAL;VARDIR</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Update dialog instance profiles</action>
  </phase>
  <!-- (ps 710-1.55) Use generated script instead of fixed one -->
  <phase name="SQLDB_D1GENCLEAN" logfile="auto" password="GAVULJPI">
       <!-- pwd: 89289 -->   
    <args>
      <arg>D1GENCLEAN</arg>
      <arg></arg>
    </args>
    <options>
      <option name="realdestvers" value="702-709,730-*" />
    </options>
    <action>Enables anticipating generation</action>
  </phase>

  <!-- (ag 730) Do install the service again, this time with the correct instance number (double stack uglyness) -->
  <phase name="WINSRV_INST_SRV" logfile="auto" password="IIIRBFVW">
    <!-- pwd: 92863 -->
    <args>
      <arg>install</arg>
      <arg>std</arg>
      <arg>start</arg>
    </args>
    <options>
      <option name="OSTYPE" value="Windows" />
      <option name="CHANGE_INSTNR" />
    </options>
    <action>Installs service for sysnum switch</action>
  </phase>

</phaselist>
</module>

 <!-- ******************************************************************* -->
    <module name="MAIN_UPTRANS" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Transition to uptime</description>
      <options>
        <not> <option name="ZERODOWNTIME_UPG"/> </not>
      </options>
      <postevent>MODULE_INIT(MAIN_POSTPROC)</postevent>
      <revokemodule>REV_MAINUPTRANS</revokemodule>

      <password>QHWYOPKP</password>
      <!--  pwd: 36419  -->
      <precedences>
        <precedence>MAIN_TRANSEXEC</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINUpTrans.xml#46 $">
  <!-- ************************************************************ -->
  <!-- E N D O F D O W N T I M E -->
  <!-- ************************************************************ -->
  <!-- (hk SUM SP3) manual action for ASCS instance -->
  <phase name="REQ_ASCS_SWITCH" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>ReqASCSSwitch</arg>
      <arg></arg>
    </args>
    <options>
      <option name="WITH_HAREMOTE" />      
    </options>
    <action>Request manual actions for ASCS instance</action>
  </phase>

  <phase name="PREP_DMPSPC_DB4_END" logfile="PREP_DMPSPC_DB4_END.LOG" password="GBTVWJUR">
    <!-- pwd: 59052 -->   
    <options>
      <option name="DBTYPE" value="DB2/400" />
    </options>
    <args>
      <arg>END</arg>
    </args>
    <action>Prepare data collection for phase DMPSPC_END</action>
  </phase>

  <!--  If we come from releases below 700, we can't install a new license, but
	the 740 and higher kernels no longer consume the old ones.
    -->
  <phase name="INSTTEMPLIC_PUPG" logfile="INSTTEMPLICPUPG.LOG" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>USEMSGHWKEY;IGNERR</arg>
    </args>
    <options>
      <option name="ST_range" value="*-640" /> 
      <option name="krnexerel" value="740-*" />
    </options>
    <action>Creates a temporary license for the uptime in case of 740 kernel</action>
  </phase>

  <!-- (jo 710) Enable archive mode as well -->
  <phase name="STARTSAP_PUPG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>UPCOND;UNLOCK;ARCHMODE;START_SERVICE;RESTART_SERVICES;ALL;ACCEPT_JAVA_FAIL</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts SAP system</action>
  </phase>

  <!-- (hk SP11) enable MS Cluster failover after system restart (IM 579033 2014) -->
  <!-- (ag SP09) manual action for ASCS instance for windows cluster -->
  <phase name="REQ_ASCS_SWITCH_CLUSTER" password="OCDEFTTC">
    <!-- pwd: 74999 -->
    <args>
      <arg>ReqASCSSwitchCluster</arg>
      <arg></arg>
    </args>
    <options>
      <option name="IS_WINCLUST" />
    </options>
    <action>Request manual actions for ASCS instance</action>
  </phase>
  
  <!-- (af 721, SUM SP12), hk: moved after last SAP start -->
  <!-- (jo 710) Use RFC provided by Kurt Solomka to upload new profiles -->
  <phase name="REFRESH_PROFILES" ignorable="true" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>INSTANCEPROF;STARTPROF;DEFAULTPROF</arg>
    </args>
    <options>
      <option name="feature_switch" value="upload_profiles" />
    </options>
    <action>Uploads new profiles to ABAP system</action>
  </phase>

  <!--  needs to run after STARTSAP_PUPG to remove temporary OS_UNICODE parameter -->
  <!--  rename CHANGEPROF phase to allow phase after STARTSAP -->
  <phase name="UCMIGPROF_END" logfile="auto" password="IKETXFFO">
       <!-- pwd: 19932 -->   
    <args>
      <arg>ALPUCMIGEND.XML</arg>
      <arg>DEFAULTPROF</arg>
      <arg></arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Modifies profiles for unicode migration</action>
  </phase>

  <!-- **************************************************************************** -->
  <!-- (jo 710) Announce end of downtime. This must be the last phase of this module!!  -->
  <phase name="UPCONF" logfile="UPCONF.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg></arg>
    </args>
    <action>Announces end of the downtime</action>
  </phase>
</phaselist>
</module>

  <!-- ******************************************************************* -->
    <!-- ******************************************************************* -->
    <module name="MAIN_POSTPROC" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Post Processing</description>
      <postevent>MODULE_INIT(MAIN_POSTCLEAN)</postevent>
      <revokemodule>REV_MAINPOSTPROC</revokemodule>

      <password>QHWYOPKP</password>
      <!--  pwd: 36419  -->
      <precedences>
        <precedence>MAIN_UPTRANS</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINPostProc.xml#199 $">
  <!-- ************************************************************ -->
  <!-- Post processing -->
  <!-- ************************************************************ -->

  <phase name="SETUPGPAR_UPG_POST" logfile="SETUPGPAR.LOG" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <args>
      <arg>SET</arg>
      <arg>UPG_STATE=UPG_POSTPROC</arg>
    </args>
    <action>Set parameter for post processing</action>
  </phase>

  <!-- (hk + sr 721) after discussion with b.diekmann+k.braun:
  SYBASE needs database statistics for shadow load tables (e.g. D010INC)
  which are truncated at phase SQLSELEXE_TRUNCSHDLOADS -->
  <phase name="UPDATE_DBSTATS_SYB_LOADTABLES_SHD" password="YDDPUZKH">     <!-- pwd: 70121 -->
    <args>
      <arg>SCRCLASSID</arg>
      <arg>LOADTABLES_SHD</arg>
      <arg>TABNAME</arg>
      <arg></arg>
      <arg>ONLINE_AFTER_IMPORT</arg>
    </args>
    <options>
        <option name="HASSHADOW" />
        <option name="DBTYPE" value="SYBASE" />
    </options>
  </phase>
  <!--  (jo 720) Moved to after downtime  -->
  <phase name="SQLDB_TRUNCATE_DDXTF" logfile="TRUNC_DDXTF.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <args>
      <arg>TRUNCATE_DDXTF</arg>
      <arg></arg>
    </args>
    <action>Empties table DDXTF</action>
  </phase>

  <!-- (jo 720) On request of Lutz Brunnabend: Calls AIM (Otto Boehrer + Wieland Hoprich)  -->
  <phase name="RUNASYN_RSTRCONUPD" logfile="RSTRCONUPD.LOG" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <args>
      <arg>RSTRCONUPD</arg>
      <arg></arg>
      <arg>Calls AIM</arg>
    </args>
    <options>
      <option name="realdestvers" value="731-*" />
    </options>
    <action>Calls AIM</action>
  </phase>

 <!--  Import deletion buffer if it exists - disabled due to issues in applications using the FuBa UPGI22_GET_SINGLE_COMPREL -->
  <phase name="TOOLIMP_TOOLDEL" password="EXLPYNIN">
       <!-- pwd: 83154 -->
    <args>
      <arg>TOOLDEL.BUF</arg>
      <arg>TABIMREDUCE.TP0</arg>
      <arg></arg>
      <arg>optionalbuffer</arg>
    </args>
    <options>
      <not><option name="ZERODOWNTIME_UPG" /></not>
    </options>
    <action>Deletes upgrade tools</action>
  </phase>

  <phase name="SQLDB_UPDATE_TIMESTAMP_E070" logfile="UPDATE_TIMESTAMP_E070.LOG" password="ADGEAVCB">
       <!-- pwd: 64513 -->
    <args>
      <arg>UPDATE_TIMESTAMP_E070</arg>
      <arg></arg>
    </args>
    <options>
    	<not><option name="MODE" value="EXPORT" /></not>
    </options>
    <action>Updates E070 Timestamp</action>
  </phase>
  <phase name="RUN_ENHUPGPHASE" logfile="ENHUPGPHASE.LOG" elgfile="ENHUPGPHASE.ELG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
      <arg>ENHUPGPHASE</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>ENHUPGPHASE\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Prepare enhancements for SPAU</arg>
    </args>
    <options>
      <option name="realdestvers" value="702,731-*" />
    </options>
    <action>Prepare nested enhancement support</action>
  </phase>
  <!-- extracted from SPAUINFO to avoid the problem, that customers call SPAU too early -->
  <phase name="RUN_RSUMOD10_SPAU" logfile="AMODSPAU.LOG" elgfile="AMODSPAU.ELG" password="SJVPQLMB">
       <!-- pwd: 97353 -->
    <args>
      <arg>RSUMOD10</arg>
      <arg>SAP_UPG_SPAU</arg>
      <arg>NO-IGNORE</arg>
      <arg>AMODPROT\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>MOD CLASSIFICATION</arg>
    </args>
    <action>SPAU preparation: Classify modified objects</action>
  </phase>

  <!-- ak 11/2013 -->
  <phase name="JOB_UPGMODEHPI" logfile="auto" elgfile="auto" password="EASFFNXO">
       <!-- pwd: 78049 -->
    <args>
      <arg>UPGMODEHPI</arg>
      <arg>SAP&amp;_RE_ENABLE</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPGMODEHPI_R\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>RE-ENABLE CMOD FUNCS</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="feature_switch" value="cmod_disabling" />
      <not>
        <option name="NOSTACKFILE" value="TRUE" />
      </not>
    </options>
    <action>Re-enable all CMOD function modules in BASIS previously disabled</action>
  </phase>

  <phase name="JOB_ZUPGMODEHPI_VERIFY" logfile="auto" elgfile="auto" password="EASFFNXO" continue_on_oq_errors="true">
       <!-- pwd: 78049 -->
    <args>
      <arg>ZUPGMODEHPI_VERIFY</arg>
      <arg>SAP&amp;_CHECK_REN</arg>
      <arg>NO-IGNORE</arg>
      <arg>ZUPGMODEHPI_VERIFY_R\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Check RE-ENABLE CMOD FUNCS</arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
      <option name="feature_switch" value="/fa/cmod_check" />
      <option name="feature_switch" value="cmod_disabling" />
      <not>
        <option name="NOSTACKFILE" value="TRUE" />
      </not>
    </options>
    <action>Check Re-enablement of CMODs</action>
  </phase>

  <!-- (cv 05/12) -->
  <phase name="JOB_UPGMODUPD" logfile="UPGMODUPD.LOG" elgfile="UPGMODUPD.ELG" password="YAWZNZVG">
       <!-- pwd: 79932 -->
    <args>
      <arg>UPGMODUPD</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>UPGMODUPD\.$(SAPSID)</arg>
      <arg>0</arg>
      <arg>Activate customer exits</arg>
    </args>
    <action>Activate customer exits</action>
  </phase>

  <phase name="SUCCCHK_END" password="SEFKNLNI">
       <!-- pwd: 32478 -->
    <args>
      <arg>CHECK_SIDBUFFER;CHECK_CVERS;CHECK_DESTVERS</arg>
    </args>
    <action>Tests target version</action>
  </phase>

  <!-- ****************************************************************************** -->
  <!-- (jo + cv) New putstatus "F" to enable transporting again for "tp"  -->
  <phase name="UVERS_UP_F" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg>F</arg>
      <arg></arg>
    </args>
    <action>Changes the status in table UVERS</action>
  </phase>

  <phase name="INSTPERMLIC" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg></arg>
    </args>
    <action>Installs the permanent SAP license after the migration to SAP Hana</action>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </phase>

  <submoduleref name="SUBMOD_MIG_BI_TASKS_POSTP1" password="YDDPUZKH">
    <!-- pwd: 70121 -->
    <options>
      <or>
	<option name="MIGRATE_OPTION" value="BWTASKS:640" />
	<option name="MIGRATE_OPTION" value="BWTASKS" />
      </or>
    </options>
  </submoduleref>
  <phase name="RUN_CUBE_INDEX_ADJUST" password="CMRCBRNY" ignorable="true" >
    <!-- pwd: 65164 -->
    <args>
      <arg>RS_UPG_TOOL_HMW</arg>
      <arg>SAP_CUBINDADJ=SAP_DMOBW(TASK=CUBE_INDEX_ADJUST)</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPG_CUBE_INDEX_ADJUST\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>CUBE INDEX ADJUST</arg>
    </args>
    <action>Cube index adjust</action>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </phase>

  <phase name="UVERS_UP_END" password="IEDAJFBM">
       <!-- pwd: 40231 -->
    <args>
      <arg>+</arg>
      <arg></arg>
    </args>
    <action>Changes the status in table UVERS</action>
  </phase>

  <!-- (stm 610.2.01) table space measurements -->
  <phase name="DMPSPC_END" logfile="DMPSPC_END.LOG" password="CHOKYROF">
       <!-- pwd: 81640 -->
    <args>
      <arg></arg>
      <arg>DMPSPC_END.FRE</arg>
      <arg>DMPSPC_END.ALL</arg>
      <arg>table space sizes at END</arg>
    </args>
    <action>Saves database size after the upgrade</action>
  </phase>

  <!-- ***************************************************************************** -->
  <!-- ******** P R E S E N T T O D O ' S F O R T H E U S E R -->
  <!-- ***************************************************************************** -->
  <!-- (gr 46B.01) JOB_BTCTRNS2 replaced by REQJOBRES -->
  <phase name="REQJOBRES" password="SUMNHLPW">
       <!-- pwd: 94221 -->
    <args>
      <arg>ReqJOBRes</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <action>Prompts you to schedule background jobs</action>
    <usage>Reschedule background jobsif necessary</usage>
  </phase>

    <submoduleref name="SUBMOD_MIG_BI_TASKS_POSTP2" password="YDDPUZKH">
      <!-- pwd: 70121 -->
      <options>
	<option name="MIGRATE_OPTION" value="BWTASKS" />
      </options>
    </submoduleref>

  <phase name="REQ_BBPCRM" password="EWIWUCUS">
       <!-- pwd: 9911 -->
    <!-- (jo 720) Only for real CRM systems, not SOLMAN (IM 2368634 2010) -->
    <args>
      <arg>ReqBBPCrm1</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <option name="fullprodtype" value="CRM" />
    </options>
    <action>Prompts for post upgrade activities</action>
    <usage>Prompts for post upgrade activities</usage>
  </phase>
  
  <!-- (ms SP 12) Sasan Memar-Zahedani requests for manual adaptions in table HTTPURLLOC because of incompatible change (note 1951685) -->
  <phase name="REQNOTE1951685" password="SUMNHLPW">
    <!-- pwd: 94221 -->
    <args>
      <arg>ReqNote1951685</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <option name="startcomponent" value="SAP_BASIS(*-730,731(*-10),740(*-5))"/>
      <option name="destcomponent" value="SAP_BASIS(731(11-*),740(6-*),741-*)"/>
    </options>
    <action>Prompts you to read SAP note 1951685</action>
    <usage>Prompts you to read SAP note 1951685</usage>
  </phase>

  <!-- (ps.Ehp07.710) Update Puttype of UVERS, for EhP only -->
  <phase name="SQLDB_UVERSTYPE" logfile="UVERSTYPE.LOG" password="QOIFNPTA">
       <!-- pwd: 33718 -->
    <args>
      <arg>UVERSTYPE</arg>
      <arg></arg>
    </args>
    <options>
      <option name="MODE" value="CLONE" />
    </options>
    <action>Changes the puttype in UVERS from S to P</action>
  </phase>
  <phase name="REQ_POST_ASU_RUN" password="CRUUERMR">
       <!-- pwd: 34594 -->
    <args>
      <arg>ReqASUPost</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <option name="ASU_ONLY" />
    </options>
    <action>ASU: Requests the start of the ASU toolbox</action>
  </phase>
  <phase name="REQSTARTSRV" password="OCDEFTTC">
       <!-- pwd: 13107 -->
    <args>
      <arg>ReqStartSrv</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <not><option name="OSTYPE" value="OS/400" /></not>
      <not>
        <and>
          <option name="OSTYPE" value="Windows" />
          <option name="condition" value="$(HOSTAGENT_INSTALLED) ge 1" />
        </and>
      </not>
      <option name="ST_range" value="*-640" />
    </options>
    <action>Refers to note for installation of SAP start server</action>
    <usage>Confirm</usage>
  </phase>
  <phase name="REQGENLD" password="SANGVLTY">
       <!-- pwd: 63887 -->
    <args>
      <arg>ReqGenLD</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <!-- (af 700.08) -->
    <options>
      <option name="sgen_mode" value="none" />
    </options>
    <action>Prompts you to start transaction SGEN</action>
    <usage>Confirm</usage>
  </phase>
  <phase name="REQ_SPLIT_ASCS" password="SANGVLTY">
       <!-- pwd: 63887 -->
    <args>
      <arg>ReqSplitASCS</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <option name="realdestvers" value="730-*" />
      <not><option name="IS_HA" /></not>
    </options>
    <action>Prompts you to install ASCS instance</action>
    <usage>Confirm</usage>
  </phase>
  <phase name="REQ_INSTALL_PERMLICENSE" password="SANGVLTY">
    <!-- pwd: 63887 -->
    <args>
      <arg>ReqInstallPermLicense</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <option name="INSTALL_PERMLICENSE" />
    </options>
    <action>Prompts you to install permanent license</action>
    <usage>Confirm</usage>
  </phase>
<!-- ***************************************************************************** -->
  <submodule password="KRGCCBGT" execparallel="true">
    <!--   cv   -->
    <phaselist>
      <phase name="JOB_RDDDBSTA" logfile="PDDDBSTA.LOG" elgfile="PDDDBSTA.ELG" password="QIHMZPPY">
           <!-- pwd: 28996 -->
        <args>
          <arg>RDDDBSTA</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RDDDBSTA\.$(SAPSID)</arg>
          <arg>10</arg>
          <arg>Preparing update of database statistics</arg>
        </args>
        <action>Updates database table statistics</action>
      </phase>
      <!-- (cv 700.06 moved to this point) -->
      <!-- (ps 640-2.49) -->
      <phase name="JOB_RASUVAR2" logfile="PASUVAR2.LOG" ignorable="true" elgfile="PASUVAR2.ELG" password="KVYGUBAD">
           <!-- pwd: 66191 -->
        <args>
          <arg>RASUVAR2</arg>
          <arg></arg>
          <arg>IGNORE</arg>
          <arg>RASUVAR2\.$(SAPSID)</arg>
          <arg>20</arg>
          <arg>restore variants</arg>
        </args>
        <!-- (jo 710) Discussion with Christian Gaertner: CSS note 1052664 needs ignore possibility -->
        <options>
          <option name="SAVE_VARIANTS" />
        </options>
        <action>Restore saved variants</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- (af 700.08) combined Upgrade and Unicode Conversion -->
  <!-- Set TRDIR-RLOAD from TADIR-MASTERLANG -->
  <phase name="JOB_UM4_FILL_RLOAD" logfile="UM4_FILL_RLOAD.LOG" elgfile="UM4_FILL_RLOAD.ELG" password="YXPJGZGF">
       <!-- pwd: 55238 -->
    <args>
      <arg>UM4_FILL_RLOAD</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>UM4_FILL_RLOAD\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>FILL TRDIR-RLOAD</arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
      <!--  (jo 720) Not needed since migration was done before  -->
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
    <action>UCCNV: Fills TRDIR-RLOAD</action>
  </phase>
  <phase name="CHK_POSTUP" password="SNNTILGL">
       <!-- pwd: 18802 -->
    <args>
      <arg>LONGPOST.LOG</arg>
    </args>
    <action>Displays P errors</action>
    <usage>Correct P errors before you start production operation</usage>
  </phase>

  <!-- WH10: ermittle Arbeitsvorrat von SGEN -->
  <phase name="RUN_RSREGENLOD" logfile="RSREGENLOD.LOG" elgfile="RSREGENLOD.ELG" password="YLAKEZYB">
       <!-- pwd: 80490 -->
    <args>
	  <arg>RSGEN_LOAD_SHADOW</arg>
	  <arg>SAP_REGENLOD</arg>
	  <arg>NO-IGNORE</arg>
	  <arg>RSREGENLOD\.$(SAPSID)</arg>
	  <arg>10</arg>
	  <arg>Refill GENSETM</arg>
	</args>
	<options>
	  <option name="sgen_mode" value="full" />
	</options>
	<action>Refill GENSETM</action>
  </phase>

  <!-- WH10: Restart Load-Generation -->
  <phase name="RUNASYN_RSREGEN" logfile="RSREGEN.LOG" password="WJOGCDWP">
       <!-- pwd: 45107 -->
    <args>
      <arg>RSGEN_GENER8_SHADOW</arg>
      <arg>SAP_SGEN</arg>
      <arg>Generate Program Loads</arg>
    </args>
    <options>
      <option name="sgen_mode" value="full" />
    </options>
    <action>Generate Program Loads</action>
  </phase>

  <phase name="SPAUINFO" password="YDDPUZKH">
       <!-- pwd: 70121 -->
    <action>Displays information on adjusting objects with transaction SPAU</action>
    <usage>Confirm</usage>
  </phase>
  <!-- Modification Export SPDD with SAPCOMPONENT attribute -->
  <phase name="RUN_UPGRESETREPFLAG_SPDD" logfile="RRPFSPDD.LOG" elgfile="RRPFSPDD.ELG" password="GRNLQJWF">
       <!-- pwd: 25431 -->
    <args>
      <arg>UPG_RESETREPFLAG</arg>
      <arg>SPDD</arg>
      <arg>CHECKEXISTS</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>Reseting repair flag of objects in SPDD request</arg>
    </args>
    <action>Reset repair flag of objects in SPDD request</action>
    <options>
      <and>
        <option name="realdestvers" value="731-*" />
        <option name="condition" value="'$(SPDDTRANSPORT)' != ''" />
      </and>
    </options>
  </phase>
  <phase name="UEXP_SPDD" logfile="UEXPSPDD.LOG" elgfile="UEXPNEWSPDD.ELG" password="WFJPKDCF">
       <!-- pwd: 27637 -->
    <args>
      <arg>SPDD</arg>
      <arg></arg>
    </args>
    <options>
      <option name="realdestvers" value="731-*" />
    </options>
    <action>Exports any objects adjusted with transaction SPDD</action>
  </phase>
  <!-- Modification Export SPAU with SAPCOMPONENT attribute -->
  <phase name="RUN_UPGRESETREPFLAG_SPAU" logfile="RRPFSPAU.LOG" elgfile="RRPFSPAU.ELG" password="CYOWKGMQ">
       <!-- pwd: 2600 -->
    <args>
      <arg>UPG_RESETREPFLAG</arg>
      <arg>SPAU</arg>
      <arg>CHECKEXISTS</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>Reseting repair flag of objects in SPAU request</arg>
    </args>
    <action>Reset repair flag of objects in SPAU request</action>
    <options>
        <option name="condition" value="'$(SPAUTRANSPORT)' != ''" />
    </options>
  </phase>
  <phase name="UEXP_SPAU" logfile="UEXPSPAU.LOG" elgfile="UEXPNEWSPAU.ELG" password="GBTVWJUR">
       <!-- pwd: 59052 -->
    <args>
      <arg>SPAU</arg>
      <arg></arg>
    </args>
    <action>Exports any objects adjusted with transaction SPAU</action>
  </phase>

  <!-- (af 700.08) combined Upgrade and Unicode Conversion -->
  <!-- Fill tables DDNTT/F_CONV_UC from inactive NT -->
  <phase name="RUN_RADCUCNT_NEW" logfile="RADCUCNTNEW.LOG" elgfile="RADCUCNTNEW.ELG" password="WMVWJDLQ">
	<!-- pwd: 37086 -->
	<args>
	  <arg>RADCUCNTUPG</arg>
	  <arg>SAP_CUUC_NEW</arg>
	  <arg>IGNORE</arg>
	  <arg>RADCUCNTNEW\.$(SAPSID)</arg>
	  <arg>10</arg>
	  <arg>Generate Unicode NTs changed since the last generation</arg>
	</args>
	<options>
	  <option name="UCMIG_INTEGRATED" />
	  <!--  (jo 720) Not needed since migration was done before  -->
	  <not><option name="MIGRATE_SECONDDB" /></not>
	</options>
	<action>Generates the Unicode NTs from the inactive shadow NT</action>
  </phase>

  <!-- (af 700.08) Info: Unicode Conversion needed (obligatory) -->
  <phase name="REQ_UCCNV_OBL" password="CZZKVGRZ">
    <!-- pwd: 6418 -->
    <args>
      <arg>ReqUCCNVobl</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <option name="UCMIG_NEEDED" />
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
    <action>Info: Unicode Conversion needed (obligatory)</action>
  </phase>
  <!-- (af 700.08) Info: Unicode Conversion possible (optional) -->
  <phase name="REQ_UCCNV_OPT" password="IAYJRFHC">
    <!-- pwd: 17253 -->
    <args>
      <arg>ReqUCCNVopt</arg>
      <arg>ECHOCHECKSLOG</arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
      <not><option name="UCMIG_NEEDED" /></not>
      <not><option name="MIGRATE_SECONDDB" /></not>
    </options>
    <action>Info: Unicode Conversion possible (optional)</action>
  </phase>
  <!--  Tino Rosenkranz: Prepare objects for rescue check  -->
  <phase name="JOB_UPG_RESC_CHECK_RUN" password="YOHALZNC">
       <!-- pwd: 57484 -->
    <args>
      <arg>UPG_RESC_CHECK_RUN</arg>
      <arg></arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_RESC_CHECK_RUN.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>object rescue verification</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/object_rescue" />
      <!-- <option name="ST_range" value="600-*" /> -->
    </options>
  </phase>

  <!-- (mh 620/4) automatic checks -->
  <phase name="RUN_SUPPACKS_END" logfile="RDDDIC30.LOG" elgfile="RDDDIC30.ELG" password="YHIGMZER">
       <!-- pwd: 70598 -->
    <args>
      <arg>RDDDIC30</arg>
      <arg>SAP_PACK</arg>
      <arg>IGNORE</arg>
      <arg>ACHKPACK\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>Generation of saved support package objects</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/saveobjs" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Generation of saved objects: Support packages</action>
  </phase>
  <phase name="RUN_ADDONS_END" logfile="RDDDIC30.LOG" elgfile="RDDDIC30.ELG" password="MBCOOXWZ">
       <!-- pwd: 73324 -->
    <args>
      <arg>RDDDIC30</arg>
      <arg>SAP_ADDON</arg>
      <arg>IGNORE</arg>
      <arg>ACHKADDON\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>Generation of saved addon objects</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/saveobjs" />
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Generation of saved objects: Addons</action>
  </phase>
  <phase name="FATST_SPP_PREP" logfile="FASPPPREP.LOG" password="MEJEVXLA">
       <!-- pwd: 68057 -->
    <options>
      <option name="feature_switch" value="/fa/spp_test" />
    </options>
    <action>Preparations for phase FATST_SPP_RUN</action>
  </phase>
  <phase name="JOB_RDDPUTX1" logfile="RDDPUTX1.LOG" elgfile="RDDPUTX1.ELG" password="YAWZNZVG">
       <!-- pwd: 96861 -->
    <args>
      <arg>RDDPUTX1</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RDDPUTX1\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>Checks consistency of transports</arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/db02chk" />
    </options>
    <action>Runs transport like consistency check</action>
  </phase>
  <!-- default phase -->
  <phase name="FATST_SPP_RUN" elgfile="FASPPGEN.ELG" password="WHFRGDMX">
       <!-- pwd: 23394 -->
    <args>
      <arg>FASPPGEN.BUF</arg>
      <arg>FASPPGEN.TP0</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/spp_test" />
    </options>
    <action>Automated final assembly test for support packages</action>
  </phase>

  <phase name="SAVEPRO" logfile="SAVEPRO.LOG" password="SQHWPLVM">
       <!-- pwd: 87281 -->
    <action>Copies control files to /usr/sap/put/save</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  <!-- (af 700.08) Combine upgrade and Unicode Conversion? -->
  <!-- Status: "upgrade finished" -->
  <phase name="UCMIG_STATUS_SET4" logfile="UCMIGSETSTAT4.LOG" password="YGXSBZZI">
       <!-- pwd: 92511 -->
    <args>
      <arg>4</arg>
    </args>
    <options>
      <option name="UCMIG_INTEGRATED" />
    </options>
    <action>Set status for combined Upgrade and Unicode Conversion</action>
  </phase>
  <submoduleref name="SUBMOD_BRIDGE_POSTPROC" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <options>
      <option name="ZERODOWNTIME_UPG" />
    </options>
  </submoduleref>
  
  <!-- hk SUMSP13: needs to run after Bridge Cleanup (MVNTAB_DEL) -->
  <!-- cv 020708: added fix report to fix several inconsistencies -->
  <phase name="JOB_RSFIXUPG" logfile="RSFIXUPG.LOG" elgfile="RSFIXUPG.ELG" password="EHEMENGZ">
       <!-- pwd: 66195 -->
    <args>
      <arg>RSFIXUPG2</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg>RSFIXUPG2\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>FIX INCONSISTENCIES</arg>
    </args>
    <action>Remove inconsistencies</action>
    <options>
      <or>
  <option name="realdestvers" value="730-*" />
  <option name="MODE" value="CLONE" />
        <option name="MODE" value="TRANSPORT" />
      </or>
    </options>
  </phase>
  <!--  (jo 720) Make it work for 702 export  -->
  <phase name="JOB_RSFIXUPG_OLD" logfile="RSFIXUPG.LOG" elgfile="RSFIXUPG.ELG" password="GAVULJPI">
       <!-- pwd: 89289 -->
    <args>
      <arg>RSFIXUPG</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>FIX INCONSISTENCIES</arg>
    </args>
    <action>Remove inconsistencies</action>
    <options>
      <not><option name="realdestvers" value="730-*" /></not>
      <not><option name="MODE" value="CLONE" /> </not>
      <not><option name="MODE" value="TRANSPORT" /> </not>
    </options>
  </phase>
  
  <!-- (jo 620.25) -->
  <phase name="RUN_RSDB02CK_END_DMO" logfile="RSDB02CK.LOG" elgfile="RSDB02CK.ELG" password="MQLQXXTE">
       <!-- pwd: 91684 -->
    <args>
      <arg>RSDB02CK</arg>
      <arg>SAP_GET_END</arg>
      <arg>IGNORE</arg>
      <arg>RSDB02EN\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>DB02 consistency check</arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Runs DB02 like consistency check</action>
  </phase>
  <phase name="SETSYNC_POSTUP_FINI" password="IBWKCFML">
       <!-- pwd: 58871 -->
    <args>
      <arg>POSTUPTIME</arg>
      <arg>FINISHED</arg>
    </args>
    <options>
      <option name="HASREQ" value="J2EE" />
    </options>
    <action>Signal event to SAPJup</action>
  </phase>
  <!-- (af 721, SUM SP12) -->
  <phase name="REQUPFINAL" password="SUMNHLPW">
       <!-- pwd: 94221 -->
    <args>
      <arg>ReqUptimeFinal</arg>
      <arg></arg>
    </args>
    <action>Announces begin of uptime (without any restriction)</action>
  </phase>
</phaselist>
</module>


    <!-- ******************************************************************* -->
    <module name="MAIN_POSTCLEAN" type="upgrade" mandatory="yes" uniqueexec="yes">
      <description>Final cleanup</description>
      <postevent>CHANGE_STATUS(COMPLETED)</postevent>
      <revokemodule>REV_MAINPOSTCLEAN</revokemodule>

      <password>QHWYOPKP</password>
      <!--  pwd: 36419  -->
      <precedences>
        <precedence>MAIN_POSTPROC</precedence>
      </precedences>
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMAINPostClean.xml#31 $">
  <!-- ************************************************************ -->
  <!-- Post cleanup -->
  <!-- ************************************************************ -->
  <!-- (jo 720) After discussion with Wieland: Must come after PARCONV_UPG since then UUID's are generated! -->
  <!-- (jo 710) Drop unique index, see IM 4737668 2008 -->
  <phase name="SQLDB_DDNTT_DROP_UUID" logfile="DDNTT_DRUUID.LOG" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <!-- (jo 710) For all DB's now and also for customers! -->
    <args>
      <arg>DDNTT_DROP_UUID</arg>
      <arg></arg>
    </args>
    <action>Drops unique index on shadow nametab (field UUID)</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  <!--  (jo + ft) Drop DDNTT~ etc.  -->
  <phase name="SQLSELEXE_DROPFLIP" logfile="SELEXEDROPFLIP.LOG" password="IRQAWFOZ">
    <!-- pwd: 64616 -->
    <args>
      <arg>MIGRATE_FLIPTABS</arg>
      <arg>DROP_TABLES</arg>
      <arg>SCRCLASSID;FULLPUTTBSHD;MAP:NAME=$$(LIST@TABNAME)$(SUBSTEXT)</arg>
    </args>
    <options>
      <option name="MIGRATE_SECONDDB" />
    </options>
  </phase>
  <!-- (mh 620-3.05) truncate table DDXTT/F_CONV_UC for Unicode conversion -->
  <phase name="SQLDB_DDXTT_TRUNC_CONV_UC" logfile="DDXTT_CONV_UC.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->
    <args>
      <arg>TRUNC_DDXTT_CONV_UC</arg>
      <arg></arg>
    </args>
    <action>Cleans tables for unicode conversion</action>
  </phase>
  <!-- (ps 640-2.50) truncate table DDNTT/F_CONV_UC for Unicode conversion also in case NonUnicode! -->
  <phase name="SQLDB_DDNTT_TRUNC_CONV_UC" logfile="DDNTT_CONV_UC.LOG" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <args>
      <arg>TRUNC_DDNTT_CONV_UC</arg>
      <arg></arg>
    </args>
    <!-- (af 700.08) -->
    <options>
      <not><option name="UNICODE_only" /></not>
      <not><option name="UCMIG_INTEGRATED" /> </not>
    </options>
    <action>Cleans tables for unicode conversion</action>
  </phase>
  <submodule password="KRGCCBGT">
    <options>
        <option name="HASTRTYPE" value="TR_CUSTOMER" />
        <option name="CHARM" value="TRUE" />
    </options>
    <phaselist>
        <phase name="TR_MERGELOGS" logfile="MERGELOGS.LOG" elgfile="MERGELOGS.ELG" ignorable="true" password="IQSZLFJQ">
            <!-- pwd: 66000 -->
            <args>
                <arg>TP_MERGELOGS</arg>
                <arg>XPRASUPG_CUST.BUF</arg>
            </args>
            <action>Merges customer transport cofiles and logs to transport directory</action>
        </phase>
        <phase name="COPYTRLOGS" ignorable="true" password="UFOVLWBZ">
            <!-- pwd: 6948 -->
            <action>Copies general transport logs to transport directory</action>
        </phase>
    </phaselist>
  </submodule>
  <!-- (jo 710) Clean up old status table from RSINDCHK + RSINDCRE to make RESET work properly -->
  <phase name="SQLDB_CLEANINDCRE2" logfile="CLEANINDCRE.LOG" password="IIVEBFVW">
       <!-- pwd: 66178 -->
    <args>
      <arg>CLEANINDCRE</arg>
      <arg></arg>
    </args>
    <action>Cleans up control tables for asynchronous index creation</action>
  </phase>
  <!-- (jo+cv 720) This only cleans up old tables - can be done in post-downtime
    **  Moved downt here after dicussions with Christiane
  -->
  <!--  (af 721) Must run before READPUTTB_FINAL, otherwise verify will fail  -->
  <!--  (jo 720) Must use same selection for tables as in EU_SWITCH  -->
  <phase name="DBCLEAN_UPG" logfile="DBCLEANUPG.LOG" password="AMBAVVVE">
       <!-- pwd: 12335 -->
    <args>
      <arg>SWITCH</arg>
      <arg></arg>
    </args>
    <action>Cleans up old switched tables on database</action>
    <options>
      <option name="HASSHADOW" />
      <not><option name="MIGRATE_SECONDDB" /></not>
      <not><option name="ZERODOWNTIME_UPG" /></not>
    </options>
  </phase>
  <phase name="RUN_DMOSLT_DELRTOBJS" logfile="SLT_DELRTOBJS.LOG" password="YAWZNZVG">
    <!-- pwd: 79932 -->
    <args>
      <arg>RS_DMOSLT</arg>
      <arg>SAP_DELRTOBJS=SAP_DMOSLT(TASK=DELETE_RUNTIME_OBJ,UNICOD=UN2UN,EXEC=X,MONITOR=X,RESET=)</arg>
      <arg>NO-IGNORE</arg>
      <arg>ABAP_RS_DMOSLT\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>SLT Delete Runtime Objects</arg>
    </args>
    <action>SLT Delete Runtime Objects</action>
    <options>
      <option name="MIGRATE_OPTION" value="SLT" />
      <option name="MIGRATE_SECONDDB" />
    </options>
  </phase>
  <!--  (jo 720) Must use same selection for tables as in EU_SWITCH  -->
  <phase name="DBCLEAN_UPG_MIG" logfile="DBCLEANUPGMIG.LOG" password="AMBAVVVE">
       <!-- pwd: 12335 -->
    <args>
      <arg>SWITCH_MIG</arg>
      <arg></arg>
    </args>
    <action>Cleans up old switched tables on database</action>
    <options>
      <option name="HASSHADOW" />
      <option name="MIGRATE_SECONDDB" />
    </options>
  </phase>
  <phase name="READPUTTB_FINAL" logfile="RDPUTTBFINAL.LOG" password="WFJPKDCF">
    <!-- pwd: 60928 -->
    <args>
      <arg>READ</arg>
    </args>
    <action>Reads table PUTTB and places it in the file system</action>
    <options>
      <option name="SECOND_SHD" />
      <option name="ITERATIVE_UPG" />
    </options>
  </phase>
  <phase name="DB2_DROP_EMPTY_OBJECTS" logfile="DB2DROPEMPTY.LOG" password="YQQPHZXU">
       <!-- pwd: 83652 -->
    <action>Drop empty tablespaces and databases</action>
    <options>
      <option name="DBTYPE" value="DB2-z/OS" />
      <option name="condition" value="$DBVERSCMP($(DBVERS),10.0) ge 0" />
    </options>
  </phase>
  <!--  Undo SHADOW_NTACT_UCCP  -->
  <phase name="SHADOW_NTACT_UCDEL" logfile="NTSHDUCDEL.LOG" elgfile="NTSHDUCDEL.ELG"
	 password="OCDEFTTC"> <!-- pwd: 74999 -->
    <args>
      <arg>DELSHANT</arg>
      <arg>LOGICAL_ALSO;NO_SHADOW_ONLY</arg>
      <arg>NTSHDOP.TP0</arg>
    </args>
    <action>Deletes nametabs of shadow tables in the shadow nametab</action>
    <options>
      <option name="MIGRATE_SECONDDB" />
      <option name="UCMIG_INTEGRATED" />
    </options>
  </phase>
  <!-- (jo 720) Moved as requested by IM 2699056 2012  -->
  <!-- (hk zdm) moved after Bridge cleanup to ensure running report on central instance -->
  <phase name="RUN_RSCPINTS_CLEANUP" logfile="RSCPCLEANUP.LOG" elgfile="RSCPCLEANUP.ELG" password="WJOGCDWP">
       <!-- pwd: 18134 -->
    <args>
      <arg>RSCPINTS</arg>
      <arg>SAP_CLEANUP</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSCPCLEANUP\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Performs Clean up work</arg>
    </args>
    <options>
      <option name="SECOND_SHD" />
    </options>
    <action>Performs Cleanup work</action>
  </phase>

  <!-- (cv 731.03 remove shadow user, connection etc now in case of ISU/NGAP) -->
  <submoduleref name="SUBMOD_SHDDEL2" password="YVGUKZWN">
    <!-- pwd: 68913 -->
    <defs>
      <!--  (jo + hk) Tables are dropped in MAIN_POSTPROC/SUBMOD_SHDDEL2/PSCRGEN_DROP_SHD_TABLE2, so
	    no need to delete license. Moreover, the aliases are no longer valid
	-->
      <def>HANDLELICENSE=NO</def>
    </defs>
    <options>
      <option name="SECOND_SHD" />
      <option name="ITERATIVE_UPG" />
    </options>
  </submoduleref>
  <!--  (jo 720) New coding for AIMMERGE_TRANSFER to use lists instead of buffer  -->
  <!-- (jo 710) For AIMMERGE / Wieland Hoprich -->
  <phase name="RUN_RSAIMMERGE_TRANSFER" logfile="RSAIMTRNS.LOG" elgfile="RSAIMTRNS.ELG" password="IIIRBFVW">
	<!-- pwd: 92863 -->
    <args>
	  <arg>RSAIMMERGE_TRANSFER_LST</arg>
	  <arg>SAP_AIM_TRNS</arg>
	  <arg>NO-IGNORE</arg>
	  <arg>TRUPGAIM\.$(SAPSID)</arg>
	  <arg>20</arg>
	  <arg></arg>
    </args>
    <options>
      <option name="AIM_MERGE" />
      <or>
	<option name="HASSHADOW" />
	<option name="destcomponent" value="SAP_BASIS(731-799)" />
      </or>
    </options>
  </phase>
  <phase name="RUN_RCRR_EXPORT_ISU_LOGTABS" logfile="REXPISULT.LOG" elgfile="REXPISULT.ELG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>RCRR_EXPORT_ISU_LOGTABS</arg>
      <arg>SAP_EXP_ISU_LOGTABS</arg>
      <arg></arg>
      <arg>REXPISULT\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Export ISU log tables</arg>
    </args>
    <action>Export ISU log tables</action>
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
  </phase>
  <!-- (cv 731.01) add ISU phases for the framework -->
  <phase name="RUN_RSUPG_ISU_CRR_CLEAN" autorepeat="DB6:1" logfile="RSCRRCLN.LOG" elgfile="RSCRRCLN.ELG" password="MDTYRMXF">
       <!-- pwd: 2995 -->
    <args>
      <arg>RSUPG_ISU_CRR</arg>
      <arg>SAP_CRRCLEAN</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSCRRCLEAN\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>Cleanup of change recording framework</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
    <action>Cleanup of change recording framework</action>
  </phase>
  <!-- Delete ISU-stress-maker -->
  <phase name="RUN_RCRR_TFW_DELE" logfile="RCRRTFW4.LOG" elgfile="RCRRTFW4.ELG" password="UZSUQHGJ">
       <!-- pwd: 89147 -->
    <args>
      <arg>RCRR_TFW_PHASES</arg>
      <arg>SAP_DELE</arg>
      <arg>NO-IGNORE</arg>
      <arg>TFW_PHASES_DELE\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Delete old stress maker ISU artifacts for startrelease lower 700</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
      <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="46C-699" />
    </options>
    <action>Delete old stress maker ISU artifacts for startrelease lower 700</action>
  </phase>
  <phase name="RUN_DEL_UPGTABART" logfile="DEL_UPGTABART.LOG" elgfile="DEL_UPGTABART.ELG" password="SJVPQLMB">
     <!-- pwd: 97353 -->   
    <args>
      <arg>RZDM_PREPARE_UPG_TABSPACE</arg> 
      <arg>SAP_DEL_UPGTABART</arg>
      <arg></arg>
      <arg>DEL_UPGTABART\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Deletes infos for UPG tabart and tabspace from config tables</arg>
    </args>
    <action>Deletes infos for UPG tabart and tabspace from config tables</action>
    <options>
	  <or>
        <option name="ZERODOWNTIME_UPG" /> 
		<option name="ITERATIVE_UPG" />
      </or>
	</options>
  </phase> 
  <!-- Delete stressmaker -->
  <phase name="RUN_UPG_STRESSMAKER_DEL" logfile="RSUPG_STRESS4UPGRADE.LOG" elgfile="RSUPG_STRESS4UPGRADE.ELG" password="UZSUQHGJ">
       <!-- pwd: 89147 -->
    <args>
      <arg>RSUPG_STRESS4UPGRADE</arg>
      <arg>SAP_STRESS_CLEAN</arg>
      <arg>NO-IGNORE</arg>
      <arg>UPG_STRESSMAKER_DEL\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>DELETE STRESS MAKER 2013</arg>
    </args>
    <options>
      <or>
        <option name="ITERATIVE_UPG" />
        <option name="ZERODOWNTIME_UPG" />
		<option name="MIGRATE_OPTION" value="SLT" />
      </or>
	  <option name="feature_switch" value="/fa/stress_maker" />
	  <option name="ST_range" value="700-*" />
    </options>
    <action>Delete stress maker artifacts for startrelease greater or equal 700</action>
  </phase>
  <phase name="RUN_RSTABLOGRENAME" logfile="RSTABLOGRENAME.LOG" elgfile="RSTABLOGRENAME.ELG" password="QVHZMPCL">
	<!-- pwd: 56325 -->
	<args>
	  <arg>RSTABLOGRENAME</arg>
	  <arg>TABLOGRENAME</arg>
	  <arg>IGNORE</arg>
	  <arg>TABLOGRENAME\.$(SAPSID)</arg>
	  <arg>10</arg>
	  <arg>Rename DBTABLOG entries</arg>
	</args>
	<options>
	  <option name="HASTRTYPE" value="TR_CUSTOMER" />
	</options>
	<action>Rename DBTABLOG entries</action>
  </phase>
  <phase name="JOB_UPGDELPROG" logfile="UPGDELPROG.LOG" elgfile="UPGDELPROG.ELG" password="IBWKCFML">
    <!-- pwd: 58952 -->
    <args>
      <arg>UPGDELPROG</arg>
      <arg></arg>
      <arg>IGNORE</arg>
      <arg></arg>
      <arg>5</arg>
      <arg>Del UPGADDUSR</arg>
    </args>
    <action>Cleans up upgrade reports</action>
  </phase>  
  <phase name="RUN_DELETE_ZDM_CRR" logfile="RSDELETEZDMCRR.LOG" elgfile="RSDELETEZDMCRR.ELG" password="QVHZMPCL">
	<!-- pwd: 56325 -->
	<args>
	  <arg>RSUPG_DELETE_ZDM_CRR_OBJECTS</arg>
	  <arg>DELETEZDMCRR</arg>
	  <arg>IGNORE</arg>
	  <arg>DELETEZDMCRR\.$(SAPSID)</arg>
	  <arg>5</arg>
	  <arg>Creates deletion transport for ZDM, CRR and internal objects</arg>
	</args>
    <options>
	  <or>
        <option name="ZERODOWNTIME_UPG" /> 
		<option name="ITERATIVE_UPG" />
      </or>
	</options>	
	<action>Creates deletion transport for ZDM, CRR and internal objects</action>
  </phase>  
        <phase name="CONVBUFFER_DELETE_ZDM_CRR" logfile="CNVDELETEZDMCRR.LOG" password="FEVSGIGD">
        <!-- pwd: 656 -->
        <args>
          <arg>LIST2BUFFER</arg>
          <arg>CREATECOFILE</arg>
          <arg>DELETE_ZDM_CRR.LST</arg>
          <arg>DELETE_ZDM_CRR.BUF</arg>
        </args>
    <options>
	  <or>
        <option name="ZERODOWNTIME_UPG" /> 
		<option name="ITERATIVE_UPG" />
      </or>
	</options>		
        <action></action>
      </phase>
  <phase name="TOOLIMP_DELETE_ZDM_CRR" password="EXLPYNIN">
       <!-- pwd: 83154 -->
    <args>
      <arg>DELETE_ZDM_CRR.BUF</arg>
      <arg>TABIMREDUCE.TP0</arg>
      <arg></arg>
      <arg>optionalbuffer</arg>
    </args>
    <options>
	  <or>
        <option name="ZERODOWNTIME_UPG" /> 
		<option name="ITERATIVE_UPG" />
      </or>
	</options>	
    <action>Deletes ZDM, CRR and internal tools</action>
  </phase>  
  <!-- (ah) delete SUPER user from hdbuserstore, since it is only required for the DMO processing -->
  <phase name="HDB_CLEANUP" password="ATAUUVEP">
       <!-- pwd: 34051 -->
    <options>
      <option name="DBTYPE" value="HDB" />
      <option name="MIGRATE_SECONDDB" />
    </options>
    <action>Delete SUPER key from hdbuserstore</action>
  </phase>
  <!-- (jo 620.25) -->
  <phase name="RUN_RSDB02CK_END_FA" logfile="RSDB02CK.LOG" elgfile="RSDB02CK.ELG" password="MQLQXXTE" continue_on_oq_errors="true">
       <!-- pwd: 91684 -->
    <args>
      <arg>RSDB02CK</arg>
      <arg>SAP_GET_END</arg>
      <arg>IGNORE</arg>
      <arg>RSDB02EN\.$(SAPSID)</arg>
      <arg>30</arg>
      <arg>DB02 consistency check</arg>
    </args>
    <options>
	  <option name="feature_switch" value="/fa/db02chk_final" />
	  <not>
	    <option name="MIGRATE_SECONDDB" />
	  </not>
    </options>
    <action>Runs DB02 like consistency check</action>
  </phase>
  <!-- (hk) final nametab check for FA -->
  <phase name="NTACT_CHK_END" logfile="auto" elgfile="auto" password="YXPJGZGF">
       <!-- pwd: 55238 -->   
    <args>
      <arg>CHKANT</arg>
      <arg>NOBUFRESET</arg>
      <arg></arg>
    </args>
    <action>Checks the consistency of the nametab entries</action>
    <options>
	  <option name="feature_switch" value="/fa/ntact_chk_end" />
    </options>
  </phase>
  <!-- (jo 720) Dynamic toolimport buffer generation for postprocessing buffer -->
  <!-- (cv) Moved here to ensure that number of SGEN processes is not deleted -->
  <!-- (vd 610.63) restart check -->
  <!-- (jo 710 + cv) Internalize SQL commands -->
  <phase name="SETUPGPAR_PARAMDEL" logfile="SETUPGPAR.LOG" password="GYZSPJFQ">
    <!-- pwd: 19004 -->
    <args>
      <arg>CLR</arg>
      <arg></arg>
    </args>
    <action>Sets parameters in UPGPARAM</action>
  </phase>
  <phase name="GENBUFFER_POSTPROC" password="AZBNIVIR">
       <!-- pwd: 58707 -->
    <args>
      <arg>GENTOOLIMPORT.XML</arg>
      <arg>POSTPROC.BUF</arg>
      <arg>TYPE=TOOLIMPORT</arg>
    </args>
    <action>Generates buffer for Postprocessing Import</action>
  </phase>
  <phase name="TOOLIMP_POSTPROC" password="ADGEAVCB">
       <!-- pwd: 64513 -->
    <args>
      <arg>POSTPROC.BUF</arg>
      <arg>DEFAULT.TP0</arg>
      <arg></arg>
      <arg></arg>
    </args>
    <action>Postprocessing tool import</action>
  </phase>

  <phase name="MSS_POSTPROC" password="KJWUSBSZ" logfile="MSS_DELETEPERFDATA_TRANS.LOG">
       <!-- pwd: 76017 -->
    <options>
      <option name="DBTYPE" value="MSSQL" />
    </options>
    <action>Postprocessing for Microsoft SQL Server</action>
  </phase>

  <phase name="RFCDEST_DEL_O2S" logfile="DELRFCDESTO2S.LOG" password="SJICQLMB">
       <!-- pwd: 57708 -->
    <args>
      <arg>DELETE</arg>
      <arg>ORIG2SHD</arg>
    </args>
    <options>
      <option name="HASSHADOW" />
    </options>
    <action>Creates RFC connection SAP_UPGRADE_ORIG_SYSTEM</action>
  </phase>


  <!-- (hk 738) IM 04687314 2012 - needed for transparent DOKTL table -->
  <phase name="SQLDB_DEL_DOKTL_SHDNTAB" logfile="DELDOKTLSHDNTAB.LOG" password="GXBREJAH">
       <!-- pwd: 39197 -->
    <args>
      <arg>DEL_DOKTL_SHDNTAB</arg>
      <arg></arg>
    </args>
    <action>Delete DOKTL shadow nametab</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  <!-- **************************************************************************** -->
  <phase name="CREATE_UPGSTATS" password="AGNUHVRC">
       <!-- pwd: 67508 -->
    <args>
      <arg>SORTTABS2.LST</arg>
    </args>
    <action>Creates statistical data</action>
  </phase>
  <phase name="CREATE_UPGEVAL" password="CMRCBRNY">
       <!-- pwd: 65164 -->
    <args>
      <arg>STORE_DB</arg>
    </args>
    <options>
      <option name="feature_switch" value="/phase/create_upgeval:TRUE" />
    </options>
    <action>Creates evaluation and stores it in the database for reference</action>
  </phase>
    <phase name="CREATE_LMANA_EVAL" password="FEVSGIGD">
         <!-- pwd: 656 -->
      <action>Creates evaluation for LM analytics and stores it in the file system</action>
    </phase>
  <phase name="SEND_UPGEVAL" password="OBSQUTOT">
       <!-- pwd: 37629 -->
    <options>
      <not>
        <option name="exemode" value="BATCH" />
      </not>
    </options>
    <action>Prompts the user to send the upgrade evaluation</action>
  </phase>
  <phase name="SAVELOGS" ignorable="true" password="UFOVLWBZ">
       <!-- pwd: 6948 -->
    <args>
      <arg>SAVELOGS.PAT</arg>
      <arg>SAVELOGS.LOG</arg>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/phase/savelogs:TRUE" />
    </options>
    <action>Saves logs to /usr/sap/trans/upgrade</action>
  </phase>

  <phase name="OQ_READ_IGNORED_ERRORS" logfile="auto" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <options>
      <option name="feature_switch" value="/dev/continue_on_oq_errors" />
    </options>
  </phase>

  <phase name="EXIT" password="QTYKQPST">
       <!-- pwd: 28294 -->
    <action>Displays SAP Notes for post activities</action>
    <usage>Confirm</usage>
  </phase>
</phaselist>
</module>


    <!-- ******************************************************************* -->
    <!-- **********                 REVOKE MODULES               *********** -->
    <!-- ******************************************************************* -->
    <module name="REV_MAINPOSTCLEAN" type="revoke" interruptable="no">
      <description>Reverts the postprocessing module</description>
      <postevent>MODULE_INIT(MAIN_POSTCLEAN)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVPostClean.xml#1 $">

  <phase name="PROFREAD_DDIC" logfile="PROFREAD_DDIC.LOG" password="QCGTLPLW">
    <!-- pwd: 13817 -->   
    <args>
      <arg>DDICPWD_ONLY</arg>
    </args>
  </phase>

</phaselist>

    </module>

    <module name="REV_MAINPOSTPROC" type="revoke" interruptable="no">
      <description>Reverts the postprocessing module</description>
      <postevent>MODULE_INIT(MAIN_POSTPROC)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVPostProc.xml#2 $">
</phaselist>

    </module>

    <module name="REV_MAINUPTRANS" type="revoke" interruptable="no">
      <description>Reverts the uptime transition module</description>
      <postevent>MODULE_INIT(MAIN_UPTRANS)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
    </module>

    <module name="REV_MAINPROFEND" type="revoke" interruptable="no">
      <description>Reverts the final profile modification module</description>
      <postevent>MODULE_INIT(MAIN_PROFEND)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
    </module>

    <module name="REV_MAINNEWBAS" type="revoke" interruptable="no">
      <description>Reverts the second part of the downtime</description>
      <postevent>MODULE_INIT(MAIN_NEWBAS)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVNewBas.xml#5 $">

  <submoduleref name="SUBMOD_BRIREV_RESTRICTIONS" password="SJVPQLMB">
    <!-- pwd: 97353 -->
    <defs>
      <def>BRI_REVOKE_STEP=NEWBAS</def>
    </defs>  
    <options>
      <option name="ZERODOWNTIME_UPG" />
      <option name="BRIREV_ONCE" />
    </options>
  </submoduleref>
  
</phaselist>

    </module>

    <module name="REV_MAINSWITCH" type="revoke" interruptable="no">
      <description>Reverts the first part of the downtime</description>
      <postevent>MODULE_INIT(MAIN_SWITCH)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVSwitch.xml#21 $">

  <submoduleref name="SUBMOD_BRIREV_RESTRICTIONS" password="SJVPQLMB">
    <!-- pwd: 97353 -->
    <options>
      <option name="ZERODOWNTIME_UPG" />
      <option name="BRIREV_ONCE" />
    </options>
  </submoduleref>
    
  <phase name="STOPSAP_REVSW" password="OCDEFTTC">
       <!-- pwd: 13107 -->
    <args>
      <arg>ALL;STOP_SERVICE</arg>
    </args>
    <action>Stops SAP system</action>
  </phase>

  <!-- ********************************************************************** -->
  <phase name="ENVFILES_REV" logfile="ENVFILES_REV.LOG" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <args>
      <arg>REVERT</arg>
    </args>
  </phase>

  <!-- ********************************************************************** -->

  <!--  FIXME: In order that this works, phase KX_SWITCH must have option "SAVEOLD"
	which is currently only true for $(MIGRATE_SECONDDB)!
    -->
  <phase name="KX_SWITCH_REV" logfile="KX_SWITCHREST.LOG" password="CRHHERMR">
    <!-- pwd: 56581 -->
    <args>
      <arg>ToolVers.xml</arg>
      <arg>CLEANIPC;CENTRAL;SERVICE_CHECK;REVERT</arg>
    </args>
    <action>Switches SAP kernel back to old release</action>
  </phase>

  <phase name="KX_SWITCH_DIAG_REV" logfile="KX_SWITCHDIAGREST.LOG" password="CRHHERMR">
    <!-- pwd: 56581 -->
    <args>
      <arg>ToolVers.xml</arg>
      <arg>DIAG;REVERT</arg>
    </args>
  </phase>

  <!--  Restore START profile before restoring old kernel  -->
  <phase name="MERGEPROF_REV" logfile="MRGPROFREV.LOG" password="AWHKBVTQ">
       <!-- pwd: 53084 -->
    <args>
      <arg>RESTORE_STARTPROFNAME;RESTORE_STARTPROFILE</arg>
    </args>
    <options>
      <option name="MERGESTARTPROF" />
    </options>
  </phase>

  <submoduleref name="SUBMOD_MIG_REVDT" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
    </options>
  </submoduleref>

  <phase name="WINSRV_REINST_REV" logfile="WINSRVREINST.LOG" password="CZZKVGRZ">
    <!-- pwd: 6418 -->
    <args>
      <arg>reinstall</arg>
      <arg>std</arg>
      <!--  (jo 720) "start" is mapped to instance profile anyway, but this phase is handy for restarting the service  -->
      <arg>start</arg>
    </args>
    <options>
      <option name="OSTYPE" value="Windows" />
      <option name="MERGESTARTPROF" />
    </options>
    <action>Reinstalls service of the target system with instance profile</action>
  </phase>

</phaselist>
</module>
 
   <module name="REV_BRITRANS" type="revoke" interruptable="no">
      <description>Reverts the transition to bridge</description>
      <options>
        <option name="ZERODOWNTIME_UPG" />
      </options>
      <postevent>MODULE_INIT(MAIN_BRITRANS)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVBriTrans.xml#6 $">

  <!-- Begin revoke restrictions for bridge usage -->
  <submoduleref name="SUBMOD_BRIREV_RESTRICTIONS" password="SJVPQLMB">
    <!-- pwd: 97353 -->
    <options>
      <option name="BRIREV_ONCE" />
      <option name="ZERODOWNTIME_UPG" />      
    </options>
  </submoduleref>
  <!-- End revoke restrictions for bridge usage -->

  <phase name="STOP_BRI" password="SJVPQLMB">
    <!-- pwd: 97353 -->   
    <args>
      <arg>ALL;STOP_SERVICE</arg>
    </args>
    <action>Stops all instances</action>
  </phase>

  <!-- delete bridge setup -->
  <submoduleref name="SUBMOD_SHDALIASDEL_BRI" refname="SUBMOD_SHDALIASDEL" password="OCDEFTTC">    <!-- pwd: 74999 -->   
    <defs>
      <def>SCRIPT_PREFIX=PTBRIAL</def>
      <def>HANDLEALIORG=NO</def>
    </defs>
  </submoduleref>
  
  <phase name="SQLSELEXE_DROPBASVIEW_REV" logfile="SELEXEDRBASVIEWREV.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>SWITCH_DROPVIEWS</arg>
      <arg>DROP_BASVIEW</arg>
      <arg>SCRCLASSID</arg>
    </args>
    <action>Drop views on basis tables</action>
  </phase>
  
  <phase name="SQLRUNTASK_UNDOCOMPVIEW_REV" password="WJOGCDWP">
    <!-- pwd: 18134 -->   
    <args>
      <arg>LC4BRI-UNDOCOMPVIEW</arg>
      <arg>DELMODE=COMPLETE</arg>
    </args> 
  </phase>
   
  <!--  Drop V2 repository tables -->
  <phase name="SQLSELEXE_EU_SWITCH_REV" logfile="auto" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>SEL_EU_SWITCH_REV</arg>
      <arg>EU_SWITCH_REV</arg>
      <arg></arg>
    </args>
    <action>Revert EU Switch for ZDM</action>
  </phase>
  <!-- Execute Drop statements for cloned LC4BRI tables(BRITYPE= C,K,L) -->
  <phase name="SQLSELEXE_LC4BRI_TARGETTABS_REV" logfile="auto" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>DROP_LC_REV</arg>
      <arg>DROP_TABLES</arg>
      <arg>SCRCLASSID</arg>
    </args>
    <action>Drop Cloned LC4BRI tables</action>
  </phase>
  <!-- Revert Smart Switch for all tables with BRISWTC=X -->
  <phase name="SQLSELEXE_ZDMSWITCH_REV" logfile="SELEXEZDMSWITCHREV.LOG" password="IRQAWFOZ">
       <!-- pwd: 64616 -->   
    <args>
      <arg>SEL_SMART_SWITCH_REV</arg>
      <arg>SMART_SWITCH_REV</arg>
      <arg></arg>
    </args>
    <action>Revert Smart Switch for ZDM</action>
  </phase>

  <!-- Recreate basis views in V1 with R3load -->
  <phase name="EU_CLONE_CRE_ORGVIEWS" logfile="EUCLONECRORGVIEW.LOG" elgfile="EUCLONECRORGVIEW.ELG" password="SJVPQLMB">
    <!-- pwd: 97353 -->
    <args>
      <arg></arg>
      <arg>SWITCH_DROPVIEWS</arg>
      <arg>orgviews</arg>
      <arg>NOCONTREQFIELD;USE_DROPDEST;NODURATIONS</arg>
    </args>
  </phase>
  
  <submoduleref name="SUBMOD_INSTNR_REV" password="SJICQLMB">
    <!-- pwd: 57708 -->
    <defs>
      <def>REVERTMODE=OPTIONAL</def>
    </defs>
  </submoduleref>
      
  <submoduleref name="SUBMOD_INSTNR_CLEAN" password="QCGTLPLW">
    <!-- pwd: 13817 -->   
  </submoduleref>

  <phase name="MODPROF_REV" logfile="MODPRFREST.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg></arg>
      <arg>ALLPROF</arg>
      <arg>RESTORE_OPT</arg>
    </args>
    <action>Restores all profiles if a backup was done</action>
  </phase>
   
  <phase name="MODPROF_BRI_REV" logfile="CHGPRFBRI.LOG" password="GAVULJPI">
     <!-- pwd: 89289 -->
     <args>
       <arg>ALPBRISWTCREV.XML</arg>
       <arg>ALLPROF</arg>
       <arg>RESTORE;CIINST;BRIINST;PROFSTATE_RESET</arg>
     </args>
  </phase>
  
  <phase name="INSTANCELIST_BRIREV" logfile="INSTANCELIST_ZDM.LOG" password="SJICQLMB">
     <!-- pwd: 57708 -->
     <args>
       <arg>REVERT_BRIDGE</arg>
     </args>
     <action>Revert Bridge system</action>
  </phase>
  
</phaselist>
</module>
  <module name="REV_PROFSTART" type="revoke" interruptable="no">
      <description>Reverts the profile modification module</description>
      <postevent>MODULE_INIT(MAIN_PROFSTART)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVProfStart.xml#9 $">
  <!-- (jo 720) Change instance number back -->
  <submoduleref name="SUBMOD_INSTNR_REV" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <defs>
      <def>REVERTMODE=OPTIONAL</def>
    </defs>
    <options>
      <option name="CHANGE_INSTNR" />
    </options>
  </submoduleref>

  <phase name="MODPROF_REV" logfile="MODPRFREST.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg></arg>
      <arg>ALLPROF</arg>
      <arg>RESTORE_OPT;PROFSTATE_RESET</arg>
    </args>
    <action>Restores all profiles if a backup was done</action>
  </phase>

  <phase name="MODPROF_DIAG_REV" logfile="MODPRFRESTDIAG.LOG" password="EASFFNXO">
    <!-- pwd: 78049 -->
    <args>
      <arg></arg>
      <arg>ALLPROF</arg>
      <arg>RESTORE_OPT;DIAGINST</arg>
    </args>
  </phase>

  <!-- (jo 710) Now cleanup old instance directory -->
  <submoduleref name="SUBMOD_INSTNR_CLEAN" password="QCGTLPLW">
    <!-- pwd: 13817 -->   
    <options>
      <option name="CHANGE_INSTNR" />
    </options>
  </submoduleref>

</phaselist>
</module>
 <module name="REV_PREPROC" type="revoke" interruptable="no">
      <description>Reverts the preprocessing module(s) and resets the procedure</description>
      <postevent>CHANGE_STATUS(RESET)</postevent>
      <password>GOGVJJHE</password>
      <!--  pwd: 50300  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVPreProc.xml#20 $">

  <submoduleref name="SUBMOD_MIG_REVUT" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
      <option name="EXECSTAT" value="UptimeMigration" />
    </options>
  </submoduleref>

  <!-- ******************************************************************************* -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="HASSHADOW" />
    </options>
    <phaselist>
      <phase name="STOP_SHDI_RES" logfile="STOPSHDIRES.LOG" password="EASFFNXO">
	<!-- pwd: 78049 -->
	<args>
	  <arg>OPTIONAL;STOP_SERVICE</arg>
	</args>
	<action>Stops shadow instance</action>
      </phase>

      <!-- delete service of the shadow system -->
      <phase name="WINSRV_DELSHD_RES" logfile="WSRVDELSHDRES.LOG" password="AWHKBVTQ">
	<!-- pwd: 53084 -->
	<args>
	  <arg>uninstall</arg>
	  <arg>shd</arg>
	  <arg>start</arg>
	</args>
	<options>
	  <option name="OSTYPE" value="Windows" />
	</options>
	<action>Deletes shadow service</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- ******************************************************************************* -->
  <submodule password="KRGCCBGT">
    <options>
      <option name="MIGRATE_OPTION" value="SLT" />
    </options>
    <phaselist>
      <phase name="STOPSAP_SLT_RES" password="MVWDHMJL">
	<!-- pwd: 5514 -->
	<args>
	  <arg>SHDTMP;STOP_SERVICE;OPTIONAL</arg>
	</args>
	<action>Stops SLT system</action>
      </phase>

      <!-- delete service of the temporary system -->
      <phase name="WINSRV_DELTMP_RES" logfile="WSRVDELTMPRES.LOG" password="AWHKBVTQ">
	<!-- pwd: 53084 -->
	<args>
	  <arg>uninstall</arg>
	  <arg>shdtmp</arg>
	  <arg>start</arg>
	</args>
	<options>
	  <option name="OSTYPE" value="Windows" />
	</options>
	<action>Deletes temporary system service</action>
      </phase>
    </phaselist>
  </submodule>

  <!-- ******************************************************************************* -->
  <phase name="STARTSAP_RES" password="OCDEFTTC">
       <!-- pwd: 74999 -->
    <!-- FIXME???? -->
    <args>
      <arg>CENTRAL;UNLOCK;ARCHMODE;NOPROFILECHANGE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts the productive system</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>

  <!-- (jo + hjl 720) Should get rid of those as well!  -->
  <phase name="SCEXEC_REVTRIG_DEL" password="WPCMQDAR">
       <!-- pwd: 89806 -->
    <args>
      <arg>PTTRDR.CLT</arg>
      <arg>SQLEXETD.LOG</arg>
      <arg>OPTIONAL</arg>
    </args>
    <options>
      <option name="HASSHADOW" />
      <option name="DBHASTRIGGER" />
    </options>
    <action>Deletes triggers</action>
  </phase>

  <!--  *************************************************************************** -->
  <phase name="RUN_RSUPGREV_ICNV" logfile="RSUPGREV_ICNV.LOG" elgfile="RSUPGREV_ICNV.ELG" password="SJICQLMB">
       <!-- pwd: 57708 -->
    <args>
      <arg>RSUPGREV</arg>
      <arg>SAP_ICNV</arg>
      <arg>IGNORE</arg>
      <arg>RSUPGREV\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Reset ICNV</arg>
    </args>
    <options>
      <option name="USE_ICNV" />
      <option name="HASSHADOW" />
    </options>
    <action>Resets ICNV entries</action>
  </phase>

  <!--  (sm 720) Drop triggers  -->
  <phase name="SQLSELEXE_CRRDROPTRIGGER" logfile="SELEXEDRTRIGGER.LOG" password="QWFAXPHU">
       <!-- pwd: 97943 -->
    <args>
      <arg>ALIAS_ISU</arg>
      <arg>CRR_DROP_TRIGGER</arg>
      <arg>SCRCLASSID;FULLPUTTBSHD</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
    <action>Drop CRR triggers</action>
  </phase>

  <submoduleref name="SUBMOD_SHDALIASDEL_CRR" refname="SUBMOD_SHDALIASDEL" password="YAWZNZVG">
       <!-- pwd: 79932 -->
    <defs>
      <def>SCRIPT_PREFIX=PTCRRAL</def>
      <def>HANDLEALIORG=NO</def>
      <def>HANDLEVIEWS=NO</def>
      <def>ALIASMODE=REVOKE</def>
    </defs>
    <options>
      <option name="EXECSTAT" value="CRRAliases" />
    </options>
  </submoduleref>
  <submoduleref name="SUBMOD_SHDALIASDEL_NORMAL" refname="SUBMOD_SHDALIASDEL" password="QOVSNPTA">
       <!-- pwd: 67126 -->
    <defs>
      <def>ALIASMODE=REVOKE</def>
    </defs>
    <options>
      <option name="EXECSTAT" value="Aliases" />
    </options>
  </submoduleref>

  <phase name="SQLSELEXE_SAPDBREVOKE" logfile="SQLREVOKE.LOG" elgfile="SQLREVOKE.ELG" password="IKETXFFO">
    <!-- pwd: 19932 -->
    <args>
      <arg>ALIAS_GRANT_SELECT</arg>
      <arg>ALIAS_REVOKE_ALL</arg>
      <arg></arg>
    </args>
    <options>
      <option name="DBTYPE" value="SAPDB" />
      <option name="EXECSTAT" value="GrantAll" />
    </options>
    <action>Revokes database privileges for shadow instance</action>
  </phase>
  <phase name="SETEXECSTAT_REVOKEALL" logfile="SETEXECSTAT.LOG" password="IIVEBFVW">    <!-- pwd: 66178 -->
    <args>
      <arg>DEL=GrantAll</arg>
    </args>
    <action>Memorize revoke</action>
    <options>
      <option name="DBTYPE" value="SAPDB" />
      <option name="EXECSTAT" value="GrantAll" />
    </options>
  </phase>

  <phase name="RUN_RSUPGREV_SHDT" logfile="RSUPGREV_SHDT.LOG" elgfile="RSUPGREV_SHDT.ELG" password="SEFKNLNI">
       <!-- pwd: 32478 -->
    <args>
      <arg>RSUPGREV</arg>
      <arg>SAP_SHDT</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGREV\.$(SAPSID)</arg>
      <arg>10</arg>
      <arg>Deletes shadow tables</arg>
    </args>
    <action>Deletes shadow tables</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>

  <!-- (jo 710) Clean up shadow schema -->
  <phase name="SHDUNINST_DB_RES" password="AFCGWVMT">
       <!-- pwd: 33621 -->
    <args>
      <arg>SHDUNINSTRES.LOG</arg>
      <arg>SHDUSREX.$(DBAEXT)</arg>
      <arg>SHDUSREX.LOG</arg>
    </args>
    <action>Deletes the shadow schema DB user</action>
    <options>
      <option name="HASSHADOW" />
    </options>
  </phase>
  <phase name="RUN_RSUPGREV_UPGR" logfile="RSUPGREV_UPGR.LOG" elgfile="RSUPGREV_UPGR.ELG" password="WJOGCDWP">
       <!-- pwd: 18134 -->
    <args>
      <arg>RSUPGREV</arg>
      <arg>SAP_UPGR</arg>
      <arg>NO-IGNORE</arg>
      <arg>RSUPGREV\.$(SAPSID)</arg>
      <arg>5</arg>
      <arg>Reset upgrade control tables</arg>
    </args>
    <action>Reset upgrade control tables</action>
  </phase>

  <!-- (jo 710) Drop unique index as pointed out by Rene Lang -->
  <phase name="SQLDB_DDNTT_DROP_UUID" logfile="DDNTT_DRUUID.LOG" password="KABYXBZW">
       <!-- pwd: 47366 -->
    <!-- (jo 710) For all DB's now and also for customers! -->
    <args>
      <arg>DDNTT_DROP_UUID</arg>
      <arg></arg>
    </args>
    <action>Drops unique index on shadow nametab (field UUID)</action>
    <options>
      <option name="HASSHADOW" />
      <option name="MODULE_WASRUN" value="MAIN_INIT" />
    </options>
  </phase>

  <submoduleref name="SUBMOD_MIG_REVCONF" password="QCGTLPLW">
    <!-- pwd: 13817 -->
    <options>
      <option name="MIGRATE_SECONDDB" />
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
    </options>
  </submoduleref>

  <!-- *************************************************************************************** -->
  <phase name="SETUPGPAR_PARAMRES" logfile="SETUPGPAR.LOG" password="GYZSPJFQ">
       <!-- pwd: 19004 -->   
    <args>
      <arg>CLR</arg>
      <arg></arg>
    </args>
    <action>Clears parameters in UPGPARAM</action>
  </phase>

  <!-- (jo 710) -->
  <phase name="UVERS_RESET" password="WFJPKDCF">
    <!-- pwd: 60928 -->
    <args>
      <arg>UPGRADE</arg>
    </args>
    <action>Resets UVERS entries</action>
  </phase>
  <phase name="CREATE_UPGEVAL_RES" ignorable="true" password="MVWDHMJL">
       <!-- pwd: 5514 -->
    <args>
      <arg>NO-MPL-RUNTIMES</arg>
    </args>
    <options>
      <option name="feature_switch" value="/phase/create_upgeval:TRUE" />
    </options>
    <action>Creates evaluation</action>
  </phase>
  <phase name="SAVELOGS_RESET" ignorable="true" password="YVGUKZWN">
       <!-- pwd: 68913 -->
    <args>
      <arg>SAVELOGS.PAT</arg>
      <arg>SAVELOGS.LOG</arg>
      <arg>RESET</arg>
    </args>
    <options>
      <option name="feature_switch" value="/reset/savelogs:TRUE" />
    </options>
    <action>Saves logs to /usr/sap/trans/upgrade</action>
  </phase>
</phaselist>
</module>
 <module name="REV_DTTRANS" type="revoke" interruptable="no" revokeautonext="yes">
      <description>Reverts the downtime transition</description>
      <postevent>MODULE_INIT(MAIN_DTTRANS)</postevent>
      <password>CJKMURYX</password>
      <!--  pwd: 64032  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVDTTrans.xml#15 $">
  <phase name="STARTSAP_DTTRANS" password="QCGTLPLW">
       <!-- pwd: 13817 -->
    <args>
      <arg>ALL;UNLOCK;ARCHMODE;START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <action>Starts SAP system</action>
  </phase>

  <!-- (cv jo) start shadow instance again for ISU -->
  <phase name="START_SHDI_DTTRANSREV" logfile="STARTSHDIDTREV.LOG" password="YAWZNZVG">
       <!-- pwd: 79932 -->   
    <args>
      <arg>START_SERVICE</arg>
      <arg>DEVTRACE.LOG</arg>
    </args>
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
    <action>Starts shadow instance</action>
  </phase>

  <submoduleref name="SUBMOD_CRR_START_CHTRANS" password="EASFFNXO">
    <!-- pwd: 78049 -->   
    <options>
      <option name="ITERATIVE_UPG" />
    </options>
  </submoduleref>

  <phase name="DOWNCONF_REVERT" logfile="DOWNCONFREV.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>REVERT</arg>
    </args>
  </phase>
  
</phaselist>

    </module>
    <module name="REV_DTTRANSSHD" type="revoke" interruptable="no" revokeautonext="yes">
      <description>Reverts the downtime transition</description>
      <postevent>MODULE_INIT(MAIN_DTTRANSSHD)</postevent>
      <password>SJICQLMB</password>
      <!--  pwd: 39483  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVDTTransShd.xml#3 $">
  <phase name="DOWNCONF_REVERT" logfile="DOWNCONFREV.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>REVERT</arg>
    </args>
  </phase>
</phaselist>

    </module>
    <module name="REV_DTTRANSEUI" type="revoke" interruptable="no" revokeautonext="yes">
      <description>Reverts the downtime transition</description>
      <postevent>MODULE_INIT(MAIN_DTTRANSEUI)</postevent>
      <password>YQQPHZXU</password>
      <!--  pwd: 65913  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVDTTransEUI.xml#3 $">
  <phase name="DOWNCONF_REVERT" logfile="DOWNCONFREV.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>REVERT</arg>
    </args>
  </phase>
</phaselist>
</module>

   <!-- ******************************************************************* -->
    <module name="REV_PRPOPTCHECKS" type="revoke">
      <description>Reverts optional check modules</description>
      <postevent>MODULE_INIT(PREP_ACTCONVCHECKS,PREP_PREPROC)</postevent>
      <password>URIMGHSP</password>
      <!--  pwd: 32815  -->
    </module>
    <module name="REV_PRPCHECKS" type="revoke">
      <description>Reverts check modules</description>
      <postevent>MODULE_INIT(PREP_GENCHECKS,PREP_SPACECHECKS)</postevent>
      <password>SWIPDLZO</password>
      <!--  pwd: 10445  -->
    </module>
    <module name="REV_PRPSPACECALC" type="revoke">
      <description>Reverts space calculations</description>
      <postevent>MODULE_INIT(PREP_SPACECALC)</postevent>
      <password>SHMAULCJ</password>
      <!--  pwd: 89248  -->
    </module>
    <module name="REV_PRPINSTALL" type="revoke">
      <description>Reverts installation module</description>
      <options>
        <option name="HASSHADOW" />
      </options>
      <postevent>MODULE_INIT(PREP_INSTALL)</postevent>
      <password>SHMAULCJ</password>
      <!--  pwd: 89248  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVInstall.xml#4 $">
  <!-- (jo 710) Clean up shadow schema -->
  <phase name="SHDUNINST_DB_REV" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <args>
      <arg>SHDUNINSTRES.LOG</arg>
      <arg>SHDUSREX.$(DBAEXT)</arg>
      <arg>SHDUSREX.LOG</arg>
    </args>
    <action>Deletes the shadow schema DB user</action>
  </phase>
  <!-- (ae 710) Remove shadow service -->
  <phase name="WINSRV_REV" logfile="WSRVREV.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>uninstall</arg>
      <arg>shd</arg>
      <arg>start</arg>
    </args>
    <options>
      <option name="OSTYPE" value="Windows" />
    </options>
    <action>Deletes shadow service</action>
  </phase>
  <phase name="SQLDB_SMODITRIGGERDROP"  password="AWHKBVTQ">
       <!-- pwd: 53084 -->   
    <args>
      <arg>SMODITRIGGER_DROP</arg>
      <arg></arg>
    </args>
    <options>
      <option name="feature_switch" value="/fa/smoditrigger" />
      <option name="HASSHADOW" />
      <not><option name="MIGRATE_SECONDDB" /> </not>
      <or>
        <option name="DBTYPE" value="SAPDB" />
        <option name="DBTYPE" value="ORACLE" />
      </or>
    </options>
    <action>drop triggers for testing</action>
  </phase>

</phaselist>

    </module>
    <module name="REV_PRPINTEGRATION" type="revoke">
      <description>Reverts integration module</description>
      <postevent>MODULE_INIT(PREP_INTEGRATION)</postevent>
      <password>QLBPGPEZ</password>
      <!--  pwd: 31452  -->
    </module>
    <module name="REV_PRPEXTENSION" type="revoke">
      <description>Reverts extension module</description>
      <postevent>MODULE_INIT(PREP_EXTENSION)</postevent>
      <password>QZZDEPWV</password>
      <!--  pwd: 77979  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVExtension.xml#5 $">
  <!--  (jo 720) Suggested by Dirk Rosenkranz  -->
  <phase name="DISASSCLEAR" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <action>Resets status of all disassembled packages</action>
  </phase>

  <phase name="NAVERS2_HANDLE_RESET" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg>ALL</arg>
      <arg>D</arg>
      <arg>CURRENT</arg>
    </args>
    <action>Deletes the NAVERS2 data</action>
  </phase>
</phaselist>

    </module>
    <module name="REV_PRPSETUP" type="revoke">
      <description>Reverts setup module</description>
      <postevent>MODULE_INIT(PREP_SETUP)</postevent>
      <password>CAPQZRFU</password>
      <!--  pwd: 26552  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVSetup.xml#3 $">
  <!--  (jo 720) Suggested by Dirk Rosenkranz  -->
  <phase name="PUTTBSTATCLEAR" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <action>Resets status of PUTTB_SHD read</action>
  </phase>
</phaselist>

    </module>
    <module name="REV_PRPCONFIGURATION" type="revoke">
      <description>Reverts configuration module</description>
      <postevent>MODULE_INIT(PREP_CONFIGURATION)</postevent>
      <password>CAPQZRFU</password>
      <!--  pwd: 26552  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVConfiguration.xml#7 $">
  <!-- (jo 710) Clear gpv_langinc_ok flag -->
  <phase name="REVLANGSEL" password="QCGTLPLW">
       <!-- pwd: 13817 -->   
    <options>
      <option name="MODE" value="EXPORT" />
    </options>
    <action>Resets the language selection flag</action>
  </phase>

  <submoduleref name="SUBMOD_MIG_REVCONF" password="QCGTLPLW">
    <!-- pwd: 13817 -->   
    <options>
      <option name="MIGRATE_SECONDDB" />
      <not><option name="MIGRATE_OPTION" value="SERIAL" /></not>
    </options>
  </submoduleref>
</phaselist>

    </module>
    <module name="REV_PRPPARSETUP" type="revoke">
      <description>Reverts parameter setup module</description>
      <!--  (jo 710) The parameter setup doesn't have to be done again  -->
      <postevent>MODULE_SKIPPED(PREP_PARSETUP)</postevent>
      <password>TNLPRGVQ</password>
      <!--  pwd: 664  -->
    </module>
    <module name="REV_PRPIMPORT" type="revoke">
      <description>Reverts import module</description>
      <!--  (jo 710) The tool import doesn't have to be done again  -->
      <postevent>MODULE_SKIPPED(PREP_IMPORT)</postevent>
      <password>TNLPRGVQ</password>
      <!--  pwd: 664  -->
    </module>
    <module name="REV_PRPINIT" type="revoke">
      <description>Reverts initialization module</description>
      <postevent>MODULE_INIT(PREP_INIT)</postevent>
      <password>GBGIWJUR</password>
      <!--  pwd: 23943  -->
      
<phaselist srcid="$Id: //bc/dev/src/upg/SAPup/SAPupREVInit.xml#5 $">
  <!--  (jo 720) This should actually be in 'REV_IMPORT' since 'UVERS_INIT'
	is also there. But we want to help customers who run into the
	    ... is in an undefined state
	type of problems. This shows up in phase 'VALCHK_INI' in 'PREP_INIT',
	so we do this here.
    -->
  <phase name="RESET_PREPARE" logfile="RESETPRP.LOG" password="EASFFNXO">
       <!-- pwd: 78049 -->   
    <args>
      <arg></arg>
    </args>
    <action>Resets the changes done by PREPARE</action>
  </phase>
</phaselist>

    </module>
    <module name="REV_PRPINPUT" type="revoke">
      <description>Reverts input module</description>
      <postevent>MODULE_INIT(PREP_INPUT)</postevent>
      <password>ITZPSFYR</password>
      <!--  pwd: 15058  -->
    </module>
    <module name="REV_PRPPRECHECK" type="revoke">
      <description>Reverts pre check module</description>
      <postevent>MODULE_INIT(PREP_PRE_CHECK)</postevent>
      <password>KFRDABYP</password>
      <!--  pwd: 69239  -->
    </module>
    <module name="REV_PRPEXTRACT" type="revoke">
      <description>Reverts the extraction module</description>
      <postevent>MODULE_INIT(PREP_EXTRACT);CHANGE_STATUS(INITIAL)</postevent>
      <password>KFRDABYP</password>
      <!--  pwd: 69239  -->
 </module>
 </modules>

    <!-- ******************************************************************* -->
    <!-- **********             Migration tool                   *********** -->
    <!-- ******************************************************************* -->
    
<modules srcid="$Id: //bc/dev/src/upg/SAPup/SAPupMODSMigrationTool.xml#27 $">
  <!-- *************************************************************************** -->
  <module name="MIGTOOL_CONFIGURE" type="prepare" mandatory="yes">
    <description>Execution</description>
    <password>MQLQXXTE</password> <!--  pwd: 85528  -->
    <phaselist>
      <phase name="BEGIN" password="QCGTLPLW">
	<!-- pwd: 13817 -->
	<args>
	  <arg>INITINSTANCE;INITCHECKS;MKDIRS;STARTTIME;CHECKPHASEOPTS=DBTYPE+OSTYPE</arg>
	</args>
	<action>Checks upgrade directory</action>
      </phase>

      <!-- (hk 721) Need to prepare SSFS for SUM tools -->
      <phase name="SSFS_PREP" logfile="SSFSP.LOG" password="YQQPHZXU">
	<!-- pwd: 83652 -->
	<args>
          <arg>INIT;COPY;CHANGEKEY</arg>
	</args>
	<options>
	  <or>
            <option name="DBTYPE" value="ORACLE" />
            <option name="DBTYPE" value="SYBASE" />
	  </or>
	</options>
	<action>SSFS preparation for SUM tools</action>
      </phase>

      <!-- (jo 710) Determine if we have a UNICODE system from calling "disp+work" -V -->
      <phase name="TOOLVERSXML_UNI" logfile="auto" password="AWHKBVTQ">
        <!-- pwd: 53084 -->
        <args>
          <arg>ToolVers.xml</arg>
          <arg>CUR</arg>
          <arg /><!-- tool names -->
          <arg>SETKERNELPARAMS</arg>
        </args>
        <options>
        </options>
        <action>Determines the tool version and if the system is UNICODE</action>
      </phase>

      <!--  Ask for second DB type  -->
      <phase name="MIG2NDDB_INI_MTOOL" logfile="MIG2NDDB_INI.LOG" password="WJOGCDWP">
	<!-- pwd: 18134 -->
	<args>
	  <arg>ASK_MIGMODE;STANDALONE</arg>
	</args>
      </phase>

      <!--  If we migrate, we need to ask for the download directory  -->
      <phase name="SCAN_DOWNLOADDIR" logfile="ASKDOWNLOAD.LOG" password="AWHKBVTQ">
	<!-- pwd: 53084 -->
	<args>
	  <arg></arg>
	</args>
	<options>
          <option name="MIGRATE_OPTION" value="HASSECONDDB" />
	</options>
	<action>Initial scan of download directory</action>
      </phase>

      <phase name="INITTOOL_PHL" password="WJOGCDWP">
	<!-- pwd: 18134 -->
	<args>
	  <arg>CHECKPHASEOPTS0=ALL</arg>
	</args>
	<action>Generate phaselist, evaluating all options</action>
      </phase>

      <!-- *************************************************************************** -->
      <!--  Ask for migration related processes  -->
      <phase name="INITSUBST_MTOOL" logfile="INITSUBST.LOG" password="QCGTLPLW">
	<!-- pwd: 13817 -->
	<args>
	  <arg></arg>
	  <arg>PROCS_MIGRATION</arg>
	</args>
      </phase>

      <!-- *************************************************************************** -->
      <submoduleref name="SUBMOD_MIG_INSTCLIENT" password="KRGCCBGT">
        <!-- pwd: 18958 -->
	<defs>
	  <def>ASKCLIENTTARGET=YES</def>
	</defs>
	<options>
          <option name="MIGRATE_OPTION" value="HASSECONDDB" />
	</options>
      </submoduleref>

      <!-- We only need a kernel if we want to migrate  -->
      <submoduleref name="SUBMOD_MIG_GETKRNL" password="WPCMQDAR">
	<!-- pwd: 89806 -->
	<options>
	  <option name="MIGRATE_SECONDDB" />
	</options>
      </submoduleref>

      <phase name="DBCONNCHK_EXE" password="IEDAJFBM">
	<!-- pwd: 40231 -->
	<args>
	  <arg>DBCONNCHK.LOG</arg>
	  <arg></arg>
	</args>
	<options>
	  <option name="MIGRATE_SECONDDB" />
	</options>
	<action>Tests if new tools can connect to the database</action>
      </phase>

      <!--  Depends on the kernel, so must be done now  -->
      <phase name="MIG2NDDB_INI_SETFLAGS" logfile="MIG2NDDB_SETFLAGS.LOG" password="WJOGCDWP">
	<!-- pwd: 18134 -->
	<args>
	  <arg>SET_FLAGS;$CONDEVAL($(MIGRATE_SECONDDB),KRNREL_TO_STARTDESTVERS,)</arg>
	</args>
      </phase>

      <!-- *************************************************************************** -->
      <submoduleref name="SUBMOD_MIG_CONFIG" password="KRGCCBGT">
        <!-- pwd: 18958 -->
	<defs>
	  <def>CREATEUSER=$CONDEVAL($(MIGRATE_SECONDDB),YES,NO)</def>
	</defs>
	<options>
          <option name="MIGRATE_OPTION" value="HASSECONDDB" />
	</options>
      </submoduleref>

      <!-- We only need a kernel if we want to migrate  -->
      <submoduleref name="SUBMOD_MIG_CHKKRNL" password="WPCMQDAR">
	<!-- pwd: 89806 -->
	<options>
	  <option name="MIGRATE_SECONDDB" />
	</options>
      </submoduleref>

      <!-- *************************************************************************** -->
      <!--  Otherwise we simply check if "SAPuptool" can connect now  -->
      <phase name="DBCONNCHK_TOOL" connect="seconddb"
	     password="SJICQLMB"> <!-- pwd: 57708 -->
        <args>
          <arg>DBCONNCHKTOOL.LOG</arg>
          <arg>USE_SAPUPTOOL</arg>
        </args>
	<options>
          <option name="MIGRATE_OPTION" value="HASSECONDDB" />
	</options>
      </phase>

    </phaselist>
  </module>

  <!-- *************************************************************************** -->
  <module name="MIGTOOL_PREEXECUTE" type="upgrade" mandatory="yes">
    <description>Preprocessing</description>
    <password>MQLQXXTE</password> <!--  pwd: 85528  -->
    <phaselist>
      <submoduleref name="SUBMOD_MIG_PRP" password="KRGCCBGT">
        <!-- pwd: 18958 -->
	<options>
          <option name="MIGRATE_SECONDDB" />
	</options>
      </submoduleref>

      <submoduleref name="SUBMOD_MIG_TABCHK_PRP" password="YDDPUZKH">
	<!-- pwd: 70121 -->
	<options>
	  <option name="UNICODE_only" /> <!--  doesn't work for non-UNICODE!  -->
	</options>
      </submoduleref>

    </phaselist>
  </module>

  <!-- *************************************************************************** -->
  <module name="MIGTOOL_EXECUTE" type="upgrade" mandatory="yes">
    <description>Execution</description>
    <password>MQLQXXTE</password> <!--  pwd: 85528  -->
    <phaselist>
      <submoduleref name="SUBMOD_MIG_FULLRUN" password="KRGCCBGT">
        <!-- pwd: 18958 -->
	<options>
          <option name="MIGRATE_SECONDDB" />
	</options>
      </submoduleref>

      <submoduleref name="SUBMOD_MIG_TABCHK_RUN" password="YDDPUZKH">
	<!-- pwd: 70121 -->
	<options>
	  <option name="UNICODE_only" /> <!--  doesn't work for non-UNICODE!  -->
	</options>
      </submoduleref>

    </phaselist>
  </module>
</modules>

</ExecutionControl>